"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[3388],{3800:function(t,n,e){e.d(n,{N:function(){return _},a:function(){return y},b:function(){return b},c:function(){return m},d:function(){return O},e:function(){return S},f:function(){return E},g:function(){return T},k:function(){return q},l:function(){return M},m:function(){return A},n:function(){return p},o:function(){return x},p:function(){return P},s:function(){return j},w:function(){return I}});e(6273),e(80861);var r=e(4506),i=e(25336),o=e(80347),u=e(19913),c=e(74772),s=e(76982),f=e(78115),a=e(60929),h=e(63918);function l(t,n){const e=(0,o.l)(t),i=(0,r.YN)(t[2]/e),u=Math.atan2(t[1]/e,t[0]/e);return(0,o.i)(n,e,i,u),n}var d=e(74695),g=e(11631);const _=m();function m(){return(0,s.vt)()}const p=c.e,v=c.e;function S(t,n){return(0,c.c)(n,t)}function M(t,n){return(0,s.fA)(t[0],t[1],t[2],n)}function I(t){return t}function b(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function T(t){return t[3]}function y(t){return t}function E(t,n,e,r){return(0,s.fA)(t,n,e,r)}function w(t,n,e){if(null==n)return!1;if(!B(t,n,N))return!1;let{t0:r,t1:i}=N;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(e){const{origin:t,direction:i}=n;e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r}return!0}function A(t,n,e){const r=(0,h.Cr)(n,e);if(!B(t,r,N))return[];const{origin:i,direction:c}=r,{t0:s,t1:a}=N,l=n=>{const e=(0,u.vt)();return(0,o.b)(e,i,c,n),P(t,e,e)};return Math.abs(s-a)<(0,f.FD)()?[l(s)]:[l(s),l(a)]}const N={t0:0,t1:0};function B(t,n,e){const{origin:r,direction:i}=n,o=$;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const u=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===u)return!1;const c=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),s=c*c-4*u*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(s<0)return!1;const f=Math.sqrt(s);return e.t0=(-c-f)/(2*u),e.t1=(-c+f)/(2*u),!0}const $=(0,u.vt)();function q(t,n){return w(t,n,null)}function D(t,n,e){const r=g.rq.get(),u=g.Rc.get();(0,o.h)(r,n.origin,n.direction);const c=T(t);(0,o.h)(e,r,n.origin),(0,o.g)(e,e,1/(0,o.l)(e)*c);const s=F(t,n.origin),f=(0,d.g7)(n.origin,e);return(0,i.$0)(u,f+s,r),(0,o.t)(e,e,u),e}function O(t,n,e,r){const i=T(t),o=i*i,u=n+.5*Math.PI,c=e*e+o-2*Math.cos(u)*e*i,s=Math.sqrt(c),f=c-o;if(f<=0)return.5;const a=Math.sqrt(f),h=Math.acos(a/s)-Math.asin(i/(s/Math.sin(u)));return Math.min(1,(h+.5*r)/r)}function P(t,n,e){const r=(0,o.d)(g.rq.get(),n,t),i=(0,o.g)(g.rq.get(),r,t[3]/(0,o.l)(r));return(0,o.f)(e,i,t)}function F(t,n){const e=(0,o.d)(g.rq.get(),n,t),i=(0,o.l)(e),u=T(t),c=u+Math.abs(u-i);return(0,r.XM)(u/c)}const R=(0,u.vt)();function C(t,n,e,r){const i=(0,o.d)(R,n,t);switch(e){case a._.X:{const t=l(i,R)[2];return(0,o.i)(r,-Math.sin(t),Math.cos(t),0)}case a._.Y:{const t=l(i,R),n=t[1],e=t[2],u=Math.sin(n);return(0,o.i)(r,-u*Math.cos(e),-u*Math.sin(e),Math.cos(n))}case a._.Z:return(0,o.n)(r,i);default:return}}function L(t,n){const e=(0,o.d)(k,n,t);return(0,o.l)(e)-t[3]}function x(t,n){const e=(0,o.s)(t,n),r=T(t);return e<=r*r}const k=(0,u.vt)(),V=m(),j=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:_,altitudeAt:L,angleToSilhouette:F,axisAt:C,cameraFrustumCoverage:O,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return w(t,n,e)?e:((0,h.oC)(n,t,e),P(t,e,e))},closestPointOnSilhouette:D,containsPoint:x,copy:S,create:m,distanceToSilhouette:function(t,n){const e=(0,o.d)(g.rq.get(),n,t),r=(0,o.k)(e),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:v,exactEquals:p,fromCenterAndRadius:M,fromRadius:b,fromValues:E,getCenter:y,getExtent:function(t,n){return n},getRadius:T,intersectLine:A,intersectRay:w,intersectRayClosestSilhouette:function(t,n,e){if(w(t,n,e))return e;const r=D(t,n,g.rq.get());return(0,o.f)(e,n.origin,(0,o.g)(g.rq.get(),n.direction,(0,o.j)(n.origin,r)/(0,o.l)(n.direction))),e},intersectsRay:q,projectPoint:P,setAltitudeAt:function(t,n,e,r){const i=L(t,n),u=C(t,n,a._.Z,k),c=(0,o.g)(k,u,e-i);return(0,o.f)(r,n,c)},setExtent:function(t,n,e){return t!==e&&S(t,e),e},tmpSphere:V,union:function(t,n,e=(0,s.vt)()){const r=(0,o.j)(t,n),i=t[3],u=n[3];return r+u<i?((0,c.c)(e,t),e):r+i<u?((0,c.c)(e,n),e):((0,o.m)(e,t,n,(r+u-i)/(2*r)),e[3]=(r+i+u)/2,e)},wrap:I},Symbol.toStringTag,{value:"Module"}))},11631:function(t,n,e){e.d(n,{Rc:function(){return g},J8:function(){return _},oG:function(){return h},rq:function(){return l},Km:function(){return d}});e(6273);var r=e(71709),i=e(79441),o=e(26110),u=e(19165),c=e(56560),s=e(19913),f=e(76982);class a{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new a(c.vt)}static createVec3f64(){return new a(s.vt)}static createVec4f64(){return new a(f.vt)}static createMat3f64(){return new a(i.vt)}static createMat4f64(){return new a(o.vt)}static createQuatf64(){return new a(u.vt)}get test(){}}const h=a.createVec2f64(),l=a.createVec3f64(),d=a.createVec4f64(),g=(a.createMat3f64(),a.createMat4f64()),_=a.createQuatf64()},13926:function(t,n,e){e.d(n,{O:function(){return r}});class r{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get outerSize(){return this._outer.size}get(t,n){return this._outer.get(t)?.get(n)}getInner(t){return this._outer.get(t)}set(t,n,e){const r=this._outer.get(t);r?r.set(n,e):this._outer.set(t,new Map([[n,e]]))}delete(t,n){const e=this._outer.get(t);e&&(e.delete(n),0===e.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((n,e)=>t(n,e)))}forAll(t){this._outer.forEach(((n,e)=>n.forEach(((n,r)=>t(n,e,r)))))}}},19165:function(t,n,e){function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}e.d(n,{o8:function(){return i},vt:function(){return r},zK:function(){return o}});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:function(t,n,e,r){return[t,n,e,r]}},Symbol.toStringTag,{value:"Module"}))},26110:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,n,e,r,i,o,u,c,s,f,a,h,l,d,g,_){return[t,n,e,r,i,o,u,c,s,f,a,h,l,d,g,_]}e.d(n,{fA:function(){return o},o8:function(){return i},vt:function(){return r},zK:function(){return u}});const u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:i,create:r,fromValues:o},Symbol.toStringTag,{value:"Module"}))},32159:function(t,n,e){e.d(n,{Y0:function(){return f},lO:function(){return a}});var r=e(34670),i=e(44153),o=e(67488);const u=new i.A(r.fv),c=new i.A(r.FY),s=new i.A(r.LJ),f=new i.A(r.Ro);function a(t){const n=h.get(t);if(n)return n;let e=u;if(t)if(t===c)e=c;else if(t===s)e=s;else{const n=t.wkid,r=t.latestWkid;if(null!=n||null!=r)(0,o.tl)(n)||(0,o.tl)(r)?e=c:((0,o.ZL)(n)||(0,o.ZL)(r))&&(e=s);else{const n=t.wkt2??t.wkt;if(n){const t=n.toUpperCase();t===l?e=c:t===d&&(e=s)}}}return h.set(t,e),e}const h=new Map,l=c.wkt.toUpperCase(),d=s.wkt.toUpperCase()},43398:function(t,n,e){e.d(n,{N5:function(){return s}});var r=e(62991),i=(e(6273),e(80861)),o=e(78455);const u=()=>i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class c{constructor(){this._includedModules=new Map}include(t,n){this._includedModules.has(t)?this._includedModules.get(t):(this._includedModules.set(t,n),t(this.builder,n))}}class s extends c{constructor(){super(...arguments),this.vertex=new l,this.fragment=new l,this.attributes=new d,this.varyings=new g,this.extensions=new _,this.outputs=new m}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t,n=!1){const e=this.extensions.generateSource(t),r=this.attributes.generateSource(t),i=this.varyings.generateSource(t),o="vertex"===t?this.vertex:this.fragment,u=o.uniforms.generateSource(),c=o.code.generateSource(),s=o.main.generateSource(n),f="vertex"===t?S:v,a=o.constants.generateSource(),h=this.outputs.generateSource(t);return`#version 300 es\n${e.join("\n")}\n${f}\n${a.join("\n")}\n${u.join("\n")}\n${r.join("\n")}\n${i.join("\n")}\n${h.join("\n")}\n${c.join("\n")}\n${s.join("\n")}`}generateBind(t){const n=new Map;this.vertex.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Bind];e&&n.set(t.name,e)})),this.fragment.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Bind];e&&n.set(t.name,e)}));const e=Array.from(n.values()),r=e.length;return n=>{for(let i=0;i<r;++i)e[i](t,n)}}generateBindPass(t){const n=new Map;this.vertex.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Pass];e&&n.set(t.name,e)})),this.fragment.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Pass];e&&n.set(t.name,e)}));const e=Array.from(n.values()),r=e.length;return(n,i)=>{for(let o=0;o<r;++o)e[o](t,n,i)}}generateBindDraw(t){const n=new Map;this.vertex.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Draw];e&&n.set(t.name,e)})),this.fragment.uniforms.entries.forEach((t=>{const e=t.bind[o.c.Draw];e&&n.set(t.name,e)}));const e=Array.from(n.values()),r=e.length;return(n,i,o)=>{for(let u=0;u<r;++u)e[u](t,o,n,i)}}}class f{constructor(t){this._stage=t,this._entries=new Map}add(...t){for(const n of t)this._add(n);return this._stage}get(t){return this._entries.get(t)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new r.A("shaderbuilder:duplicate-uniform",`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else u().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((({name:t,arraySize:n,type:e})=>null!=n?`uniform ${e} ${t}[${n}];`:`uniform ${e} ${t};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(t){this._stage=t,this._bodies=new Array}add(t){return this._bodies.push(t),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(t)throw new r.A("shaderbuilder:missing-main","Shader does not contain main function body.");return[]}}class h{constructor(t){this._stage=t,this._entries=new Array}add(t){return this._entries.push(t),this._stage}generateSource(){return this._entries}}class l extends c{constructor(){super(...arguments),this.uniforms=new f(this),this.main=new a(this),this.code=new h(this),this.constants=new p(this)}get builder(){return this}}class d{constructor(){this._entries=new Array}add(t,n){this._entries.push([t,n])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>`in ${t[1]} ${t[0]};`))}}class g{constructor(){this._entries=new Map}add(t,n,e){this._entries.has(t)?u().warn(`Ignoring duplicate varying ${n} ${t}`):this._entries.set(t,{type:n,invariant:e?.invariant??!1})}generateSource(t){const n=new Array;return this._entries.forEach(((e,r)=>n.push((e.invariant&&"vertex"===t?"invariant ":"")+("vertex"===t?"out":"in")+` ${e.type} ${r};`))),n}}class _{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const n="vertex"===t?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>n.includes(t))).map((t=>`#extension ${t} : enable`))}static{this.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"]}static{this.ALLOWLIST_VERTEX=[]}}class m{constructor(){this._entries=new Map}add(t,n,e=0){const r=this._entries.get(e);r?.name!==t||r?.type!==n?this._entries.set(e,{name:t,type:n}):u().warn(`Fragment shader output location ${e} occupied`)}static{this.DEFAULT_TYPE="vec4"}static{this.DEFAULT_NAME="fragColor"}generateSource(t){if("vertex"===t)return[];0===this._entries.size&&this._entries.set(0,{name:m.DEFAULT_NAME,type:m.DEFAULT_TYPE});const n=new Array;return this._entries.forEach(((t,e)=>n.push(`layout(location = ${e}) out ${t.type} ${t.name};`))),n}}class p{constructor(t){this._stage=t,this._entries=new Set}add(t,n,e){let r="ERROR_CONSTRUCTOR_STRING";switch(n){case"float":r=p._numberToFloatStr(e);break;case"int":r=p._numberToIntStr(e);break;case"bool":r=e.toString();break;case"vec2":r=`vec2(${p._numberToFloatStr(e[0])},                            ${p._numberToFloatStr(e[1])})`;break;case"vec3":r=`vec3(${p._numberToFloatStr(e[0])},                            ${p._numberToFloatStr(e[1])},                            ${p._numberToFloatStr(e[2])})`;break;case"vec4":r=`vec4(${p._numberToFloatStr(e[0])},                            ${p._numberToFloatStr(e[1])},                            ${p._numberToFloatStr(e[2])},                            ${p._numberToFloatStr(e[3])})`;break;case"ivec2":r=`ivec2(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])})`;break;case"ivec3":r=`ivec3(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])},                             ${p._numberToIntStr(e[2])})`;break;case"ivec4":r=`ivec4(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])},                             ${p._numberToIntStr(e[2])},                             ${p._numberToIntStr(e[3])})`;break;case"uvec2":r=`uvec2(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])})`;break;case"uvec3":r=`uvec3(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])},                             ${p._numberToIntStr(e[2])})`;break;case"uvec4":r=`uvec4(${p._numberToIntStr(e[0])},                             ${p._numberToIntStr(e[1])},                             ${p._numberToIntStr(e[2])},                             ${p._numberToIntStr(e[3])})`;break;case"mat2":case"mat3":case"mat4":r=`${n}(${Array.prototype.map.call(e,(t=>p._numberToFloatStr(t))).join(", ")})`}return this._entries.add(`const ${n} ${t} = ${r};`),this._stage}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const v="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n  precision highp usampler2D;\n  precision highp sampler2DArray;\n  precision highp sampler2DShadow;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n  precision mediump usampler2D;\n  precision mediump sampler2DArray;\n  precision mediump sampler2DShadow;\n#endif",S="precision highp float;\n precision highp sampler2D;\n precision highp usampler2D;\n precision highp sampler2DArray;\n precision highp sampler2DShadow;\n\n\n invariant gl_Position;\n "},45660:function(t,n,e){e.d(n,{Fm:function(){return s},Q7:function(){return f}});var r=e(82444),i=e(80347),o=e(19913),u=e(94669);e(11631);function c(t){return t?{p0:(0,o.o8)(t.p0),p1:(0,o.o8)(t.p1),p2:(0,o.o8)(t.p2)}:{p0:(0,o.vt)(),p1:(0,o.vt)(),p2:(0,o.vt)()}}function s(t,n,e){const r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],u=e[1]-t[1];return.5*Math.abs(r*u-i*o)}function f(t,n,e){return(0,i.d)(a,n,t),(0,i.d)(h,e,t),.5*(0,i.l)((0,i.h)(a,a,h))}new r.I(u.vt),new r.I((()=>c()));const a=(0,o.vt)(),h=(0,o.vt)()},45773:function(t,n,e){e.d(n,{VV:function(){return c},hG:function(){return o},wp:function(){return u}});e(4506);var r=e(80347),i=e(19913);function o(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function u(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),i=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),o=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.i)(t,e,i,o),t}function c(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(n,0,1,0):(0,r.i)(n,1,0,0),(0,r.h)(e,t,n),(0,r.h)(n,e,t),(0,r.n)(e,e),(0,r.n)(n,n)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()},63918:function(t,n,e){e.d(n,{C:function(){return l},Cr:function(){return d},LV:function(){return h},Zb:function(){return p},fA:function(){return g},kb:function(){return _},oC:function(){return m},vt:function(){return f}});e(3223);var r=e(82444),i=e(82541),o=e(79441),u=e(80347),c=e(19913),s=e(11631);function f(t){return t?a((0,c.o8)(t.origin),(0,c.o8)(t.direction)):a((0,c.vt)(),(0,c.vt)())}function a(t,n){return{origin:t,direction:n}}function h(t,n){const e=v.get();return e.origin=t,e.direction=n,e}function l(t,n=f()){return g(t.origin,t.direction,n)}function d(t,n,e=f()){return(0,u.c)(e.origin,t),(0,u.d)(e.direction,n,t),e}function g(t,n,e=f()){return(0,u.c)(e.origin,t),(0,u.c)(e.direction,n),e}function _(t,n){const e=(0,u.h)(s.rq.get(),(0,u.n)(s.rq.get(),t.direction),(0,u.d)(s.rq.get(),n,t.origin));return(0,u.e)(e,e)}function m(t,n,e){const r=(0,u.e)(t.direction,(0,u.d)(e,n,t.origin));return(0,u.f)(e,t.origin,(0,u.g)(e,t.direction,r)),e}function p(t,n,e,r){const o=t.origin,c=n.origin,s=t.direction,f=n.direction,a=(0,u.e)((0,u.n)(M,s),(0,u.n)(I,f));if(Math.abs(a)>=1)return null;const h=(0,u.h)(M,s,f),l=(0,u.a)(S,c,o),d=(0,i.hZ)(b,s[0],s[1],s[2],-f[0],-f[1],-f[2],h[0],h[1],h[2]),g=(0,i.B8)(b,d);if(null==g)return[e,r];const _=(0,u.e)((0,u.i)(M,g[0],g[3],g[6]),l),m=(0,u.e)((0,u.i)(I,g[1],g[4],g[7]),l);return(0,u.f)(e,o,(0,u.g)(S,s,_)),(0,u.f)(r,c,(0,u.g)(S,f,m)),[e,r]}const v=new r.I((()=>f())),S=(0,c.vt)(),M=(0,c.vt)(),I=(0,c.vt)(),b=(0,o.vt)()},66335:function(t,n,e){e.d(n,{a:function(){return o},b:function(){return a},l:function(){return f},n:function(){return c},t:function(){return u}});var r=e(36137),i=(e(6273),e(80861));function o(t,n,e){u(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function u(t,n,e,r=4,i=r){if(t.length/r!=n.length/i)return;const o=t.length/r,u=e[0],c=e[1],s=e[2],f=e[3],a=e[4],h=e[5],l=e[6],d=e[7],g=e[8];let _=0,m=0;for(let e=0;e<o;e++){const e=n[_],o=n[_+1],p=n[_+2],v=n[_+3];t[m]=u*e+f*o+l*p,t[m+1]=c*e+a*o+d*p,t[m+2]=s*e+h*o+g*p,t[m+3]=v,_+=i,m+=r}}function c(t,n){const e=Math.min(t.count,n.count),r=t.typedBuffer,i=t.typedBufferStride,o=n.typedBuffer,u=n.typedBufferStride;for(let t=0;t<e;t++){const n=t*i,e=t*u,c=o[e],s=o[e+1],f=o[e+2],a=c*c+s*s+f*f;if(a>0){const t=1/Math.sqrt(a);r[n]=t*c,r[n+1]=t*s,r[n+2]=t*f}}}function s(t,n,e,r=4){const i=Math.min(t.length/r,n.count),o=n.typedBuffer,u=n.typedBufferStride;let c=0,s=0;for(let n=0;n<i;n++)t[s]=e*o[c],t[s+1]=e*o[c+1],t[s+2]=e*o[c+2],t[s+3]=e*o[c+3],c+=u,s+=r}function f(t,n,e,r){a(t.typedBuffer,n,e,r,t.typedBufferStride)}function a(t,n,e,i,o=4){const u=Math.min(t.length/o,n.count),c=n.typedBuffer,s=n.typedBufferStride;let f=0,a=0;const h=1/r.Tf;for(let n=0;n<u;n++)t[a]=i*(e*c[f])**h,t[a+1]=i*(e*c[f+1])**h,t[a+2]=i*(e*c[f+2])**h,t[a+3]=i*e*c[f+3],f+=s,a+=o}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:a,linearToSRGBView:f,normalize:c,scale:s,scaleView:function(t,n,e){s(t.typedBuffer,n,e,t.typedBufferStride)},transformMat3:u,transformMat3View:o,transformMat4:function(t,n,e,r=4,o=r){if(t.length/r!=n.length/o)return void i.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const u=t.length/r,c=e[0],s=e[1],f=e[2],a=e[3],h=e[4],l=e[5],d=e[6],g=e[7],_=e[8],m=e[9],p=e[10],v=e[11],S=e[12],M=e[13],I=e[14],b=e[15];let T=0,y=0;for(let e=0;e<u;e++){const e=n[T],i=n[T+1],u=n[T+2],E=n[T+3];t[y]=c*e+h*i+_*u+S*E,t[y+1]=s*e+l*i+m*u+M*E,t[y+2]=f*e+d*i+p*u+I*E,t[y+3]=a*e+g*i+v*u+b*E,T+=o,y+=r}},transformMat4View:function(t,n,e){if(t.count!==n.count)return;const r=t.count,i=e[0],o=e[1],u=e[2],c=e[3],s=e[4],f=e[5],a=e[6],h=e[7],l=e[8],d=e[9],g=e[10],_=e[11],m=e[12],p=e[13],v=e[14],S=e[15],M=t.typedBuffer,I=t.typedBufferStride,b=n.typedBuffer,T=n.typedBufferStride;for(let t=0;t<r;t++){const n=t*I,e=t*T,r=b[e],y=b[e+1],E=b[e+2],w=b[e+3];M[n]=i*r+s*y+l*E+m*w,M[n+1]=o*r+f*y+d*E+p*w,M[n+2]=u*r+a*y+g*E+v*w,M[n+3]=c*r+h*y+_*E+S*w}}},Symbol.toStringTag,{value:"Module"}))},72449:function(t,n,e){e.d(n,{a:function(){return h},b:function(){return c},c:function(){return u},d:function(){return i},e:function(){return l},f:function(){return a},l:function(){return f},n:function(){return d},t:function(){return o}});var r=e(36137);e(6273),e(80861);function i(t,n,e){o(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function o(t,n,e,r=3,i=r){if(t.length/r!==Math.ceil(n.length/i))return t;const o=t.length/r,u=e[0],c=e[1],s=e[2],f=e[4],a=e[5],h=e[6],l=e[8],d=e[9],g=e[10],_=e[12],m=e[13],p=e[14];let v=0,S=0;for(let e=0;e<o;e++){const e=n[v],o=n[v+1],M=n[v+2];t[S]=u*e+f*o+l*M+_,t[S+1]=c*e+a*o+d*M+m,t[S+2]=s*e+h*o+g*M+p,v+=i,S+=r}return t}function u(t,n,e){c(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function c(t,n,e,r=3,i=r){if(t.length/r!==Math.ceil(n.length/i))return;const o=t.length/r,u=e[0],c=e[1],s=e[2],f=e[3],a=e[4],h=e[5],l=e[6],d=e[7],g=e[8];let _=0,m=0;for(let e=0;e<o;e++){const e=n[_],o=n[_+1],p=n[_+2];t[m]=u*e+f*o+l*p,t[m+1]=c*e+a*o+d*p,t[m+2]=s*e+h*o+g*p,_+=i,m+=r}}function s(t,n,e,r=3,i=r){const o=Math.min(t.length/r,n.length/i);let u=0,c=0;for(let s=0;s<o;s++)t[c]=e*n[u],t[c+1]=e*n[u+1],t[c+2]=e*n[u+2],u+=i,c+=r;return t}function f(t,n,e,r){a(t.typedBuffer,n.typedBuffer,e,r,t.typedBufferStride,n.typedBufferStride)}function a(t,n,e,i,o=3,u=o){const c=Math.min(t.length/o,n.length/u);let s=0,f=0;const a=1/r.Tf;for(let r=0;r<c;r++)t[f]=i*(e*n[s])**a,t[f+1]=i*(e*n[s+1])**a,t[f+2]=i*(e*n[s+2])**a,s+=u,f+=o}function h(t,n,e,r=3,i=r){const o=t.length/r;if(o!==Math.ceil(n.length/i))return t;let u=0,c=0;for(let s=0;s<o;s++)t[c]=n[u]+e[0],t[c+1]=n[u+1]+e[1],t[c+2]=n[u+2]+e[2],u+=i,c+=r;return t}function l(t,n){d(t.typedBuffer,n.typedBuffer,t.typedBufferStride,n.typedBufferStride)}function d(t,n,e=3,r=e){const i=Math.min(t.length/e,n.length/r);let o=0,u=0;for(let c=0;c<i;c++){const i=n[o],c=n[o+1],s=n[o+2],f=i*i+c*c+s*s;if(f>0){const n=1/Math.sqrt(f);t[u]=n*i,t[u+1]=n*c,t[u+2]=n*s}o+=r,u+=e}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:a,linearToSRGBView:f,normalize:d,normalizeView:l,scale:s,scaleView:function(t,n,e){s(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)},shiftRight:function(t,n,e){const r=Math.min(t.count,n.count),i=t.typedBuffer,o=t.typedBufferStride,u=n.typedBuffer,c=n.typedBufferStride;let s=0,f=0;for(let t=0;t<r;t++)i[f]=u[s]>>e,i[f+1]=u[s+1]>>e,i[f+2]=u[s+2]>>e,s+=c,f+=o},transformMat3:c,transformMat3View:u,transformMat4:o,transformMat4View:i,translate:h},Symbol.toStringTag,{value:"Module"}))},74695:function(t,n,e){e.d(n,{EJ:function(){return f},_I:function(){return u},g7:function(){return s},gr:function(){return c}});var r=e(4506),i=e(80347),o=e(19913);function u(t,n,e){const r=(0,i.e)(t,n)/(0,i.e)(t,t);return(0,i.g)(e,t,r)}function c(t,n){return(0,i.e)(t,n)/(0,i.l)(t)}function s(t,n){const e=(0,i.e)(t,n)/((0,i.l)(t)*(0,i.l)(n));return-(0,r.XM)(e)}function f(t,n,e){(0,i.n)(a,t),(0,i.n)(h,n);const o=(0,i.e)(a,h),u=(0,r.XM)(o),c=(0,i.h)(a,a,h);return(0,i.e)(c,e)<0?2*Math.PI-u:u}const a=(0,o.vt)(),h=(0,o.vt)()},78455:function(t,n,e){var r;e.d(n,{c:function(){return r}}),function(t){t[t.Bind=0]="Bind",t[t.Pass=1]="Pass",t[t.Draw=2]="Draw"}(r||(r={}))},82444:function(t,n,e){e.d(n,{I:function(){return i}});var r=e(71709);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},87368:function(t,n,e){e.d(n,{$Q:function(){return O},C:function(){return l},Cr:function(){return m},Io:function(){return C},LV:function(){return h},O_:function(){return _},Qj:function(){return d},T7:function(){return $},Tj:function(){return D},U5:function(){return N},Ui:function(){return B},Z1:function(){return R},_I:function(){return F},b6:function(){return P},ci:function(){return v},fA:function(){return g},gv:function(){return q},lU:function(){return p},mN:function(){return L},mP:function(){return E},mR:function(){return A},vt:function(){return a},ze:function(){return w}});var r=e(4506),i=e(80347),o=e(19913),u=e(74772),c=e(74695),s=e(11631),f=e(45773);function a(t=U){return[t[0],t[1],t[2],t[3]]}u.a,u.e;function h(t=U[0],n=U[1],e=U[2],r=U[3]){return g(t,n,e,r,s.Km.get())}function l(t,n){return g(n[0],n[1],n[2],n[3],t)}function d(t){return t}function g(t,n,e,r,i=a()){return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function _(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function m(t,n,e,r=a()){const i=e[0]-n[0],o=e[1]-n[1],u=e[2]-n[2],c=t[0]-n[0],s=t[1]-n[1],f=t[2]-n[2],h=o*f-u*s,l=u*c-i*f,d=i*s-o*c,g=h*h+l*l+d*d,_=Math.abs(g-1)>1e-5&&g>1e-12?1/Math.sqrt(g):1;return r[0]=h*_,r[1]=l*_,r[2]=d*_,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function p(t,n,e,r=0,o=Math.floor(e*(1/3)),u=Math.floor(e*(2/3))){if(e<3)return!1;n(M,r);let c=o,s=!1;for(;c<e-1&&!s;)n(I,c),c++,s=!(0,i.q)(M,I);if(!s)return!1;for(c=Math.max(c,u),s=!1;c<e&&!s;)n(b,c),c++,(0,i.d)(T,M,I),(0,i.n)(T,T),(0,i.d)(y,I,b),(0,i.n)(y,y),s=!(0,i.q)(M,b)&&!(0,i.q)(I,b)&&Math.abs((0,i.e)(T,y))<S;return s?(m(M,I,b,t),!0):(0!==r||1!==o||2!==u)&&p(t,n,e,0,1,2)}function v(t,n,e=!0){const r=n.length/3;return p(t,((t,e)=>(0,i.i)(t,n[3*e+0],n[3*e+1],n[3*e+2])),e?r-1:r)}const S=.99619469809,M=(0,o.vt)(),I=(0,o.vt)(),b=(0,o.vt)(),T=(0,o.vt)(),y=(0,o.vt)();function E(t,n,e){return n!==t&&l(t,n),t[3]=-(0,i.e)(t,e),t}function w(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function A(t,n,e,r){return(0,i.h)(b,n,t),_(e,b,r)}function N(t,n,e,r){return V(j(t,n,(0,i.d)(s.rq.get(),e,n),G,r))}function B(t,n,e){return null!=n&&V(j(t,n.origin,n.direction,X,e))}function $(t,n,e){return V(j(t,n.origin,n.vector,z.NONE,e))}function q(t,n,e){return V(j(t,n.origin,n.vector,z.CLAMP,e))}function D(t,n){return L(t,n)>=0}function O(t,n){const e=(0,i.e)(t,n.ray.direction),r=-L(t,n.ray.origin);if(r<0&&e>=0)return!1;if(e>-1e-6&&e<1e-6)return r>0;if((r<0||e<0)&&!(r<0&&e<0))return!0;const o=r/e;return e>0?o<n.c1&&(n.c1=o):o>n.c0&&(n.c0=o),n.c0<=n.c1}function P(t,n){const e=(0,i.e)(t,n.ray.direction),r=-L(t,n.ray.origin);if(e>-1e-6&&e<1e-6)return r>0;const o=r/e;return e>0?o<n.c1&&(n.c1=o):o>n.c0&&(n.c0=o),n.c0<=n.c1}function F(t,n,e){const r=(0,i.g)(s.rq.get(),t,-t[3]),o=function(t,n,e){const r=(0,i.g)(s.rq.get(),t,(0,i.e)(t,n));return(0,i.d)(e,n,r),e}(t,(0,i.d)(s.rq.get(),n,r),s.rq.get());return(0,i.f)(e,o,r),e}function R(t,n,e,r){const o=t,u=s.rq.get(),a=s.rq.get();(0,f.VV)(o,u,a);const h=(0,i.d)(s.rq.get(),e,n),l=(0,c.gr)(u,h),d=(0,c.gr)(a,h),g=(0,c.gr)(o,h);return(0,i.i)(r,l,d,g)}function C(t,n){return Math.abs(L(t,n))}function L(t,n){return(0,i.e)(t,n)+t[3]}var x,k;function V(t){return t===x.INTERSECTS_INSIDE_OUT||t===x.INTERSECTS_OUTSIDE_IN}function j(t,n,e,o,u){const c=(0,i.e)(t,e),s=L(t,n);if(0===c)return s>=0?x.INSIDE:x.OUTSIDE;let f=-s/c;return o&z.CLAMP&&(f=(0,r.qE)(f,0,1)),!(o&z.INFINITE_MIN)&&f<0||!(o&z.INFINITE_MAX)&&f>1?s>=0?x.INSIDE:x.OUTSIDE:((0,i.f)(u,n,(0,i.g)(u,e,f)),s>=0?x.INTERSECTS_INSIDE_OUT:x.INTERSECTS_OUTSIDE_IN)}(k=x||(x={}))[k.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",k[k.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",k[k.INSIDE=2]="INSIDE",k[k.OUTSIDE=3]="OUTSIDE";const U=[0,0,1,0];var z;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(z||(z={}));const G=z.INFINITE_MIN|z.INFINITE_MAX,X=z.INFINITE_MAX},94669:function(t,n,e){e.d(n,{C:function(){return f},Cr:function(){return h},H6:function(){return _},_I:function(){return d},dz:function(){return m},fA:function(){return a},kb:function(){return l},ld:function(){return p},sd:function(){return g},vt:function(){return s}});var r=e(4506),i=e(82444),o=e(80347),u=e(19913),c=e(11631);function s(t){return t?{origin:(0,u.o8)(t.origin),vector:(0,u.o8)(t.vector)}:{origin:(0,u.vt)(),vector:(0,u.vt)()}}function f(t,n=s()){return a(t.origin,t.vector,n)}function a(t,n,e=s()){return(0,o.c)(e.origin,t),(0,o.c)(e.vector,n),e}function h(t,n,e=s()){return(0,o.c)(e.origin,t),(0,o.d)(e.vector,n,t),e}function l(t,n){const e=(0,o.d)(c.rq.get(),n,t.origin),i=(0,o.e)(t.vector,e),u=(0,o.e)(t.vector,t.vector),s=(0,r.qE)(i/u,0,1),f=(0,o.d)(c.rq.get(),(0,o.g)(c.rq.get(),t.vector,s),e);return(0,o.e)(f,f)}function d(t,n,e){return _(t,n,0,1,e)}function g(t,n,e){return(0,o.f)(e,t.origin,(0,o.g)(e,t.vector,n))}function _(t,n,e,i,u){const{vector:s,origin:f}=t,a=(0,o.d)(c.rq.get(),n,f),h=(0,o.e)(s,a)/(0,o.k)(s);return(0,o.g)(u,s,(0,r.qE)(h,e,i)),(0,o.f)(u,u,t.origin)}function m(t,n){if(v(t,function(t,n){const e=M.get();return e.origin=t,e.vector=n,e}(n.origin,n.direction),!1,S)){const{tA:n,pB:e,distance2:r}=S;if(n>=0&&n<=1)return r;if(n<0)return(0,o.s)(t.origin,e);if(n>1)return(0,o.s)((0,o.f)(c.rq.get(),t.origin,t.vector),e)}return null}function p(t,n,e){return!!v(t,n,!0,S)&&((0,o.c)(e,S.pA),!0)}function v(t,n,e,i){const u=1e-6,s=t.origin,f=(0,o.f)(c.rq.get(),s,t.vector),a=n.origin,h=(0,o.f)(c.rq.get(),a,n.vector),l=c.rq.get(),d=c.rq.get();if(l[0]=s[0]-a[0],l[1]=s[1]-a[1],l[2]=s[2]-a[2],d[0]=h[0]-a[0],d[1]=h[1]-a[1],d[2]=h[2]-a[2],Math.abs(d[0])<u&&Math.abs(d[1])<u&&Math.abs(d[2])<u)return!1;const g=c.rq.get();if(g[0]=f[0]-s[0],g[1]=f[1]-s[1],g[2]=f[2]-s[2],Math.abs(g[0])<u&&Math.abs(g[1])<u&&Math.abs(g[2])<u)return!1;const _=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],m=d[0]*g[0]+d[1]*g[1]+d[2]*g[2],p=l[0]*g[0]+l[1]*g[1]+l[2]*g[2],v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],S=(g[0]*g[0]+g[1]*g[1]+g[2]*g[2])*v-m*m;if(Math.abs(S)<u)return!1;let M=(_*m-p*v)/S,I=(_+m*M)/v;e&&(M=(0,r.qE)(M,0,1),I=(0,r.qE)(I,0,1));const b=c.rq.get(),T=c.rq.get();return b[0]=s[0]+M*g[0],b[1]=s[1]+M*g[1],b[2]=s[2]+M*g[2],T[0]=a[0]+I*d[0],T[1]=a[1]+I*d[1],T[2]=a[2]+I*d[2],i.tA=M,i.tB=I,i.pA=b,i.pB=T,i.distance2=(0,o.s)(b,T),!0}const S={tA:0,tB:0,pA:(0,u.vt)(),pB:(0,u.vt)(),distance2:0},M=new i.I((()=>s()))}}]);