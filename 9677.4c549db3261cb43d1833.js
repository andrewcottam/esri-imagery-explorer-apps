"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[9677],{935:function(t,n,e){e.d(n,{A:function(){return l}});var r,i,o=e(39744),s=e(41785),u=e(80347),c=e(19913),a=e(74224),f=e(63918),h=e(3800),d=e(26421);class l{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,n){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new _,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}destroy(){this._degenerateObjects.clear(),_.clearPool(),P[0]=null,q.prune(),H.prune()}add(t){const n=Array.from(t);this._grow(n);const e=_.acquire();for(const t of n)++this._objectCount,this._isDegenerate(t)?this._degenerateObjects.add(t):(e.init(this._root),this._add(t,e));_.release(e)}remove(t,n=null){this._objectCount-=t.length;const e=_.acquire();for(const r of t){const t=n??(0,h.e)(this.objectToBoundingSphere(r),L);I(t[3])?(e.init(this._root),m(r,t,e)):this._degenerateObjects.delete(r)}_.release(e),this._shrink()}update(t,n){if(!I(n[3])&&this._isDegenerate(t))return;const e=function(t){return P[0]=t,P}(t);this.remove(e,n),this.add(e)}forEachAlongRay(t,n,e){const r=(0,f.LV)(t,n);T(this._root,(t=>{if(!function(t,n){return b((0,h.a)(n.bounds),2*-n.halfSize,x),b((0,h.a)(n.bounds),2*n.halfSize,C),(0,d.O_)(t.origin,t.direction,x,C)}(r,t))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,n,e,r){const i=(0,f.LV)(t,n);T(this._root,(t=>{if(!function(t,n,e){return b((0,h.a)(n.bounds),2*-n.halfSize,x),b((0,h.a)(n.bounds),2*n.halfSize,C),e.applyToMinMax(x,C),(0,d.O_)(t.origin,t.direction,x,C)}(i,t,r))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&e(t)})),!0}))}forEach(t){T(this._root,(n=>{const e=n.node;return e.terminals.forAll(t),null!==e.residents&&e.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,n,e,r=()=>!0,i=1/0){let o=1/0,s=1/0,c=null;const f=v(t,n),d=u=>{if(--i,!r(u))return;const f=this.objectToBoundingSphere(u);if(!(0,a.m7)(e,f))return;const d=R(t,n,(0,h.a)(f)),l=d-f[3],_=d+f[3];l<o&&(o=l,s=_,c=u)};return g(this._root,(r=>{if(i<=0||!(0,a.m7)(e,r.bounds))return!1;if((0,u.g)(j,f,r.halfSize),(0,u.f)(j,j,(0,h.a)(r.bounds)),R(t,n,j)>s)return!1;const o=r.node;return o.terminals.forAll((t=>d(t))),null!==o.residents&&o.residents.forAll((t=>d(t))),!0}),t,n),c}forEachInDepthRange(t,n,e,r,i,o,s){let c=-1/0,f=1/0;const d={setRange:t=>{e===l.DepthOrder.FRONT_TO_BACK?(c=Math.max(c,t.near),f=Math.min(f,t.far)):(c=Math.max(c,-t.far),f=Math.min(f,-t.near))}};d.setRange(r);const _=R(n,e,t),T=v(n,e),m=v(n,-e),O=t=>{if(!s(t))return;const r=this.objectToBoundingSphere(t),u=(0,h.a)(r),l=R(n,e,u)-_,T=l-r[3],g=l+r[3];T>f||g<c||!(0,a.m7)(o,r)||i(t,d)};g(this._root,(t=>{if(!(0,a.m7)(o,t.bounds))return!1;if((0,u.g)(j,T,t.halfSize),(0,u.f)(j,j,(0,h.a)(t.bounds)),R(n,e,j)-_>f)return!1;if((0,u.g)(j,m,t.halfSize),(0,u.f)(j,j,(0,h.a)(t.bounds)),R(n,e,j)-_<c)return!1;const r=t.node;return r.terminals.forAll((t=>O(t))),null!==r.residents&&r.residents.forAll((t=>O(t))),!0}),n,e)}forEachNode(t){T(this._root,(n=>t(n.node,n.bounds,n.halfSize,n.depth)))}forEachNeighbor(t,n){const e=(0,h.g)(n),r=(0,h.a)(n),i=n=>{const i=this.objectToBoundingSphere(n),o=(0,h.g)(i),s=e+o;return!((0,u.s)((0,h.a)(i),r)-s*s<=0)||t(n)};let o=!0;const s=t=>{o&&(o=i(t))};T(this._root,(t=>{const n=(0,h.g)(t.bounds),i=e+n;if((0,u.s)((0,h.a)(t.bounds),r)-i*i>0)return!1;const c=t.node;return c.terminals.forAll(s),o&&null!==c.residents&&c.residents.forAll(s),o})),o&&this.forEachDegenerateObject(s)}_intersectsObject(t,n){const e=this.objectToBoundingSphere(n);return!(e[3]>0)||(0,h.k)(e,t)}_intersectsObjectWithOffset(t,n,e){const r=this.objectToBoundingSphere(n);return!(r[3]>0)||(0,h.k)(e.applyToBoundingSphere(r),t)}_add(t,n){n.advanceTo(this.objectToBoundingSphere(t))?n.node.terminals.push(t):(n.node.residents.push(t),n.node.residents.length>this._maximumObjectsPerNode&&n.depth<this._maximumDepth&&this._split(n))}_split(t){const n=t.node.residents;t.node.residents=null;for(let e=0;e<n.length;e++){const r=_.acquire().init(t);this._add(n.at(e),r),_.release(r)}}_grow(t){if(M(t,(t=>this.objectToBoundingSphere(t)),w),I(w[3])&&!this._fitsInsideTree(w))if(A(this._root.node))(0,h.e)(w,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(w);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(w,t):this._growRootAsSubNode(t),_.release(t)}}_rebuildTree(t,n){(0,u.c)((0,h.a)(z),(0,h.a)(n.bounds)),z[3]=n.halfSize,M([t,z],(t=>t),D);const e=_.acquire().init(this._root);this._root.initFrom(null,D,D[3]),this._root.increaseHalfSize(1.25),T(e,(t=>(this.add(t.node.terminals.data),null!==t.node.residents&&this.add(t.node.residents.data),!0))),_.release(e)}_placingRootViolatesMaxDepth(t){const n=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let e=0;return T(this._root,(t=>(e=Math.max(e,t.depth),e+n<=this._maximumDepth))),e+n>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const n=t[3],e=t;let r=-1/0;const i=this._root.bounds,o=this._root.halfSize;for(let t=0;t<3;t++){const s=i[t]-o-(e[t]-n),u=e[t]+n-(i[t]+o),c=Math.max(0,Math.ceil(s/(2*o))),a=Math.max(0,Math.ceil(u/(2*o)))+1,f=2**Math.ceil(Math.log(c+a)*Math.LOG2E);r=Math.max(r,f),y[t].min=c,y[t].max=a}for(let t=0;t<3;t++){let n=y[t].min,e=y[t].max;const s=(r-(n+e))/2;n+=Math.ceil(s),e+=Math.floor(s);const u=i[t]-o-n*o*2;B[t]=u+(e+n)*o}const s=r*o;return B[3]=s*F,_.acquire().initFrom(null,B,s,0)}_growRootAsSubNode(t){const n=this._root.node;(0,u.c)((0,h.a)(w),(0,h.a)(this._root.bounds)),w[3]=this._root.halfSize,this._root.init(t),t.advanceTo(w,null,!0),t.node.children=n.children,t.node.residents=n.residents,t.node.terminals=n.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const n=this._root.node.children;let e=0,r=0;for(;r<n.length&&null==t;)e=r++,t=n[e];for(;r<n.length;)if(n[r++])return-1;return e}_isDegenerate(t){return!I(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const n=this._root.bounds,e=this._root.halfSize;return t[3]<=e&&t[0]>=n[0]-e&&t[0]<=n[0]+e&&t[1]>=n[1]-e&&t[1]<=n[1]+e&&t[2]>=n[2]-e&&t[2]<=n[2]+e}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:n,_objectCount:e}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:n,objectCount:e,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(t){const n=t.children.map((t=>t?this._nodeToJSON(t):null)),e=t.residents?.map((t=>this.objectToBoundingSphere(t))),r=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:n,residents:e,terminals:r}}static fromJSON(t){const n=new l((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return n._objectCount=t.objectCount,n._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),n}}class _{constructor(){this.bounds=(0,h.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,n,e,r=this.depth){return this.node=null!=t?t:_.createEmptyNode(),n&&(0,h.e)(n,this.bounds),this.halfSize=e,this.depth=r,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*F}advance(t){let n=this.node.children[t];n||(n=_.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;const e=N[t];return this.bounds[0]+=e[0]*this.halfSize,this.bounds[1]+=e[1]*this.halfSize,this.bounds[2]+=e[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,n,e=!1){for(;;){if(this.isTerminalFor(t))return n&&n(this,-1),!0;if(this.isLeaf()){if(!e)return n&&n(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);n&&n(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const n=this.bounds;return(n[0]<t[0]?1:0)+(n[1]<t[1]?2:0)+(n[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new s.A({shrink:!0}),residents:new s.A({shrink:!0})}}static{this._pool=new o.A(_)}static acquire(){return _._pool.acquire()}static release(t){_._pool.release(t)}static clearPool(){_._pool.prune()}}function T(t,n){let e=_.acquire().init(t);const r=[e];for(;0!==r.length;){if(e=r.pop(),n(e)&&!e.isLeaf())for(let t=0;t<e.node.children.length;t++)e.node.children[t]&&r.push(_.acquire().init(e).advance(t));_.release(e)}}function g(t,n,e,r=l.DepthOrder.FRONT_TO_BACK){let i=_.acquire().init(t);const o=[i];for(function(t,n,e){if(!H.length)for(let t=0;t<8;++t)H.push({index:0,distance:0});for(let e=0;e<8;++e){const r=N[e];H.data[e].index=e,H.data[e].distance=R(t,n,r)}H.sort(((t,n)=>t.distance-n.distance));for(let t=0;t<8;++t)e[t]=H.data[t].index}(e,r,G);0!==o.length;){if(i=o.pop(),n(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const n=G[t];i.node.children[n]&&o.push(_.acquire().init(i).advance(n))}_.release(i)}}function m(t,n,e){q.clear();const r=e.advanceTo(n,((t,n)=>{q.push(t.node),q.push(n)}))?e.node.terminals:e.node.residents;if(r.removeUnordered(t),0===r.length)for(let t=q.length-2;t>=0&&O(q.data[t],q.data[t+1]);t-=2);}function O(t,n){return n>=0&&(t.children[n]=null),!!A(t)&&(null===t.residents&&(t.residents=new s.A({shrink:!0})),!0)}function A(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let n=0;n<t.children.length;n++)if(t.children[n])return!1;return!0}function p(t,n){t[0]=Math.min(t[0],n[0]-n[3]),t[1]=Math.min(t[1],n[1]-n[3]),t[2]=Math.min(t[2],n[2]-n[3])}function E(t,n){t[0]=Math.max(t[0],n[0]+n[3]),t[1]=Math.max(t[1],n[1]+n[3]),t[2]=Math.max(t[2],n[2]+n[3])}function b(t,n,e){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function M(t,n,e){x[0]=1/0,x[1]=1/0,x[2]=1/0,C[0]=-1/0,C[1]=-1/0,C[2]=-1/0;for(const e of t){const t=n(e);I(t[3])&&(p(x,t),E(C,t))}(0,u.m)((0,h.a)(e),x,C,.5),e[3]=Math.max(C[0]-x[0],C[1]-x[1],C[2]-x[2])/2}function v(t,n){let e,r=1/0;for(let i=0;i<8;++i){const o=R(t,n,S[i]);o<r&&(r=o,e=S[i])}return e}function R(t,n,e){return n*(t[0]*e[0]+t[1]*e[1]+t[2]*e[2])}function I(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}r=l||(l={}),(i=r.DepthOrder||(r.DepthOrder={}))[i.FRONT_TO_BACK=1]="FRONT_TO_BACK",i[i.BACK_TO_FRONT=-1]="BACK_TO_FRONT";const N=[(0,c.fA)(-1,-1,-1),(0,c.fA)(1,-1,-1),(0,c.fA)(-1,1,-1),(0,c.fA)(1,1,-1),(0,c.fA)(-1,-1,1),(0,c.fA)(1,-1,1),(0,c.fA)(-1,1,1),(0,c.fA)(1,1,1)],S=[(0,c.fA)(-1,-1,-1),(0,c.fA)(-1,-1,1),(0,c.fA)(-1,1,-1),(0,c.fA)(-1,1,1),(0,c.fA)(1,-1,-1),(0,c.fA)(1,-1,1),(0,c.fA)(1,1,-1),(0,c.fA)(1,1,1)],F=Math.sqrt(3),P=[null];const B=(0,h.c)(),j=(0,c.vt)(),x=(0,c.vt)(),C=(0,c.vt)(),q=new s.A,L=(0,h.c)(),w=(0,h.c)(),z=(0,h.c)(),D=(0,h.c)(),y=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new s.A,G=[0,0,0,0,0,0,0,0]},3800:function(t,n,e){e.d(n,{N:function(){return T},a:function(){return v},b:function(){return b},c:function(){return g},d:function(){return x},e:function(){return A},f:function(){return R},g:function(){return M},k:function(){return B},l:function(){return p},m:function(){return N},n:function(){return m},o:function(){return D},p:function(){return C},s:function(){return G},w:function(){return E}});e(6273),e(80861);var r=e(4506),i=e(25336),o=e(80347),s=e(19913),u=e(74772),c=e(76982),a=e(78115),f=e(60929),h=e(63918);function d(t,n){const e=(0,o.l)(t),i=(0,r.YN)(t[2]/e),s=Math.atan2(t[1]/e,t[0]/e);return(0,o.i)(n,e,i,s),n}var l=e(74695),_=e(11631);const T=g();function g(){return(0,c.vt)()}const m=u.e,O=u.e;function A(t,n){return(0,u.c)(n,t)}function p(t,n){return(0,c.fA)(t[0],t[1],t[2],n)}function E(t){return t}function b(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function M(t){return t[3]}function v(t){return t}function R(t,n,e,r){return(0,c.fA)(t,n,e,r)}function I(t,n,e){if(null==n)return!1;if(!F(t,n,S))return!1;let{t0:r,t1:i}=S;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(e){const{origin:t,direction:i}=n;e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r}return!0}function N(t,n,e){const r=(0,h.Cr)(n,e);if(!F(t,r,S))return[];const{origin:i,direction:u}=r,{t0:c,t1:f}=S,d=n=>{const e=(0,s.vt)();return(0,o.b)(e,i,u,n),C(t,e,e)};return Math.abs(c-f)<(0,a.FD)()?[d(c)]:[d(c),d(f)]}const S={t0:0,t1:0};function F(t,n,e){const{origin:r,direction:i}=n,o=P;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===s)return!1;const u=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),c=u*u-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(c<0)return!1;const a=Math.sqrt(c);return e.t0=(-u-a)/(2*s),e.t1=(-u+a)/(2*s),!0}const P=(0,s.vt)();function B(t,n){return I(t,n,null)}function j(t,n,e){const r=_.rq.get(),s=_.Rc.get();(0,o.h)(r,n.origin,n.direction);const u=M(t);(0,o.h)(e,r,n.origin),(0,o.g)(e,e,1/(0,o.l)(e)*u);const c=q(t,n.origin),a=(0,l.g7)(n.origin,e);return(0,i.$0)(s,a+c,r),(0,o.t)(e,e,s),e}function x(t,n,e,r){const i=M(t),o=i*i,s=n+.5*Math.PI,u=e*e+o-2*Math.cos(s)*e*i,c=Math.sqrt(u),a=u-o;if(a<=0)return.5;const f=Math.sqrt(a),h=Math.acos(f/c)-Math.asin(i/(c/Math.sin(s)));return Math.min(1,(h+.5*r)/r)}function C(t,n,e){const r=(0,o.d)(_.rq.get(),n,t),i=(0,o.g)(_.rq.get(),r,t[3]/(0,o.l)(r));return(0,o.f)(e,i,t)}function q(t,n){const e=(0,o.d)(_.rq.get(),n,t),i=(0,o.l)(e),s=M(t),u=s+Math.abs(s-i);return(0,r.XM)(s/u)}const L=(0,s.vt)();function w(t,n,e,r){const i=(0,o.d)(L,n,t);switch(e){case f._.X:{const t=d(i,L)[2];return(0,o.i)(r,-Math.sin(t),Math.cos(t),0)}case f._.Y:{const t=d(i,L),n=t[1],e=t[2],s=Math.sin(n);return(0,o.i)(r,-s*Math.cos(e),-s*Math.sin(e),Math.cos(n))}case f._.Z:return(0,o.n)(r,i);default:return}}function z(t,n){const e=(0,o.d)(y,n,t);return(0,o.l)(e)-t[3]}function D(t,n){const e=(0,o.s)(t,n),r=M(t);return e<=r*r}const y=(0,s.vt)(),H=g(),G=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:T,altitudeAt:z,angleToSilhouette:q,axisAt:w,cameraFrustumCoverage:x,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return I(t,n,e)?e:((0,h.oC)(n,t,e),C(t,e,e))},closestPointOnSilhouette:j,containsPoint:D,copy:A,create:g,distanceToSilhouette:function(t,n){const e=(0,o.d)(_.rq.get(),n,t),r=(0,o.k)(e),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:O,exactEquals:m,fromCenterAndRadius:p,fromRadius:b,fromValues:R,getCenter:v,getExtent:function(t,n){return n},getRadius:M,intersectLine:N,intersectRay:I,intersectRayClosestSilhouette:function(t,n,e){if(I(t,n,e))return e;const r=j(t,n,_.rq.get());return(0,o.f)(e,n.origin,(0,o.g)(_.rq.get(),n.direction,(0,o.j)(n.origin,r)/(0,o.l)(n.direction))),e},intersectsRay:B,projectPoint:C,setAltitudeAt:function(t,n,e,r){const i=z(t,n),s=w(t,n,f._.Z,y),u=(0,o.g)(y,s,e-i);return(0,o.f)(r,n,u)},setExtent:function(t,n,e){return t!==e&&A(t,e),e},tmpSphere:H,union:function(t,n,e=(0,c.vt)()){const r=(0,o.j)(t,n),i=t[3],s=n[3];return r+s<i?((0,u.c)(e,t),e):r+i<s?((0,u.c)(e,n),e):((0,o.m)(e,t,n,(r+s-i)/(2*r)),e[3]=(r+i+s)/2,e)},wrap:E},Symbol.toStringTag,{value:"Module"}))},11631:function(t,n,e){e.d(n,{Rc:function(){return _},J8:function(){return T},oG:function(){return h},rq:function(){return d},Km:function(){return l}});e(6273);var r=e(71709),i=e(79441),o=e(26110),s=e(19165),u=e(56560),c=e(19913),a=e(76982);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(u.vt)}static createVec3f64(){return new f(c.vt)}static createVec4f64(){return new f(a.vt)}static createMat3f64(){return new f(i.vt)}static createMat4f64(){return new f(o.vt)}static createQuatf64(){return new f(s.vt)}get test(){}}const h=f.createVec2f64(),d=f.createVec3f64(),l=f.createVec4f64(),_=(f.createMat3f64(),f.createMat4f64()),T=f.createQuatf64()},19165:function(t,n,e){function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}e.d(n,{o8:function(){return i},vt:function(){return r},zK:function(){return o}});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,fromValues:function(t,n,e,r){return[t,n,e,r]}},Symbol.toStringTag,{value:"Module"}))},26110:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,n,e,r,i,o,s,u,c,a,f,h,d,l,_,T){return[t,n,e,r,i,o,s,u,c,a,f,h,d,l,_,T]}e.d(n,{fA:function(){return o},o8:function(){return i},vt:function(){return r},zK:function(){return s}});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:r,fromValues:o},Symbol.toStringTag,{value:"Module"}))},45773:function(t,n,e){e.d(n,{VV:function(){return u},hG:function(){return o},wp:function(){return s}});e(4506);var r=e(80347),i=e(19913);function o(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function s(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),i=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),o=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.i)(t,e,i,o),t}function u(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(n,0,1,0):(0,r.i)(n,1,0,0),(0,r.h)(e,t,n),(0,r.h)(n,e,t),(0,r.n)(e,e),(0,r.n)(n,n)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()},45876:function(t,n,e){e.d(n,{$e:function(){return u},Eo:function(){return c},j1:function(){return a},mO:function(){return f},vt:function(){return s}});var r=e(82444),i=e(80347),o=e(63918);function s(t){return t?{ray:(0,o.vt)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,o.vt)(),c0:0,c1:Number.MAX_VALUE}}function u(t,n=s()){return(0,o.C)(t,n.ray),n.c0=0,n.c1=Number.MAX_VALUE,n}function c(t,n,e=s()){const r=(0,i.l)(t.vector);return(0,o.fA)(t.origin,n,e.ray),e.c0=0,e.c1=r,e}function a(t,n){return h(t,t.c0,n)}function f(t,n){return h(t,t.c1,n)}function h(t,n,e){return(0,i.f)(e,t.ray.origin,(0,i.g)(e,t.ray.direction,n))}new r.I((()=>s()))},63918:function(t,n,e){e.d(n,{C:function(){return d},Cr:function(){return l},LV:function(){return h},Zb:function(){return m},fA:function(){return _},kb:function(){return T},oC:function(){return g},vt:function(){return a}});e(3223);var r=e(82444),i=e(82541),o=e(79441),s=e(80347),u=e(19913),c=e(11631);function a(t){return t?f((0,u.o8)(t.origin),(0,u.o8)(t.direction)):f((0,u.vt)(),(0,u.vt)())}function f(t,n){return{origin:t,direction:n}}function h(t,n){const e=O.get();return e.origin=t,e.direction=n,e}function d(t,n=a()){return _(t.origin,t.direction,n)}function l(t,n,e=a()){return(0,s.c)(e.origin,t),(0,s.d)(e.direction,n,t),e}function _(t,n,e=a()){return(0,s.c)(e.origin,t),(0,s.c)(e.direction,n),e}function T(t,n){const e=(0,s.h)(c.rq.get(),(0,s.n)(c.rq.get(),t.direction),(0,s.d)(c.rq.get(),n,t.origin));return(0,s.e)(e,e)}function g(t,n,e){const r=(0,s.e)(t.direction,(0,s.d)(e,n,t.origin));return(0,s.f)(e,t.origin,(0,s.g)(e,t.direction,r)),e}function m(t,n,e,r){const o=t.origin,u=n.origin,c=t.direction,a=n.direction,f=(0,s.e)((0,s.n)(p,c),(0,s.n)(E,a));if(Math.abs(f)>=1)return null;const h=(0,s.h)(p,c,a),d=(0,s.a)(A,u,o),l=(0,i.hZ)(b,c[0],c[1],c[2],-a[0],-a[1],-a[2],h[0],h[1],h[2]),_=(0,i.B8)(b,l);if(null==_)return[e,r];const T=(0,s.e)((0,s.i)(p,_[0],_[3],_[6]),d),g=(0,s.e)((0,s.i)(E,_[1],_[4],_[7]),d);return(0,s.f)(e,o,(0,s.g)(A,c,T)),(0,s.f)(r,u,(0,s.g)(A,a,g)),[e,r]}const O=new r.I((()=>a())),A=(0,u.vt)(),p=(0,u.vt)(),E=(0,u.vt)(),b=(0,o.vt)()},67277:function(t,n,e){e.d(n,{_:function(){return r}});class r{constructor(t,n,e,r,i,o=!1,s=0){this.name=t,this.count=n,this.type=e,this.offset=r,this.stride=i,this.normalized=o,this.divisor=s}}},72161:function(t,n,e){e.r(n),e.d(n,{default:function(){return _}});var r=e(82392),i=e(37623),o=(e(80861),e(6273),e(67498),e(62991),e(26325)),s=e(80347),u=e(19913),c=e(94669),a=e(3800),f=e(935),h=e(33651);function d(t,n,e){const r=(0,a.c)(),i=(0,a.a)(r);return(0,s.b)(i,i,t,.5),(0,s.b)(i,i,n,.5),r[3]=(0,s.j)(i,t),(0,s.f)(i,i,e),r}let l=class{constructor(){this._idToComponent=new Map,this._components=new f.A((t=>t.bounds)),this._edges=new f.A((t=>t.bounds)),this._tmpLineSegment=(0,c.vt)(),this._tmpP1=(0,u.vt)(),this._tmpP2=(0,u.vt)(),this._tmpP3=(0,u.vt)(),this.remoteClient=null}async fetchCandidates(t,n){await Promise.resolve(),(0,i.Te)(n),await this._ensureEdgeLocations(t,n);const e=[];return this._edges.forEachNeighbor((n=>(this._addCandidates(t,n,e),e.length<1e3)),t.bounds),{result:{candidates:e}}}async _ensureEdgeLocations(t,n){const e=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:n,uid:r}=t;e.push({id:n,uid:r})}return!0}),t.bounds),!e.length)return;const r={components:e},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,n??{});for(const t of i.components)this._setFetchEdgeLocations(t)}async add(t){const n=new g(t.id,t.bounds);return this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}}async remove(t){const n=this._idToComponent.get(t.id);if(n){const t=[];this._edges.forEachNeighbor((e=>(e.component===n&&t.push(e),!0)),n.bounds),this._edges.remove(t),this._components.remove([n]),this._idToComponent.delete(n.id)}return{result:{}}}_setFetchEdgeLocations(t){const n=this._idToComponent.get(t.id);if(null==n||t.uid!==n.uid)return;const e=h.HY.createView(t.locations),r=new Array(e.count),i=(0,u.vt)(),o=(0,u.vt)();for(let s=0;s<e.count;s++){e.position0.getVec(s,i),e.position1.getVec(s,o);const u=d(i,o,t.origin),c=new m(n,s,u);r[s]=c}this._edges.add(r);const{objectIds:s,origin:c}=t;n.info={locations:e,objectIds:s,origin:c}}_addCandidates(t,n,e){const{info:r}=n.component,{origin:i,objectIds:o}=r,u=r.locations,c=u.position0.getVec(n.index,this._tmpP1),a=u.position1.getVec(n.index,this._tmpP2);(0,s.f)(c,c,i),(0,s.f)(a,a,i);const f=o[u.componentIndex.get(n.index)];this._addEdgeCandidate(t,f,c,a,e),T(t,f,c,e),T(t,f,a,e)}_addEdgeCandidate(t,n,e,r,i){if(!t.returnEdge)return;const o=(0,a.a)(t.bounds),f=(0,c.Cr)(e,r,this._tmpLineSegment),h=(0,c._I)(f,o,this._tmpP3);(0,a.o)(t.bounds,h)&&i.push({type:"edge",objectId:n,target:(0,u.o8)(h),distance:(0,s.j)(o,h),start:(0,u.o8)(e),end:(0,u.o8)(r)})}};l=(0,r._)([(0,o.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],l);const _=l;function T(t,n,e,r){if(!t.returnVertex||!(0,a.o)(t.bounds,e))return;const i=(0,a.a)(t.bounds);r.push({type:"vertex",objectId:n,target:(0,u.o8)(e),distance:(0,s.j)(i,e)})}class g{constructor(t,n){this.id=t,this.bounds=n,this.info=null,this.uid=++g.uid}static{this.uid=0}}class m{constructor(t,n,e){this.component=t,this.index=n,this.bounds=e}}},74224:function(t,n,e){e.d(n,{C:function(){return g},FB:function(){return r},ig:function(){return A},m7:function(){return O},ui:function(){return m},vt:function(){return T}});var r,i,o,s=e(82444),u=e(25336),c=e(80347),a=e(19913),f=e(74772),h=e(76982),d=e(45876),l=e(87368),_=e(11631);function T(t){return t?[(0,l.vt)(t[0]),(0,l.vt)(t[1]),(0,l.vt)(t[2]),(0,l.vt)(t[3]),(0,l.vt)(t[4]),(0,l.vt)(t[5])]:[(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)(),(0,l.vt)()]}function g(t,n){for(let e=0;e<p;e++)(0,l.C)(t[e],n[e]);return t}function m(t,n,e,o=M){const s=(0,u.lw)(_.Rc.get(),n,t);(0,u.B8)(s,s);for(let t=0;t<E;++t){const n=(0,f.t)(_.Km.get(),b[t],s);(0,c.i)(o[t],n[0]/n[3],n[1]/n[3],n[2]/n[3])}!function(t,n){(0,l.Cr)(n[i.FAR_BOTTOM_LEFT],n[i.NEAR_BOTTOM_LEFT],n[i.NEAR_TOP_LEFT],t[r.LEFT]),(0,l.Cr)(n[i.NEAR_BOTTOM_RIGHT],n[i.FAR_BOTTOM_RIGHT],n[i.FAR_TOP_RIGHT],t[r.RIGHT]),(0,l.Cr)(n[i.FAR_BOTTOM_LEFT],n[i.FAR_BOTTOM_RIGHT],n[i.NEAR_BOTTOM_RIGHT],t[r.BOTTOM]),(0,l.Cr)(n[i.NEAR_TOP_LEFT],n[i.NEAR_TOP_RIGHT],n[i.FAR_TOP_RIGHT],t[r.TOP]),(0,l.Cr)(n[i.NEAR_BOTTOM_LEFT],n[i.NEAR_BOTTOM_RIGHT],n[i.NEAR_TOP_RIGHT],t[r.NEAR]),(0,l.Cr)(n[i.FAR_BOTTOM_RIGHT],n[i.FAR_BOTTOM_LEFT],n[i.FAR_TOP_LEFT],t[r.FAR])}(e,o)}function O(t,n){for(let e=0;e<p;e++){const r=t[e];if(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]>=n[3])return!1}return!0}function A(t,n){for(let e=0;e<p;e++){const r=t[e];if(!(0,l.b6)(r,n))return!1}return!0}(o=r||(r={}))[o.LEFT=0]="LEFT",o[o.RIGHT=1]="RIGHT",o[o.BOTTOM=2]="BOTTOM",o[o.TOP=3]="TOP",o[o.NEAR=4]="NEAR",o[o.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(i||(i={}));i.FAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_RIGHT,i.NEAR_BOTTOM_LEFT,i.FAR_BOTTOM_LEFT,i.NEAR_BOTTOM_LEFT,i.NEAR_BOTTOM_RIGHT,i.NEAR_TOP_RIGHT,i.NEAR_TOP_LEFT,i.FAR_BOTTOM_RIGHT,i.FAR_BOTTOM_LEFT,i.FAR_TOP_LEFT,i.FAR_TOP_RIGHT,i.NEAR_BOTTOM_RIGHT,i.FAR_BOTTOM_RIGHT,i.FAR_TOP_RIGHT,i.NEAR_TOP_RIGHT,i.FAR_BOTTOM_LEFT,i.NEAR_BOTTOM_LEFT,i.NEAR_TOP_LEFT,i.FAR_TOP_LEFT,i.FAR_TOP_LEFT,i.NEAR_TOP_LEFT,i.NEAR_TOP_RIGHT,i.FAR_TOP_RIGHT;const p=6,E=8,b=[(0,h.fA)(-1,-1,-1,1),(0,h.fA)(1,-1,-1,1),(0,h.fA)(1,1,-1,1),(0,h.fA)(-1,1,-1,1),(0,h.fA)(-1,-1,1,1),(0,h.fA)(1,-1,1,1),(0,h.fA)(1,1,1,1),(0,h.fA)(-1,1,1,1)],M=(new s.I(d.vt),[(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)()])},74695:function(t,n,e){e.d(n,{EJ:function(){return a},_I:function(){return s},g7:function(){return c},gr:function(){return u}});var r=e(4506),i=e(80347),o=e(19913);function s(t,n,e){const r=(0,i.e)(t,n)/(0,i.e)(t,t);return(0,i.g)(e,t,r)}function u(t,n){return(0,i.e)(t,n)/(0,i.l)(t)}function c(t,n){const e=(0,i.e)(t,n)/((0,i.l)(t)*(0,i.l)(n));return-(0,r.XM)(e)}function a(t,n,e){(0,i.n)(f,t),(0,i.n)(h,n);const o=(0,i.e)(f,h),s=(0,r.XM)(o),u=(0,i.h)(f,f,h);return(0,i.e)(u,e)<0?2*Math.PI-s:s}const f=(0,o.vt)(),h=(0,o.vt)()},82444:function(t,n,e){e.d(n,{I:function(){return i}});var r=e(71709);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},87368:function(t,n,e){e.d(n,{$Q:function(){return x},C:function(){return d},Cr:function(){return g},Io:function(){return w},LV:function(){return h},O_:function(){return T},Qj:function(){return l},T7:function(){return P},Tj:function(){return j},U5:function(){return S},Ui:function(){return F},Z1:function(){return L},_I:function(){return q},b6:function(){return C},ci:function(){return O},fA:function(){return _},gv:function(){return B},lU:function(){return m},mN:function(){return z},mP:function(){return R},mR:function(){return N},vt:function(){return f},ze:function(){return I}});var r=e(4506),i=e(80347),o=e(19913),s=e(74772),u=e(74695),c=e(11631),a=e(45773);function f(t=V){return[t[0],t[1],t[2],t[3]]}s.a,s.e;function h(t=V[0],n=V[1],e=V[2],r=V[3]){return _(t,n,e,r,c.Km.get())}function d(t,n){return _(n[0],n[1],n[2],n[3],t)}function l(t){return t}function _(t,n,e,r,i=f()){return i[0]=t,i[1]=n,i[2]=e,i[3]=r,i}function T(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function g(t,n,e,r=f()){const i=e[0]-n[0],o=e[1]-n[1],s=e[2]-n[2],u=t[0]-n[0],c=t[1]-n[1],a=t[2]-n[2],h=o*a-s*c,d=s*u-i*a,l=i*c-o*u,_=h*h+d*d+l*l,T=Math.abs(_-1)>1e-5&&_>1e-12?1/Math.sqrt(_):1;return r[0]=h*T,r[1]=d*T,r[2]=l*T,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function m(t,n,e,r=0,o=Math.floor(e*(1/3)),s=Math.floor(e*(2/3))){if(e<3)return!1;n(p,r);let u=o,c=!1;for(;u<e-1&&!c;)n(E,u),u++,c=!(0,i.q)(p,E);if(!c)return!1;for(u=Math.max(u,s),c=!1;u<e&&!c;)n(b,u),u++,(0,i.d)(M,p,E),(0,i.n)(M,M),(0,i.d)(v,E,b),(0,i.n)(v,v),c=!(0,i.q)(p,b)&&!(0,i.q)(E,b)&&Math.abs((0,i.e)(M,v))<A;return c?(g(p,E,b,t),!0):(0!==r||1!==o||2!==s)&&m(t,n,e,0,1,2)}function O(t,n,e=!0){const r=n.length/3;return m(t,((t,e)=>(0,i.i)(t,n[3*e+0],n[3*e+1],n[3*e+2])),e?r-1:r)}const A=.99619469809,p=(0,o.vt)(),E=(0,o.vt)(),b=(0,o.vt)(),M=(0,o.vt)(),v=(0,o.vt)();function R(t,n,e){return n!==t&&d(t,n),t[3]=-(0,i.e)(t,e),t}function I(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function N(t,n,e,r){return(0,i.h)(b,n,t),T(e,b,r)}function S(t,n,e,r){return H(G(t,n,(0,i.d)(c.rq.get(),e,n),U,r))}function F(t,n,e){return null!=n&&H(G(t,n.origin,n.direction,K,e))}function P(t,n,e){return H(G(t,n.origin,n.vector,k.NONE,e))}function B(t,n,e){return H(G(t,n.origin,n.vector,k.CLAMP,e))}function j(t,n){return z(t,n)>=0}function x(t,n){const e=(0,i.e)(t,n.ray.direction),r=-z(t,n.ray.origin);if(r<0&&e>=0)return!1;if(e>-1e-6&&e<1e-6)return r>0;if((r<0||e<0)&&!(r<0&&e<0))return!0;const o=r/e;return e>0?o<n.c1&&(n.c1=o):o>n.c0&&(n.c0=o),n.c0<=n.c1}function C(t,n){const e=(0,i.e)(t,n.ray.direction),r=-z(t,n.ray.origin);if(e>-1e-6&&e<1e-6)return r>0;const o=r/e;return e>0?o<n.c1&&(n.c1=o):o>n.c0&&(n.c0=o),n.c0<=n.c1}function q(t,n,e){const r=(0,i.g)(c.rq.get(),t,-t[3]),o=function(t,n,e){const r=(0,i.g)(c.rq.get(),t,(0,i.e)(t,n));return(0,i.d)(e,n,r),e}(t,(0,i.d)(c.rq.get(),n,r),c.rq.get());return(0,i.f)(e,o,r),e}function L(t,n,e,r){const o=t,s=c.rq.get(),f=c.rq.get();(0,a.VV)(o,s,f);const h=(0,i.d)(c.rq.get(),e,n),d=(0,u.gr)(s,h),l=(0,u.gr)(f,h),_=(0,u.gr)(o,h);return(0,i.i)(r,d,l,_)}function w(t,n){return Math.abs(z(t,n))}function z(t,n){return(0,i.e)(t,n)+t[3]}var D,y;function H(t){return t===D.INTERSECTS_INSIDE_OUT||t===D.INTERSECTS_OUTSIDE_IN}function G(t,n,e,o,s){const u=(0,i.e)(t,e),c=z(t,n);if(0===u)return c>=0?D.INSIDE:D.OUTSIDE;let a=-c/u;return o&k.CLAMP&&(a=(0,r.qE)(a,0,1)),!(o&k.INFINITE_MIN)&&a<0||!(o&k.INFINITE_MAX)&&a>1?c>=0?D.INSIDE:D.OUTSIDE:((0,i.f)(s,n,(0,i.g)(s,e,a)),c>=0?D.INTERSECTS_INSIDE_OUT:D.INTERSECTS_OUTSIDE_IN)}(y=D||(D={}))[y.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",y[y.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",y[y.INSIDE=2]="INSIDE",y[y.OUTSIDE=3]="OUTSIDE";const V=[0,0,1,0];var k;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(k||(k={}));const U=k.INFINITE_MIN|k.INFINITE_MAX,K=k.INFINITE_MAX},94669:function(t,n,e){e.d(n,{C:function(){return a},Cr:function(){return h},H6:function(){return T},_I:function(){return l},dz:function(){return g},fA:function(){return f},kb:function(){return d},ld:function(){return m},sd:function(){return _},vt:function(){return c}});var r=e(4506),i=e(82444),o=e(80347),s=e(19913),u=e(11631);function c(t){return t?{origin:(0,s.o8)(t.origin),vector:(0,s.o8)(t.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function a(t,n=c()){return f(t.origin,t.vector,n)}function f(t,n,e=c()){return(0,o.c)(e.origin,t),(0,o.c)(e.vector,n),e}function h(t,n,e=c()){return(0,o.c)(e.origin,t),(0,o.d)(e.vector,n,t),e}function d(t,n){const e=(0,o.d)(u.rq.get(),n,t.origin),i=(0,o.e)(t.vector,e),s=(0,o.e)(t.vector,t.vector),c=(0,r.qE)(i/s,0,1),a=(0,o.d)(u.rq.get(),(0,o.g)(u.rq.get(),t.vector,c),e);return(0,o.e)(a,a)}function l(t,n,e){return T(t,n,0,1,e)}function _(t,n,e){return(0,o.f)(e,t.origin,(0,o.g)(e,t.vector,n))}function T(t,n,e,i,s){const{vector:c,origin:a}=t,f=(0,o.d)(u.rq.get(),n,a),h=(0,o.e)(c,f)/(0,o.k)(c);return(0,o.g)(s,c,(0,r.qE)(h,e,i)),(0,o.f)(s,s,t.origin)}function g(t,n){if(O(t,function(t,n){const e=p.get();return e.origin=t,e.vector=n,e}(n.origin,n.direction),!1,A)){const{tA:n,pB:e,distance2:r}=A;if(n>=0&&n<=1)return r;if(n<0)return(0,o.s)(t.origin,e);if(n>1)return(0,o.s)((0,o.f)(u.rq.get(),t.origin,t.vector),e)}return null}function m(t,n,e){return!!O(t,n,!0,A)&&((0,o.c)(e,A.pA),!0)}function O(t,n,e,i){const s=1e-6,c=t.origin,a=(0,o.f)(u.rq.get(),c,t.vector),f=n.origin,h=(0,o.f)(u.rq.get(),f,n.vector),d=u.rq.get(),l=u.rq.get();if(d[0]=c[0]-f[0],d[1]=c[1]-f[1],d[2]=c[2]-f[2],l[0]=h[0]-f[0],l[1]=h[1]-f[1],l[2]=h[2]-f[2],Math.abs(l[0])<s&&Math.abs(l[1])<s&&Math.abs(l[2])<s)return!1;const _=u.rq.get();if(_[0]=a[0]-c[0],_[1]=a[1]-c[1],_[2]=a[2]-c[2],Math.abs(_[0])<s&&Math.abs(_[1])<s&&Math.abs(_[2])<s)return!1;const T=d[0]*l[0]+d[1]*l[1]+d[2]*l[2],g=l[0]*_[0]+l[1]*_[1]+l[2]*_[2],m=d[0]*_[0]+d[1]*_[1]+d[2]*_[2],O=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],A=(_[0]*_[0]+_[1]*_[1]+_[2]*_[2])*O-g*g;if(Math.abs(A)<s)return!1;let p=(T*g-m*O)/A,E=(T+g*p)/O;e&&(p=(0,r.qE)(p,0,1),E=(0,r.qE)(E,0,1));const b=u.rq.get(),M=u.rq.get();return b[0]=c[0]+p*_[0],b[1]=c[1]+p*_[1],b[2]=c[2]+p*_[2],M[0]=f[0]+E*l[0],M[1]=f[1]+E*l[1],M[2]=f[2]+E*l[2],i.tA=p,i.tB=E,i.pA=b,i.pB=M,i.distance2=(0,o.s)(b,M),!0}const A={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},p=new i.I((()=>c()))}}]);