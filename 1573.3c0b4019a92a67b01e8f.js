"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[1573,4274,4804],{29604:function(t,e,n){n.d(e,{GP:function(){return m},LI:function(){return c},lc:function(){return l},u5:function(){return a}});n(39553);var i=n(18632);const r=/^-?(\d+)(\.(\d+))?$/i;function o(t,e){return t-e}function u(t,e){let n,i;return n=Number(t.toFixed(e)),n<t?i=n+1/10**e:(i=n,n-=1/10**e),n=Number(n.toFixed(e)),i=Number(i.toFixed(e)),[n,i]}function s(t,e,n,i,r){const o=a(t,e,n,i),u=null==o.previous||o.previous<=r,s=null==o.next||o.next<=r;return u&&s||o.previous+o.next<=2*r}function l(t){const e=String(t),n=e.match(r);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(e.toLowerCase().includes("e")){const t=e.split("e"),n=t[0],i=t[1];if(n&&i){const t=Number(n);let e=Number(i);const r=e>0;r||(e=Math.abs(e));const o=l(t);return r?(o.integer+=e,e>o.fractional?o.fractional=0:o.fractional-=e):(o.fractional+=e,e>o.integer?o.integer=1:o.integer-=e),o}}return{integer:0,fractional:0}}function a(t,e,n,i){const r={previous:null,next:null};if(null!=n){const i=t-n,o=e-n-i;r.previous=Math.floor(Math.abs(100*o/i))}if(null!=i){const n=i-t,o=i-e-n;r.next=Math.floor(Math.abs(100*o/n))}return r}function c(t,e={}){const n=t.slice(),{tolerance:i=2,strictBounds:r=!1,indexes:a=n.map(((t,e)=>e))}=e;a.sort(o);for(let t=0;t<a.length;t++){const e=a[t],o=n[e],c=0===e?null:n[e-1],f=e===n.length-1?null:n[e+1],m=l(o).fractional;if(m){let l,a=0,p=!1;for(;a<=m&&!p;){const e=u(o,a);l=r&&0===t?e[1]:e[0],p=s(o,l,c,f,i),a++}p&&(n[e]=l)}}return n}const f={maximumFractionDigits:20};function m(t){return(0,i.ZV)(t,f)}},51573:function(t,e,n){n.d(e,{getRampStops:function(){return l}});var i=n(93814),r=n(3223),o=n(64804);const u=new i.A([64,64,64]);function s(t,e){const n=[],i=t.length-1;return 5===t.length?n.push(0,2,4):n.push(0,i),t.map(((t,r)=>n.includes(r)?(0,o.Dd)(t,r,i,e):null))}async function l(t,e,i){let o=!1,u=[],l=[];if(t.stops){const e=t.stops;u=e.map((t=>t.value)),o=e.some((t=>!!t.label)),o&&(l=e.map((t=>t.label)))}const c=u[0],f=u[u.length-1];if(null==c&&null==f)return null;const m=o?null:s(u,i);return(await Promise.all(u.map((async(i,r)=>{const u="opacity"===t.type?await a(i,t,e):(await Promise.resolve().then(n.bind(n,37525))).getColor(t,i),s=o?l[r]:m?.[r]??"";return null==u?null:{value:i,color:u,label:s}})))).filter(r.Ru).reverse()}async function a(t,e,r){const o=new i.A(r??u),s=(await Promise.resolve().then(n.bind(n,37525))).getOpacity(e,t);return null!=s&&(o.a=s),o}},64804:function(t,e,n){n.d(e,{Dd:function(){return c},Zo:function(){return f},getDateFormatOptions:function(){return m},iz:function(){return p}});var i=n(11895),r=n(46227),o=n(29604),u=n(74274),s=n(24826);const l="<",a=">";function c(t,e,n,i){let r="";return 0===e?r=`${l} `:e===n&&(r=`${a} `),r+(i?(0,u.i0)(t,i):(0,o.GP)(t))}async function f(t,e){const i=t.trailCap,r=t.trailWidth||1,o=e||await async function(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((t=>"color"===t.type));if(!e)return null;let i=null,r=null;if(e.stops){if(1===e.stops.length)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const o=null!=i&&null!=r?i+(r-i)/2:0,{getColor:u}=await Promise.resolve().then(n.bind(n,37525));return u(e,o)??null}(t)||t.color;return new s.A({cap:i,color:o,width:r})}function m(t,e,n){const o=function(t,e){if(!e.field)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find((({name:t})=>t.toLowerCase()===e.field.toLowerCase()));return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?t.getField?.(e.field):null}(t,e);if(!o||!(0,u.fs)(o)&&!(0,r.OH)(o))return null;let s=function(t,e){const n="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(n?.length&&e)return n.find((t=>t.fieldName?.toLowerCase()===e.toLowerCase()))?.format?.dateFormat}(t,o.name);if(!s&&"date"===o.type){let t=0,n=0;e.stops?(t=e.stops?.at(0)?.value??t,n=e.stops?.at(-1)?.value??n):"minDataValue"in e&&"maxDataValue"in e&&(t=e.minDataValue??t,n=e.maxDataValue??n),s=n-t>2*i.vf.days?"short-date":"short-date-short-time"}return{fieldType:o.type,format:s,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function p(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find((({theme:t})=>t===e))}},74274:function(t,e,n){n.d(e,{EG:function(){return p},Ll:function(){return w},R3:function(){return v},UH:function(){return l},aM:function(){return h},fs:function(){return m},i0:function(){return b}});var i=n(50189),r=n(46227),o=(n(6183),n(68717)),u=n(82506),s=n(23375);const l=",",a={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},c=new Set(["integer","small-integer"]);let f=null;function m(t){return(0,r.vE)(t)||(0,r.zD)(t)||(0,r.Ah)(t)}async function p(t){const{field:e,field2:n,field3:i,normalizationField:r,valueExpression:u}=t;let s=[];if(u){if(!f){const{arcadeUtils:t}=await(0,o.l)();f=t}s=f.extractFieldNames(u)}return e&&s.push(e),n&&s.push(n),i&&s.push(i),r&&s.push(r),s}function d(t){return String(t).padStart(2,"0")}function g(t,e,n){let i;return"date"===e||"number"===e?("number"===e&&(t=new Date(t)),i=`TIMESTAMP'${n?t.getFullYear():t.getUTCFullYear()}-${d((n?t.getMonth():t.getUTCMonth())+1)}-${d(n?t.getDate():t.getUTCDate())} ${d(n?t.getHours():t.getUTCHours())}:${d(n?t.getMinutes():t.getUTCMinutes())}:${d(n?t.getSeconds():t.getUTCSeconds())}'`):i=t,i}function h(t,e,n,i){const{hasQueryEngine:r}=t,o=`(${g(n,y(t,n),r)} - ${g(e,y(t,e),r)})`;let u=a[i],s="/";return u<1&&(u=1/u,s="*"),{sqlExpression:1===u?o:`(${o} ${s} ${u})`,sqlWhere:null}}function y(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const n=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,r.vE)(n))return"field"}}function v(t,e){const n=e&&t.getField(e);return!!n&&c.has(n.type)}function w(t){return`cast(${t} as float)`}function b(t,e){const{format:n,timeZoneOptions:r,fieldType:o}=e??{};let l,a;if(r&&({timeZone:l,timeZoneName:a}=(0,s.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof t&&isNaN(Date.parse("time-only"===o?`1970-01-01T${t}Z`:t)))return t;switch(o){case"date-only":{const e=(0,i.J2)(n||"short-date");return"string"==typeof t?(0,i.iS)(t,{...e}):(0,i.Yq)(t,{...e,timeZone:u.n$})}case"time-only":{const e=(0,i.J2)(n||"short-time");return"string"==typeof t?(0,i.F8)(t,e):(0,i.Yq)(t,{...e,timeZone:u.n$})}case"timestamp-offset":{if(!l&&"string"==typeof t&&new Date(t).toISOString()!==t)return t;const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,o=e?{...e,timeZone:l,timeZoneName:a}:void 0;return"string"==typeof t?(0,i.Ey)(t,o):(0,i.Yq)(t,o)}default:{const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof t?new Date(t):t,e?{...e,timeZone:l,timeZoneName:a}:void 0)}}}}}]);