"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[2662,5393],{12662:function(t,e,n){n.d(e,{CU:function(){return b},F0:function(){return F},TG:function(){return y},ZI:function(){return h},jR:function(){return f},mP:function(){return g},pX:function(){return w}});var r=n(20857),a=n(62991),o=n(80861),s=n(5262),i=n(19759),u=n(34008),l=n(56053),d=n(77873),c=n(67488),p=n(35393);async function f(t,e,n){const{geometry:r}=e,a={...e.attributes};if(null!=n&&"mesh"===r?.type){const{transformFieldRoles:e}=n,{origin:o,spatialReference:i,vertexSpace:l}=r,p=r.transform??new d.A,f="local"===l.type,h=t.spatialReference,m=h.isGeographic,y=(0,c.aI)(h,i),g=(0,u.isEqualBaseGCS)(i,h)&&(0,u.canProjectWithoutEngine)(i,h);if(!(f&&m&&g||!f&&!m&&y))return null;const b=(0,u.projectWithoutEngine)(o,i,h);if(null==b)return null;if(a[e.originX]=b.x,a[e.originY]=b.y,a[e.originZ]=b.z??0,null!=p){const{translation:t,scale:n,rotation:r}=p,o=f?1:(0,s.KX)(i)/(0,s.KX)(h);a[e.translationX]=t[0]*o,a[e.translationY]=t[2]*o,a[e.translationZ]=-t[1]*o,a[e.scaleX]=n[0],a[e.scaleY]=n[2],a[e.scaleZ]=n[1],a[e.rotationX]=r[0],a[e.rotationY]=r[2],a[e.rotationZ]=-r[1],a[e.rotationDeg]=r[3]}return{attributes:a}}return null==r?{attributes:a}:"mesh"===r.type||"extent"===r.type?null:{geometry:r.toJSON(),attributes:a}}async function h(t,e){const n=await Promise.all((e.addAttachments??[]).map((e=>m(t,e)))),r=await Promise.all((e.updateAttachments??[]).map((e=>m(t,e)))),a=e.deleteAttachments??[];return n.length||r.length||a.length?{adds:n,updates:r,deletes:[...a]}:null}async function m(t,e){const{feature:n,attachment:r}=e,{globalId:a,name:o,contentType:s,data:u,uploadId:l}=r,d={globalId:a};if(n&&("attributes"in n?d.parentGlobalId=n.attributes?.[t.globalIdField]:n.globalId&&(d.parentGlobalId=n.globalId)),l)d.uploadId=l;else if(u){const t=await(0,i._0)(u);t&&(d.contentType=t.mediaType,d.data=t.data),u instanceof File&&(d.name=u.name)}return o&&(d.name=o),s&&(d.contentType=s),d}function y(t,e,n){if(!e||0===e.length)return[];if(n&&(0,p.zp)(e))return e.map((t=>t.globalId));if((0,p.r3)(e))return e.map((t=>t.objectId));const r=n?t.globalIdField:t.objectIdField;return r?e.map((t=>t.getAttribute(r))):[]}function g(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||o.A.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||o.A.getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const n=t?.attachments,r={addFeatureResults:t?.addResults?.map(b)??[],updateFeatureResults:t?.updateResults?.map(b)??[],deleteFeatureResults:t?.deleteResults?.map(b)??[],addAttachmentResults:n?.addResults?n.addResults.map(b):[],updateAttachmentResults:n?.updateResults?n.updateResults.map(b):[],deleteAttachmentResults:n?.deleteResults?n.deleteResults.map(b):[]};return t?.editMoment&&(r.editMoment=t.editMoment),r}function b(t){const e=!0===t.success?null:t.error||{code:void 0,description:"Feature edit failed"};return{objectId:t.objectId,globalId:t.globalId,error:e?new a.A("feature-layer-source:edit-failure",e.description,{code:e.code}):null}}function A(t,e){return new r.A({attributes:t.attributes,geometry:(0,l.rS)({...t.geometry,spatialReference:e})})}function w(t,e){return{adds:t?.adds?.map((t=>A(t,e)))||[],updates:t?.updates?.map((t=>({original:A(t[0],e),current:A(t[1],e)})))||[],deletes:t?.deletes?.map((t=>A(t,e)))||[],spatialReference:e}}function F(t){const e=t.details.raw,n=+e.code,r=+e.extendedCode;return 500===n&&(-2147217144===r||-2147467261===r)}},19165:function(t,e,n){function r(){return[0,0,0,1]}function a(t){return[t[0],t[1],t[2],t[3]]}n.d(e,{o8:function(){return a},vt:function(){return r},zK:function(){return o}});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:a,create:r,fromValues:function(t,e,n,r){return[t,e,n,r]}},Symbol.toStringTag,{value:"Module"}))},26110:function(t,e,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function a(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,e,n,r,a,o,s,i,u,l,d,c,p,f,h,m){return[t,e,n,r,a,o,s,i,u,l,d,c,p,f,h,m]}n.d(e,{fA:function(){return o},o8:function(){return a},vt:function(){return r},zK:function(){return s}});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:a,create:r,fromValues:o},Symbol.toStringTag,{value:"Module"}))},31753:function(t,e,n){n.d(e,{A6:function(){return y},B8:function(){return f},Xd:function(){return d},Xr:function(){return h},Yc:function(){return j},hZ:function(){return b},lw:function(){return c},t2:function(){return x},x8:function(){return l}});var r=n(79441),a=n(19165),o=n(19913),s=n(78115),i=n(80347),u=n(74772);function l(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function d(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>(0,s.FD)()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function c(t,e,n){const r=e[0],a=e[1],o=e[2],s=e[3],i=n[0],u=n[1],l=n[2],d=n[3];return t[0]=r*d+s*i+a*l-o*u,t[1]=a*d+s*u+o*i-r*l,t[2]=o*d+s*l+r*u-a*i,t[3]=s*d-r*i-a*u-o*l,t}function p(t,e,n,r){const a=e[0],o=e[1],i=e[2],u=e[3];let l,d,c,p,f,h=n[0],m=n[1],y=n[2],g=n[3];return d=a*h+o*m+i*y+u*g,d<0&&(d=-d,h=-h,m=-m,y=-y,g=-g),1-d>(0,s.FD)()?(l=Math.acos(d),c=Math.sin(l),p=Math.sin((1-r)*l)/c,f=Math.sin(r*l)/c):(p=1-r,f=r),t[0]=p*a+f*h,t[1]=p*o+f*m,t[2]=p*i+f*y,t[3]=p*u+f*g,t}function f(t,e){const n=e[0],r=e[1],a=e[2],o=e[3],s=n*n+r*r+a*a+o*o,i=s?1/s:0;return t[0]=-n*i,t[1]=-r*i,t[2]=-a*i,t[3]=o*i,t}function h(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){const n=e[0]+e[4]+e[8];let r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const a=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*a+a]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[a]=(e[3*a+n]+e[3*n+a])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}function y(t,e,n,r){const a=.5*Math.PI/180;e*=a,n*=a,r*=a;const o=Math.sin(e),s=Math.cos(e),i=Math.sin(n),u=Math.cos(n),l=Math.sin(r),d=Math.cos(r);return t[0]=o*u*d-s*i*l,t[1]=s*i*d+o*u*l,t[2]=s*u*l-o*i*d,t[3]=s*u*d+o*i*l,t}const g=u.c,b=u.s,A=u.g,w=c,F=u.d,I=u.h,v=u.l,M=u.j,R=M,$=u.b,E=$,S=u.n,x=u.a,O=u.e;function j(t,e,n){const r=(0,i.e)(e,n);return r<-.999999?((0,i.h)(T,_,e),(0,i.H)(T)<1e-6&&(0,i.h)(T,k,e),(0,i.n)(T,T),l(t,T,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,i.h)(T,e,n),t[0]=T[0],t[1]=T[1],t[2]=T[2],t[3]=1+r,S(t,t))}const T=(0,o.vt)(),_=(0,o.fA)(1,0,0),k=(0,o.fA)(0,1,0);const L=(0,a.vt)(),U=(0,a.vt)();const Z=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:A,calculateW:function(t,e){const n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},conjugate:h,copy:g,dot:I,equals:O,exactEquals:x,fromEuler:y,fromMat3:m,getAxisAngle:d,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:f,len:R,length:M,lerp:v,mul:w,multiply:c,normalize:S,random:function(t){const e=s.Ov,n=e(),r=e(),a=e(),o=Math.sqrt(1-n),i=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=i*Math.sin(2*Math.PI*a),t[3]=i*Math.cos(2*Math.PI*a),t},rotateX:function(t,e,n){n*=.5;const r=e[0],a=e[1],o=e[2],s=e[3],i=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*i,t[1]=a*u+o*i,t[2]=o*u-a*i,t[3]=s*u-r*i,t},rotateY:function(t,e,n){n*=.5;const r=e[0],a=e[1],o=e[2],s=e[3],i=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*i,t[1]=a*u+s*i,t[2]=o*u+r*i,t[3]=s*u-a*i,t},rotateZ:function(t,e,n){n*=.5;const r=e[0],a=e[1],o=e[2],s=e[3],i=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*i,t[1]=a*u-r*i,t[2]=o*u+s*i,t[3]=s*u-o*i,t},rotationTo:j,scale:F,set:b,setAxes:function(t,e,n,r){const a=Z;return a[0]=n[0],a[3]=n[1],a[6]=n[2],a[1]=r[0],a[4]=r[1],a[7]=r[2],a[2]=-e[0],a[5]=-e[1],a[8]=-e[2],S(t,m(t,a))},setAxisAngle:l,slerp:p,sqlerp:function(t,e,n,r,a,o){return p(L,e,a,o),p(U,n,r,o),p(t,L,U,2*o*(1-o)),t},sqrLen:E,squaredLength:$,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},35393:function(t,e,n){n.d(e,{applyEdits:function(){return I},r3:function(){return A},uploadAssets:function(){return x},zp:function(){return F}});var r=n(20857),a=n(58842),o=n(62991),s=n(15565),i=n(80861),u=n(37623),l=n(19759),d=n(1874),c=n(87249),p=n(67488),f=n(88940),h=n(46227),m=n(52360),y=n(65452);function g(t){return null!=t?.applyEdits}function b(t){return"object"==typeof t&&null!=t&&"objectId"in t&&!!t.objectId}function A(t){return t.every(b)}function w(t){return"object"==typeof t&&null!=t&&"globalId"in t&&!!t.globalId}function F(t){return t.every(w)}async function I(t,e,n,r={}){let l;const c="gdbVersion"in t?t.gdbVersion:null,p=r.gdbVersion??c;if((0,f.Mk)(t)&&t.url)l=(0,f.Zk)(t.url,t.layerId,p,"original-and-current-features"===r.returnServiceEditsOption);else{l=(0,u.Tw)(),l.promise.then((e=>{(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length)&&t.emit("edits",e)}));const e={result:l.promise};t.emit("apply-edits",e)}try{const{results:u,edits:c}=await async function(t,e,n,r){if(await t.load(),!g(e))throw new o.A(`${t.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:t});if(!(0,y.tk)(t))throw new o.A(`${t.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:t});const{edits:s,options:u}=await async function(t,e,n){const r=(0,y.BR)(t),s=e&&(e.addFeatures||e.updateFeatures||e.deleteFeatures),u=e&&(e.addAttachments||e.updateAttachments||e.deleteAttachments),l=null!=t.infoFor3D;if(function(t,e,n,r,a,s){if(!(t&&(r||a)||n?.usingTelecomOperations))throw new o.A(`${s}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!e.editing.supportsGlobalId&&n?.globalIdUsed&&!n.usingFeatureServiceEndpoint)throw new o.A(`${s}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!e.editing.supportsGlobalId&&a)throw new o.A(`${s}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!n?.globalIdUsed&&a)throw new o.A(`${s}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}(e,r,n,!!s,!!u,`${t.type}-layer`),!r.data.isVersioned&&n?.gdbVersion)throw new o.A(`${t.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!r.editing.supportsRollbackOnFailure&&n?.rollbackOnFailureEnabled)throw new o.A(`${t.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const c={...n};if(null!=c.rollbackOnFailureEnabled||r.editing.supportsRollbackOnFailure||(c.rollbackOnFailureEnabled=!0),c.rollbackOnFailureEnabled||"original-and-current-features"!==c.returnServiceEditsOption||(!1===c.rollbackOnFailureEnabled&&i.A.getLogger("esri.layers.graphics.editingSupport").warn(`${t.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),c.rollbackOnFailureEnabled=!0),!r.editing.supportsReturnServiceEditsInSourceSpatialReference&&c.returnServiceEditsInSourceSR)throw new o.A(`${t.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(c.returnServiceEditsInSourceSR&&"original-and-current-features"!==c.returnServiceEditsOption)throw new o.A(`${t.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const p=function(t,e,n){const r=function(t){return{addFeatures:Array.from(t?.addFeatures??[]),updateFeatures:Array.from(t?.updateFeatures??[]),deleteFeatures:t&&a.A.isCollection(t.deleteFeatures)?t.deleteFeatures.toArray():t.deleteFeatures||[],addAttachments:t.addAttachments||[],updateAttachments:t.updateAttachments||[],deleteAttachments:t.deleteAttachments||[]}}(t);if(r.addFeatures?.length&&!e.operations.supportsAdd)throw new o.A(`${n}:unsupported-operation`,"Layer does not support adding features.");if(r.updateFeatures?.length&&!e.operations.supportsUpdate)throw new o.A(`${n}:unsupported-operation`,"Layer does not support updating features.");if(r.deleteFeatures?.length&&!e.operations.supportsDelete)throw new o.A(`${n}:unsupported-operation`,"Layer does not support deleting features.");return r.addFeatures=r.addFeatures.map(E),r.updateFeatures=r.updateFeatures.map(E),r.addAssetFeatures=[],r}(e,r,`${t.type}-layer`),f=n?.globalIdUsed||l,h=t.fields.filter((t=>"big-integer"===t.type||"oid"===t.type&&(t.length||0)>=8));if(f){const{globalIdField:e}=t;if(null==e)throw new o.A(`${t.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");p.addFeatures.forEach((t=>function(t,e){const{attributes:n}=t;null==n[e]&&(n[e]=(0,d.yS)())}(t,e)))}return p.addFeatures.forEach((e=>function(t,e,n,r){v(t,e,n,r),M(t,e)}(e,t,f,h))),p.updateFeatures.forEach((e=>function(t,e,n,r){v(t,e,n,r),M(t,e);const a=(0,y.BR)(e);if("geometry"in t&&null!=t.geometry&&!a?.editing.supportsGeometryUpdate)throw new o.A(`${e.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}(e,t,f,h))),p.deleteFeatures.forEach((e=>function(t,e,n,r){v(t,e,n,r)}(e,t,f,h))),p.addAttachments.forEach((e=>R(e,t))),p.updateAttachments.forEach((e=>R(e,t))),l&&await async function(t,e){const{infoFor3D:n}=e;if(null==n)return;if(!(0,m.JQ)(n))throw new o.A(`${e.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");t.addAssetFeatures??=[];const{addAssetFeatures:r}=t;for(const e of t.addFeatures??[])S(e)&&r.push(e);for(const e of t.updateFeatures??[])S(e)&&r.push(e)}(p,t),{edits:await $(p),options:c}}(t,n,r);return s.addFeatures?.length||s.updateFeatures?.length||s.deleteFeatures?.length||s.addAttachments?.length||s.updateAttachments?.length||s.deleteAttachments?.length?{edits:s,results:await e.applyEdits(s,u)}:{edits:s,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}(t,e,n,r),p=t=>t.filter((t=>!t.error)).map(s.o8),f={edits:c,addedFeatures:p(u.addFeatureResults),updatedFeatures:p(u.updateFeatureResults),deletedFeatures:p(u.deleteFeatureResults),addedAttachments:p(u.addAttachmentResults),updatedAttachments:p(u.updateAttachmentResults),deletedAttachments:p(u.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:u.editMoment?new Date(u.editMoment):null,globalIdToObjectId:r.globalIdToObjectId};return u.editedFeatureResults?.length&&(f.editedFeatures=u.editedFeatureResults),l.resolve(f),u}catch(t){throw l.reject(t),t}}function v(t,e,n,r){if(n){if("attributes"in t&&!t.attributes[e.globalIdField])throw new o.A(`${e.type}-layer:invalid-parameter`,`Feature should have '${e.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in t)&&!t.globalId)throw new o.A(`${e.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(r.length&&"attributes"in t)for(const n of r){const r=t.attributes[n.name];if(void 0!==r&&!(0,h.OG)(n,r))throw new o.A(`${e.type}-layer:invalid-parameter`,`Big-integer field '${n.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:t})}if("geometry"in t&&null!=t.geometry){if(t.geometry.hasZ&&!1===e.capabilities?.data.supportsZ)throw new o.A(`${e.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(t.geometry.hasM&&!1===e.capabilities?.data.supportsM)throw new o.A(`${e.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function M(t,e){if("geometry"in t&&"mesh"===t.geometry?.type&&null!=e.infoFor3D&&null!=e.spatialReference){const{geometry:n}=t,{spatialReference:r,vertexSpace:a}=n,s=e.spatialReference,i="local"===a.type,u=(0,p.EA)(s),l=(0,p.aI)(s,r),d=l||(0,p.oT)(s)&&((0,p.oT)(r)||(0,p.K8)(r));if(!(i&&u&&d||!i&&!u&&l))throw new o.A(`${e.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${a.type} vertex space and a spatial reference wkid:${r.wkid} to a layer with a spatial reference wkid:${s.wkid} is not supported.`)}}function R(t,e){const{feature:n,attachment:r}=t;if(!n||"attributes"in n&&!n.attributes[e.globalIdField])throw new o.A(`${e.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in n)&&!n.globalId)throw new o.A(`${e.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new o.A(`${e.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new o.A(`${e.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name||r.name))throw new o.A(`${e.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!e.capabilities?.editing.supportsUploadWithItemId&&r.uploadId)throw new o.A(`${e.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){const t=(0,l.r$)(r.data);if(t&&!t.isBase64)throw new o.A(`${e.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}async function $(t){const e=t.addFeatures??[],n=t.updateFeatures??[],r=e.concat(n).map((t=>t.geometry)),a=await(0,c.el)(r),o=e.length,s=n.length;return a.slice(0,o).forEach(((t,n)=>e[n].geometry=t)),a.slice(o,o+s).forEach(((t,e)=>n[e].geometry=t)),t}function E(t){const e=new r.A;return t.attributes||(t.attributes={}),e.geometry=t.geometry,e.attributes=t.attributes,e}function S(t){return"mesh"===t?.geometry?.type}function x(t,e,n,r){if(!g(e))throw new o.A(`${t.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:t});if(!e.uploadAssets)throw new o.A(`${t.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:t});return e.uploadAssets(n,r)}},43785:function(t,e,n){n.d(e,{$I:function(){return g},AU:function(){return h},Cr:function(){return c},g7:function(){return y},i4:function(){return d},ui:function(){return p},up:function(){return A},vt:function(){return l},yo:function(){return m}});var r=n(4506),a=n(25336),o=n(31753),s=n(19165),i=n(80347),u=n(19913);function l(t=A){return[t[0],t[1],t[2],t[3]]}function d(t,e,n=l()){return(0,i.c)(n,t),n[3]=e,n}function c(t,e,n){return(0,i.h)(n,t,e),(0,i.n)(n,n),n[3]=-(0,i.p)(t,e),n}function p(t,e=l()){const n=(0,a.l)(w,t);return b(e,(0,r.KJ)((0,o.Xd)(e,n))),e}function f(t,e,n=l()){return(0,o.x8)(w,t,g(t)),(0,o.x8)(F,e,g(e)),(0,o.lw)(w,F,w),b(n,(0,r.KJ)((0,o.Xd)(n,w)))}function h(t,e,n,r=l()){return d(u.Cw,t,I),d(u.JP,e,v),d(u.Cb,n,M),f(I,v,I),f(I,M,r),r}function m(t){return t}function y(t){return t[3]}function g(t){return(0,r.kU)(t[3])}function b(t,e){return t[3]=e,t}const A=[0,0,1,0],w=(0,s.vt)(),F=(0,s.vt)(),I=(l(),l()),v=l(),M=l()},77873:function(t,e,n){n.d(e,{A:function(){return h}});var r,a=n(82392),o=n(84977),s=n(81482),i=(n(6273),n(80861),n(67498),n(26325)),u=n(25336),l=n(26110),d=n(31753),c=n(19165),p=n(19913),f=n(43785);let h=class extends o.A{static{r=this}constructor(t){super(t),this.translation=(0,p.vt)(),this.rotationAxis=(0,p.ci)(f.up),this.rotationAngle=0,this.scale=(0,p.fA)(1,1,1)}get rotation(){return(0,f.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,p.o8)((0,f.yo)(t)),this.rotationAngle=(0,f.g7)(t)}get localMatrix(){const t=(0,l.vt)();return(0,d.x8)(m,(0,f.yo)(this.rotation),(0,f.$I)(this.rotation)),(0,u.o1)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,u.B8)((0,l.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,u.t2)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,p.o8)(this.translation),rotationAxis:(0,p.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,p.o8)(this.scale)};return new r(t)}};(0,a._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,a._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotationAxis",void 0),(0,a._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],h.prototype,"rotationAngle",void 0),(0,a._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,a._)([(0,s.MZ)()],h.prototype,"rotation",null),(0,a._)([(0,s.MZ)()],h.prototype,"localMatrix",null),(0,a._)([(0,s.MZ)()],h.prototype,"localMatrixInverse",null),h=r=(0,a._)([(0,i.$)("esri.geometry.support.MeshTransform")],h);const m=(0,c.vt)()}}]);