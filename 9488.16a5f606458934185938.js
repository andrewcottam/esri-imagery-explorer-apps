"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[9488],{5467:function(t,e,i){i.d(e,{Y:function(){return c},v:function(){return a}});var n=i(6538),r=i(58082),s=i(51917),o=i(68716);const a={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:o.pe.SHORT,count:2,packPrecisionFactor:n.fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,s.My)(t,e)}},attributes:{id:{type:o.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.pe.UNSIGNED_BYTE,count:1},pos:{type:o.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:o.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,s.Jb)(t)}}};class c extends r.N{constructor(){super(...arguments),this.vertexSpec=a}createTesselationParams(t){return null}}},7847:function(t,e,i){i.d(e,{Qv:function(){return r}});var n=i(46205);function r(t){return t instanceof s?t:"object"==typeof t&&"type"in t?l[t.type].hydrate(t):new o(t)}class s{constructor(t){this.inputs=t}encode(){const t=[];for(const e of this.inputs)t.push(...e.encode());return t.push(...this.instructions),t}}class o extends s{constructor(t){super([]),this.value=t}simplify(){return this}get instructions(){if(Array.isArray(this.value)){const[t,e,i,r]=this.value;return null!=r?n.GA.vector4.encode([t,e||0,i||0,r]):n.GA.vector3.encode([t,e||0,i||0])}return n.GA.scalar.encode(this.value)}}class a extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new a(t,r(t.parent))}simplify(){if(this._config.relativeTranslation||this._config.absoluteScale)return this;const t=this._parent.simplify();if(!(t instanceof o))return this;const[e,i,n,r]=t.value,s=this._config.translation.from[0],c=this._config.translation.from[1],u=this._config.rotation.from,l=this._config.scale.from;if(s===this._config.translation.to[0]&&c===this._config.translation.to[1]&&u===this._config.rotation.to&&l===this._config.scale.to){const t=n+u,a=r*l,h=Math.sin(n),p=Math.cos(n);return new o([p*r*s-h*r*c+e,h*r*s+p*r*c+i,t,a])}return new a(this._config,t)}get instructions(){return n.GA.animatedTransform.encode(this._config)}}class c extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new c(t,r(t.parent))}simplify(){const t=this._parent.simplify();if(!(t instanceof o))return this;const[e,i,n,r]=t.value,s=this._config.color.from[0],a=this._config.color.from[1],u=this._config.color.from[2];let l=this._config.color.from[3];const h=this._config.opacity.from;return s===this._config.color.to[0]&&a===this._config.color.to[1]&&u===this._config.color.to[2]&&l===this._config.color.to[3]&&h===this._config.opacity.to?(l*=h,new o([e*s,i*a,n*u,r*l])):new c(this._config,t)}get instructions(){return n.GA.animatedColor.encode(this._config)}}class u extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new u(t,r(t.parent))}simplify(){const t=this._parent.simplify();return t instanceof o?new u(this._config,t):this}get instructions(){return n.GA.animatedShift.encode(this._config)}}const l={AnimatedTransform:a,AnimatedColor:c,AnimatedShift:u}},12962:function(t,e,i){i.d(e,{S:function(){return v}});var n=i(85953),r=i(6538),s=i(58082),o=i(5467),a=i(77300),c=i(80861),u=i(4506),l=i(23572);class h{constructor(t,e){this._size=t,this._sizeUnits=e,this._relativeSize=null}get relativeSize(){return this._relativeSize??=this.calculateRelativeSize(),this._relativeSize}calculateRelativeSize(){if(this._sizeUnits===n.OW.Relative){const t=Math.min(this._size/100,1);return[t,t]}return this.calculateRelativeSizeFromAbsolute()}}class p extends h{constructor(t,e,i,n){super(e,i),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(n),this.rotationMatrix01=-Math.sin(n),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:r,rotationMatrix00:s,rotationMatrix01:o,rotationMatrix10:a,rotationMatrix11:c}=this;t.forEachVertex(((t,e)=>{const i=t*s+e*o,n=t*a+e*c;r.xmin=Math.min(r.xmin,i),r.ymin=Math.min(r.ymin,n),r.xmax=Math.max(r.xmax,i),r.ymax=Math.max(r.ymax,n)})),this.center=[(r.xmin+r.xmax)/2,(r.ymin+r.ymax)/2]}}class f extends p{constructor(t,e,i,n){super(t,e,i,n),this.method="linear"}getRelativePosition(t,e){const{rotationMatrix00:i,rotationMatrix01:n,bounds:r}=this,{xmin:s,xmax:o}=r;return[(t*i+e*n-s)/(o-s),0]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,xmax:n}=e;return[(0,l.Lz)(t)/(n-i),0]}}class d extends p{constructor(t,e,i,n){super(t,e,i,n),this.method="rectangular"}getRelativePosition(t,e){const{bounds:i,center:n,rotationMatrix00:r,rotationMatrix01:s,rotationMatrix10:o,rotationMatrix11:a}=this,c=t*o+e*a,u=t*r+e*s-n[0],l=c-n[1];return[u*(2/(i.xmax-i.xmin)),-l*(2/(i.ymax-i.ymin))]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,ymin:n,xmax:r,ymax:s}=e;return[(0,l.Lz)(2*t)/(r-i),(0,l.Lz)(2*t)/(s-n)]}}class x extends p{constructor(t,e,i){super(t,e,i,0),this.method="circular";const{xmin:n,xmax:r,ymin:s,ymax:o}=this.bounds,a=r-n,c=o-s;this.radius=Math.sqrt(a*a+c*c)/2}getRelativePosition(t,e){const{center:i,radius:n}=this;return[(t-i[0])/n,-(e-i[1])/n]}calculateRelativeSizeFromAbsolute(){const{_size:t}=this;return[(0,l.Lz)(t)/this.radius,0]}}function y(t,e){if(null==t)return null;const i=(0,u.kU)(e.angle),n=e.gradientSize,r=e.gradientSizeUnits;switch(e.gradientMethod.toLowerCase()){case"linear":return new f(t,n,r,i);case"rectangular":return new d(t,n,r,i);case"circular":return new x(t,n,r);default:return c.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper").errorOnce(`Gradient fill method "${e.gradientMethod}" currently unsupported.`),null}}var m=i(51917),_=i(68716);const g={createComputedParams:t=>t,optionalAttributes:o.v.optionalAttributes,attributes:{...o.v.attributes,bitset:{type:_.pe.UNSIGNED_BYTE,count:1,pack:({gradientSizeUnits:t,gradientType:e})=>{let i=0;return t===n.OW.Absolute&&(i|=(0,m.mR)(a.Q.isAbsolute)),"discrete"===e.toLowerCase()&&(i|=(0,m.mR)(a.Q.isDiscrete)),i}},tlbr:{count:4,type:_.pe.UNSIGNED_SHORT,pack:({sprite:t})=>{const{rect:e,width:i,height:n}=t,s=e.x+r.hM+r.MZ,o=e.y+r.hM;return[s,o,s+i-2*r.MZ,o+n]}},relativePosition:{count:2,type:_.pe.HALF_FLOAT,packTessellation:({gradientStats:t},e,i,n)=>t?.getRelativePosition(i,n)??[0,0]},relativeGradientSize:{count:2,type:_.pe.HALF_FLOAT,packTessellation:({gradientStats:t})=>t?.relativeSize??[1,1]},gradientMethod:{count:1,type:_.pe.UNSIGNED_BYTE,pack:({gradientMethod:t})=>{switch(t.toLowerCase()){case"rectangular":return a.m.rectangular;case"circular":return a.m.circular;default:return a.m.linear}}}}};class v extends s.N{constructor(){super(...arguments),this.vertexSpec=g}get _preventEffectClipping(){return!0}createTesselationParams(t){return{gradientStats:y(this._unclippedGeometry,this.evaluatedMeshParams)}}_write(t,e,i){const n=i?.asOptimized()??e.readGeometryForDisplay();this._unclippedGeometry=n;const r=this._clip(n);if(!r)return void(this._unclippedGeometry=null);const s=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,s),this._writeGeometry(t,e,r),this._unclippedGeometry=null,t.recordEnd()}}},20059:function(t,e,i){i.d(e,{h:function(){return o}});var n=i(97933),r=i(68716);const s={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:r.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:r.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:r.pe.UNSIGNED_BYTE,count:1},offset:{type:r.pe.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class o extends n.r{constructor(){super(...arguments),this.vertexSpec=s}_write(t,e){t.recordStart(this.instanceId,this.attributeLayout);const i=e.getDisplayId();if("esriGeometryPoint"===e.geometryType){const n=e.readXForDisplay(),r=e.readYForDisplay();this._writeQuad(t,i,n,r)}else if("esriGeometryMultipoint"===e.geometryType){const n=e.readGeometryForDisplay();n?.forEachVertex(((e,n)=>{e>=0&&e<=512&&n>=0&&n<=512&&this._writeQuad(t,i,e,n)}))}t.recordEnd()}_writeQuad(t,e,i,n){const r=t.vertexCount();this._writeVertex(t,e,i,n),t.indexWrite(r+0),t.indexWrite(r+1),t.indexWrite(r+2),t.indexWrite(r+1),t.indexWrite(r+3),t.indexWrite(r+2)}}},20472:function(t,e,i){i.d(e,{F:function(){return c},l:function(){return u}});var n=i(44764),r=i(6273);const s=128e3;let o=null,a=null;async function c(){return o||(o=async function(){const t=(0,r.A)("esri-csp-restrictions")?await i.e(2512).then(i.bind(i,62512)).then((t=>t.l)):await i.e(4250).then(i.bind(i,74250)).then((t=>t.l));a=await t.default({locateFile:t=>(0,n.s)(`esri/core/libs/libtess/${t}`)})}()),o}function u(t,e){const i=Math.max(t.length,s);return a.triangulate(t,e,i)}},22956:function(t,e,i){i.d(e,{H:function(){return T}});var n=i(23572),r=i(94464),s=i(68749),o=i(53334),a=i(52266),c=i(19388),u=i(61866),l=i(85953),h=i(91954),p=i(6538),f=i(51917),d=i(77234);class x{static from(t){return"width"in t?this.fromSimpleMeshParams(t):this.fromComplexMeshParams(t)}static fromSimpleMeshParams(t){const e=new x(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects),{type:i,width:r,height:s,angle:o,alignment:a,outlineSize:c,referenceSize:u,sprite:l,overrideOutlineColor:h}=t;return e.rawWidth=(0,n.Lz)(r),e.rawHeight=(0,n.Lz)(s),e.angle=o,e.alignment=a,e.outlineSize=(0,n.Lz)(c),e.referenceSize=(0,n.Lz)(u),e.overrideOutlineColor=h,e.offsetX=(0,n.Lz)(t.offsetX),e.offsetY=(0,n.Lz)(t.offsetY),"simple"!==i||l.sdf||(e.rawWidth=l.width,e.rawHeight=l.height),e._computeSize(t,!1),e}static fromComplexMeshParams(t){const e=new x(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects);let{alignment:i,transforms:r,size:s,scaleX:o,anchorX:a,anchorY:c,angle:u,colorLocked:l,frameHeight:h,widthRatio:p,offsetX:f,offsetY:y,outlineSize:m,referenceSize:_,scaleFactor:g,sizeRatio:v,isAbsoluteAnchorPoint:k,rotateClockwise:b,scaleSymbolsProportionally:w,sprite:S}=t;if(r&&r.infos.length>0){const t=(0,d.zb)(s,u,b,f,y,r);s=t.size,u=t.rotation,f=t.offsetX,y=t.offsetY,b=!1}g&&(s*=g,f*=g,y*=g);const T=o*(S.width/S.height);e.alignment=i,e.rawHeight=(0,n.Lz)(s),e.rawWidth=e.rawHeight*T,e.referenceSize=(0,n.Lz)(_),e.sizeRatio=v,e.sdfDecodeCoeff=(S.sdfDecodeCoeff??1)*v,e.angle=u,e.rotateClockwise=b,e.anchorX=a,e.anchorY=c,e.offsetX=(0,n.Lz)(f),e.offsetY=(0,n.Lz)(y),k&&s&&(S.sdf?e.anchorX=a/(s*p):e.anchorX=a/(s*T),e.anchorY=c/s);const P=w&&h?s/h:1;return e.outlineSize=0===m||isNaN(m)?0:(0,n.Lz)(m)*P,e.scaleSymbolsProportionally=w,e.colorLocked=l,e._computeSize(t,!0),e}constructor(t,e,i,n,r,s,o){this.sprite=t,this.color=e,this.outlineColor=i,this.minPixelBuffer=n,this.placement=r,this.scaleInfo=s,this.effects=o,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.sdfDecodeCoeff=1,this.alignment=l.C1.SCREEN,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(t,e){const{sprite:i,hasSizeVV:n}=t,r=!!i.sdf,s=i.sdfPaddingRatio??.5,{rawWidth:o,rawHeight:a,sizeRatio:c,outlineSize:u}=this,l=i.rect;let h=o*c,f=a*c,d=0,x=0;if(r){const t=1/(1-s);if(h*=t,f*=t,n)this.computedWidth=h,this.computedHeight=f;else{const t=e&&o>a?h:o,n=a,r=u+2;this.computedWidth=Math.min(t+r,h),this.computedHeight=Math.min(n+r,f);const s=Math.max(i.width,i.height)/Math.max(h,f);d=(this.computedWidth-h)*s,x=(this.computedHeight-f)*s}}else this.computedWidth=h*(l.width/i.width),this.computedHeight=f*(l.height/i.height),d=2*p.hM,x=2*p.hM;const _=l.x+p.hM-d/2,g=l.y+p.hM-x/2,v=_+i.width+d,k=g+i.height+x;this.texXmin=y(_),this.texYmin=y(g),this.texXmax=m(v),this.texYmax=m(k),this.computedWidth*=(this.texXmax-this.texXmin)/(v-_),this.computedHeight*=(this.texYmax-this.texYmin)/(k-g),this.anchorX*=h/this.computedWidth,this.anchorY*=f/this.computedHeight}}function y(t,e=1e-7){const i=Math.ceil(t);return i-t<e?i:Math.floor(t)}function m(t,e=1e-7){const i=Math.floor(t);return t-i<e?i:Math.ceil(t)}var _=i(49093),g=i(43442),v=i(97933),k=i(68716);const b=128/Math.PI;function w(t){return function(t,e){return t%=e,Math.abs(t>=0?t:t+e)}(t*b,256)}const S={createComputedParams:t=>x.from(t),optionalAttributes:{zoomRange:{type:k.pe.SHORT,count:2,packPrecisionFactor:p.fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,f.My)(t,e)}},attributes:{pos:{type:k.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:k.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:k.pe.UNSIGNED_BYTE,count:1,pack:({sprite:t,alignment:e,scaleSymbolsProportionally:i,overrideOutlineColor:n,colorLocked:r})=>{let s=0;return t.sdf&&(s|=(0,f.mR)(_.c.bitset.isSDF)),e===l.C1.MAP&&(s|=(0,f.mR)(_.c.bitset.isMapAligned)),i&&(s|=(0,f.mR)(_.c.bitset.scaleSymbolsProportionally)),n&&(s|=(0,f.mR)(_.c.bitset.overrideOutlineColor)),r&&(s|=(0,f.mR)(_.c.bitset.colorLocked)),s}},offset:{type:k.pe.HALF_FLOAT,count:2,packAlternating:{count:4,pack:({angle:t,computedWidth:e,computedHeight:i,anchorX:n,anchorY:a,offsetX:c,offsetY:u,rotateClockwise:l})=>{const h=function(t,e,i,n,o=!1){const a=(0,s.vt)(),c=o?1:-1;return(0,r.D_)(a),(e||i)&&(0,r.Tl)(a,a,[e,-i]),n&&(0,r.e$)(a,a,.017453292519944444*c*-n),a}(0,c,u,-t,l),p=-(.5+n)*e,f=-(.5-a)*i,d=[p,f],x=[p+e,f],y=[p,f+i],m=[p+e,f+i];return(0,o.l0)(d,d,h),(0,o.l0)(x,x,h),(0,o.l0)(y,y,h),(0,o.l0)(m,m,h),[d,x,y,m]}}},textureUV:{type:k.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({texXmax:t,texXmin:e,texYmax:i,texYmin:n})=>[[e,n],[t,n],[e,i],[t,i]]}},color:{type:k.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,f.Jb)(t)},outlineColor:{type:k.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,f.Jb)(t)},sizing:{type:k.pe.UNSIGNED_BYTE,count:4,pack:({rawWidth:t,rawHeight:e,outlineSize:i,referenceSize:n})=>{const r=Math.max(t,e);return[(0,f.i8)(r,128),(0,f.i8)(i,128),(0,f.i8)(n,128),0]}},placementAngle:{type:k.pe.UNSIGNED_BYTE,count:1,packTessellation:({placementAngle:t})=>w(t)},sdfDecodeCoeff:{type:k.pe.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:({sdfDecodeCoeff:t})=>t}}};class T extends v.r{constructor(){super(...arguments),this.vertexSpec=S}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(t,e,i){const n=this.evaluatedMeshParams.sprite?.textureBinding,r=e.getDisplayId();t.recordStart(this.instanceId,this.attributeLayout,n);const s=this.evaluatedMeshParams.minPixelBuffer,o=Math.max(this.evaluatedMeshParams.computedWidth,s),a=Math.max(this.evaluatedMeshParams.computedHeight,s),l=-this.evaluatedMeshParams.anchorX*this.evaluatedMeshParams.computedWidth,h=this.evaluatedMeshParams.anchorY*this.evaluatedMeshParams.computedHeight,p=this.evaluatedMeshParams.offsetX+l,f=-this.evaluatedMeshParams.offsetY+h;if(null!=this.evaluatedMeshParams.placement){let n=null;if(null!=i){const t=Math.max(this.evaluatedMeshParams.computedWidth,this.evaluatedMeshParams.computedHeight);if(n=(0,c.q)(i,2*t,!1),null===n)return}this._writePlacedMarkers(t,e,n,o,a)}else if(i?.nextPath()){i.nextPoint();const e=i.x,n=i.y;t.recordBounds(e+p,n+f,o,a),this._writeQuad(t,r,e,n)}else if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[n,s]=i.coords;t.recordBounds(n+p,s+f,o,a),this._writeQuad(t,r,n,s)}else if("esriGeometryPoint"===e.geometryType){const i=e.readXForDisplay(),n=e.readYForDisplay();t.recordBounds(i+p,n+f,o,a),this._writeQuad(t,r,i,n)}else{const i=e.readGeometryForDisplay();i?.forEachVertex(((e,i)=>{t.recordBounds(e+p,i+f,o,a),Math.abs(e)>u.$u||Math.abs(i)>u.$u||this._writeQuad(t,r,e,i)}))}t.recordEnd()}_writePlacedMarkers(t,e,i,r,s){const o=i??a.z.fromFeatureSetReaderCIM(e);if(!o)return;const c=h.l.getPlacement(o,-1,this.evaluatedMeshParams.placement,(0,n.Lz)(1),t.id,(0,g.z)());if(!c)return;const l=e.getDisplayId();let p=c.next();const f=this.evaluatedMeshParams.offsetX,d=-this.evaluatedMeshParams.offsetY;for(;null!=p;){const e=p.tx,i=-p.ty;if(Math.abs(e)>u.$u||Math.abs(i)>u.$u){p=c.next();continue}const n=-p.getAngle();t.recordBounds(e+f,i+d,r,s),this._writeQuad(t,l,e,i,n),p=c.next()}}_writeQuad(t,e,i,n,r){const s=t.vertexCount(),o=null==r?null:{placementAngle:r};this._writeVertex(t,e,i,n,o),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}},23695:function(t,e,i){i.d(e,{Q:function(){return c}});var n=i(90927),r=i(36123);const s={optionalAttributes:r.l.optionalAttributes,createComputedParams:t=>t,attributes:{...r.l.attributes,...n.Lm.attributes}},o={optionalAttributes:r.l.optionalAttributes,createComputedParams:t=>t,attributes:{...r.l.attributes,...n.e4.attributes}};class a extends n.eY{constructor(){super(...arguments),this.vertexSpec=o}}class c extends n.w0{constructor(){super(...arguments),this.vertexSpec=s}_createOutlineWriter(t,e,i,n){return new a(t,e,i,n)}write(t,e,i,n,r){this.ensurePacked(e,i,n);const s=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,s),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},33121:function(t,e,i){i.d(e,{v:function(){return c}});var n=i(23572),r=i(51917),s=i(97933),o=i(68716);const a={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:o.pe.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:o.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.pe.UNSIGNED_BYTE,count:1,pack:t=>0},offset:{type:o.pe.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:t})=>{const e=(0,n.Lz)(t),i=-e/2,r=-e/2;return[[i,r],[i+e,r],[i,r+e],[i+e,r+e]]}}},texCoords:{type:o.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:o.pe.UNSIGNED_BYTE,count:2,pack:({size:t})=>[t,t]},referenceSize:{type:o.pe.UNSIGNED_BYTE,count:1,pack:({size:t})=>(0,n.Lz)(t)},zoomRange:{type:o.pe.UNSIGNED_BYTE,count:2,pack:({scaleInfo:t},{tileInfo:e})=>(0,r.My)(t,e)}}};class c extends s.r{constructor(){super(...arguments),this.vertexSpec=a}_write(t,e){const i=e.getDisplayId(),r=this.evaluatedMeshParams.minPixelBuffer,s=Math.max((0,n.Lz)(this.evaluatedMeshParams.size),r);let o,a;if("esriGeometryPoint"===e.geometryType)o=e.readXForDisplay(),a=e.readYForDisplay();else{const t=e.readCentroidForDisplay();if(!t)return;o=t?.coords[0],a=t?.coords[1]}t.recordStart(this.instanceId,this.attributeLayout),t.recordBounds(o,a,s,s);const c=t.vertexCount();this._writeVertex(t,i,o,a),t.indexWrite(c+0),t.indexWrite(c+1),t.indexWrite(c+2),t.indexWrite(c+1),t.indexWrite(c+3),t.indexWrite(c+2),t.recordEnd()}}},36123:function(t,e,i){i.d(e,{l:function(){return o},m:function(){return a}});var n=i(6538),r=i(5467),s=i(68716);const o={createComputedParams:t=>t,optionalAttributes:r.v.optionalAttributes,attributes:{...r.v.attributes,tlbr:{count:4,type:s.pe.UNSIGNED_SHORT,pack:({sprite:t})=>{const{rect:e,width:i,height:r}=t,s=e.x+n.hM,o=e.y+n.hM;return[s,o,s+i,o+r]}},inverseRasterizationScale:{count:1,type:s.pe.BYTE,packPrecisionFactor:16,pack:({sprite:t})=>1/t.rasterizationScale}}};class a extends r.Y{constructor(){super(...arguments),this.vertexSpec=o}_write(t,e,i){const n=i?.asOptimized()??e.readGeometryForDisplay(),r=this._clip(n);if(!r)return;const s=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,s),this._writeGeometry(t,e,r),t.recordEnd()}}},37249:function(t,e,i){i.d(e,{G8:function(){return A},GJ:function(){return m}});var n=i(4506),r=i(23572),s=i(52266),o=i(91954),a=i(99576),c=i(6538),u=i(89982),l=i(51917),h=i(43442),p=i(97933),f=i(77330),d=i(77234);class x{constructor(t){const{offsetX:e,offsetY:i,postAngle:n,fontSize:r,haloSize:s,outlineSize:o,scaleFactor:a,transforms:c}=t;if(this.offsetX=e,this.offsetY=i,this.postAngle=n,this.fontSize=Math.min(r,96),this.haloSize=s??0,this.outlineSize=o??0,this.transforms=c,c&&c.infos.length>1){const t=(0,d.zb)(r,n,!1,e,i,c,!1);this.fontSize=Math.min(t.size,96);const s=t.size/r;this.haloSize*=s,this.outlineSize*=s,this.postAngle=t.rotation,this.offsetX=t.offsetX,this.offsetY=t.offsetY}a&&(this.fontSize*=a,this.offsetX*=a,this.offsetY*=a)}}var y=i(68716);const m=28,_=[4,4],g=[16,4],v={topLeft:g,topRight:g,bottomLeft:g,bottomRight:g},k=[4,2],b=[4,6],w={topLeft:k,topRight:k,bottomLeft:b,bottomRight:b},S={topLeft:k,topRight:b,bottomLeft:k,bottomRight:b},T={topLeft:b,topRight:b,bottomLeft:_,bottomRight:_},P={topLeft:_,topRight:_,bottomLeft:b,bottomRight:b},M={topLeft:b,topRight:_,bottomLeft:b,bottomRight:_},E={topLeft:_,topRight:b,bottomLeft:_,bottomRight:b},z={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:c.fq,packTessellation:({minZoom:t,maxZoom:e})=>[t||0,e||m]},clipAngle:{type:y.pe.UNSIGNED_BYTE,count:1,packTessellation:({clipAngle:t})=>L(t||0)},referenceSymbol:{type:y.pe.BYTE,count:4,packPrecisionFactor:1,packTessellation:(t,e)=>{const i=t.isLineLabel||!t.referenceBounds,n=(0,a.iT)(i?"center":e.horizontalAlignment),s=(0,a.Dy)(i?"middle":e.verticalAlignment),{offsetX:o,offsetY:c,size:u}=i?{offsetX:0,offsetY:0,size:0}:t.referenceBounds;return[(0,r.Lz)(o),-(0,r.Lz)(c),Math.round((0,r.Lz)(u)),n+1<<2|s+1]}},visibility:{type:y.pe.FLOAT,count:1,otherSource:!0}},attributes:{pos:{type:y.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:y.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:y.pe.UNSIGNED_BYTE,count:1,packTessellation:({isBackground:t,mapAligned:e})=>(0,l.xo)([[f.bg,t],[f.ti,!!e]])},offset:{type:y.pe.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:({offsets:t})=>{const{bottomLeft:e,bottomRight:i,topLeft:n,topRight:r}=t;return[n,r,e,i]}}},textureUV:{type:y.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:({texcoords:t})=>{const{bottomLeft:e,bottomRight:i,topLeft:n,topRight:r}=t;return[n,r,e,i]}}},color:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:({color:t})=>t},fontAndReferenceSize:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({fontSize:t},{referenceSize:e})=>[Math.round((0,r.Lz)(t)),Math.round((0,r.Lz)(e??t))]},outlineColor:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,l.Jb)(t)},haloColor:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({haloColor:t})=>(0,l.Jb)(t)},outlineAndHaloSize:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({outlineSize:t,haloSize:e})=>[Math.round((0,r.Lz)(t)),Math.round((0,r.Lz)(e))]}}};class A extends p.r{constructor(){super(...arguments),this.vertexSpec=z,this._textMeshParamsPropsInitialized=!1}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new x(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(t,e,i){const n=this._getShaping();if(!n)return;const r=e.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(t,e,n,i);if(i?.nextPath())return i.nextPoint(),this._writeGlyphs(t,r,i.x,i.y,n,0);if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[s,o]=i.coords;return this._writeGlyphs(t,r,s,o,n,0)}if("esriGeometryMultipoint"===e.geometryType){const i=e.readGeometryForDisplay();return void i?.forEachVertex(((e,i)=>this._writeGlyphs(t,r,e,i,n,0)))}const s=e.readXForDisplay(),o=e.readYForDisplay();return this._writeGlyphs(t,r,s,o,n,0)}_writePlacedTextMarkers(t,e,i,n){const a=n??s.z.fromFeatureSetReaderCIM(e);if(!a)return;const c=o.l.getPlacement(a,-1,this.evaluatedMeshParams.placement,(0,r.Lz)(1),t.id,(0,h.z)());if(!c)return;const u=e.getDisplayId();let l=c.next();for(;null!=l;){const e=l.tx,n=-l.ty,r=-l.getAngle();this._writeGlyphs(t,u,e,n,i,r),l=c.next()}}_getShaping(t){const e=this._textMeshTransformProps,i=this.evaluatedMeshParams;if(!i.glyphs?.glyphs.length)return null;const s=(0,r.Lz)(e.fontSize),o=(0,r.Lz)(e.offsetX),a=(0,r.Lz)(e.offsetY),l=(0,n.qE)((0,r.Lz)(i.lineWidth),c.GR,c.cp),h=c.DY*(0,n.qE)(i.lineHeightRatio,.25,4);return(0,u.Tl)(i.glyphs,{scale:s/c.eG,angle:e.postAngle,xOffset:o,yOffset:a,horizontalAlignment:i.horizontalAlignment,verticalAlignment:t||i.verticalAlignment,maxLineWidth:l,lineHeight:h,decoration:i.decoration,borderLineSizePx:(0,r.Lz)(i.boxBorderLineSize),hasBackground:!!i.boxBackgroundColor,useCIMAngleBehavior:i.useCIMAngleBehavior})}_writeGlyphs(t,e,i,n,s,o,a,c,u=!0){const h=this.evaluatedMeshParams,p=this._textMeshTransformProps,f=(0,r.Lz)(p.fontSize),d=p.haloSize,x=p.outlineSize,y=(0,r.Lz)(p.offsetX),m=(0,r.Lz)(p.offsetY),[_,g]=(0,l.My)(h.scaleInfo,this.getTileInfo());0!==o&&s.setRotation(o);const v=s.bounds,k=i+v.x+y,b=n+v.y-m,w=2*(h.minPixelBuffer?h.minPixelBuffer/f:1),S=Math.max(v.width,v.height)*w;s.textBox&&(t.recordStart(this.instanceId,this.attributeLayout,s.glyphs[0].textureBinding),u&&t.recordBounds(k,b,S,S),this._writeTextBox(t,e,i,n,s.textBox,a,c),t.recordEnd());for(const r of s.glyphs){t.recordStart(this.instanceId,this.attributeLayout,r.textureBinding),u&&t.recordBounds(k,b,S,S);const{texcoords:s,offsets:o}=r;this._writeQuad(t,e,i,n,{texcoords:s,offsets:o,fontSize:f,haloSize:d,outlineSize:x,color:(0,l.Jb)(h.color),isBackground:!1,referenceBounds:a,minZoom:_,maxZoom:g,...c}),t.recordEnd()}0!==o&&s.setRotation(-o)}_writeTextBox(t,e,i,n,r,s,o){const a=this.evaluatedMeshParams,{fontSize:c,haloSize:u,outlineSize:h}=this._textMeshTransformProps,{boxBackgroundColor:p,boxBorderLineColor:f}=a,d={isBackground:!0,fontSize:c,haloSize:u,outlineSize:h,referenceBounds:s,...o};p&&(this._writeQuad(t,e,i,n,{texcoords:v,offsets:r.main,color:(0,l.Jb)(p),...d}),f||(this._writeQuad(t,e,i,n,{texcoords:T,offsets:r.top,color:(0,l.Jb)(p),...d}),this._writeQuad(t,e,i,n,{texcoords:P,offsets:r.bot,color:(0,l.Jb)(p),...d}),this._writeQuad(t,e,i,n,{texcoords:M,offsets:r.left,color:(0,l.Jb)(p),...d}),this._writeQuad(t,e,i,n,{texcoords:E,offsets:r.right,color:(0,l.Jb)(p),...d}))),f&&(this._writeQuad(t,e,i,n,{texcoords:w,offsets:r.top,color:(0,l.Jb)(f),...d}),this._writeQuad(t,e,i,n,{texcoords:w,offsets:r.bot,color:(0,l.Jb)(f),...d}),this._writeQuad(t,e,i,n,{texcoords:S,offsets:r.left,color:(0,l.Jb)(f),...d}),this._writeQuad(t,e,i,n,{texcoords:S,offsets:r.right,color:(0,l.Jb)(f),...d}))}_writeQuad(t,e,i,n,r){const s=t.vertexCount();this._writeVertex(t,e,i,n,r),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}const L=t=>Math.round(t*(254/360))},39313:function(t,e,i){i.d(e,{KE:function(){return p},KI:function(){return l},lB:function(){return h},oI:function(){return u}});var n=i(23572),r=i(40396),s=i(51917),o=i(36123),a=i(77330),c=i(68716);function u(t){const{sprite:e,aspectRatio:i,scaleProportionally:r}=t,s=(0,n.Lz)(t.height),o=s>0?s:e.height;let a=s*i;return a<=0?a=e.width:r&&(a*=e.width/e.height),{width:a,height:o}}function l(t){const{applyRandomOffset:e,sampleAlphaOnly:i}=t;return(0,s.xo)([[a.Fz,e],[a.cn,i]])}const h={createComputedParams:t=>t,optionalAttributes:o.l.optionalAttributes,attributes:{...o.l.attributes,bitset:{count:1,type:c.pe.UNSIGNED_BYTE,pack:l},width:{count:1,type:c.pe.HALF_FLOAT,pack:t=>u(t).width},height:{count:1,type:c.pe.HALF_FLOAT,pack:t=>u(t).height},offset:{count:2,type:c.pe.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,n.Lz)(t),-(0,n.Lz)(e)]},scale:{count:2,type:c.pe.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:t,scaleY:e})=>[t,e]},angle:{count:1,type:c.pe.UNSIGNED_BYTE,pack:({angle:t})=>(0,r.wV)(t)}}};class p extends o.m{constructor(){super(...arguments),this.vertexSpec=h}}},42375:function(t,e,i){i.d(e,{F:function(){return p}});var n=i(23572),r=i(52266),s=i(85953),o=i(6538),a=i(51917),c=i(2484),u=i(98721),l=i(68716);const h={createComputedParams:t=>t,optionalAttributes:u.Eq.optionalAttributes,attributes:{...u.Eq.attributes,bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:({gradientMethod:t,gradientSizeUnits:e,gradientType:i})=>(0,a.xo)([[c.Q.isAlongLine,"alongline"===t.toLowerCase()],[c.Q.isAbsoluteSize,e===s.OW.Absolute],[c.Q.isDiscrete,"discrete"===i.toLowerCase()]])},tlbr:{type:l.pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:n}=t,r=e.x+o.hM+o.MZ,s=e.y+o.hM;return[r,s,r+i-2*o.MZ,s+n]}},accumulatedDistance:{type:l.pe.HALF_FLOAT,count:1,packTessellation:({distance:t,pathLength:e,distanceOffset:i})=>(i+t)/e},gradientSize:{type:l.pe.HALF_FLOAT,count:1,pack:({gradientSize:t,gradientSizeUnits:e})=>e===s.OW.Relative?t/100:(0,n.Lz)(t)},totalLength:{type:l.pe.HALF_FLOAT,count:1,packTessellation:({pathLength:t})=>t},segmentDirection:{type:l.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]}}};class p extends u.Bw{get _preventEffectClipping(){return!0}constructor(t,e,i,n){super(t,e,i,n),this.vertexSpec=h,this._tessellationOptions.textured=!0}_write(t,e,i){const n=i??r.z.fromFeatureSetReaderCIM(e);if(!n)return;const{sprite:s}=this.evaluatedMeshParams;this._writeGeometry(t,e,n,s?.textureBinding)}}},43208:function(t,e,i){i.d(e,{K:function(){return p}});var n=i(23572),r=i(52266),s=i(85953),o=i(6538),a=i(51917),c=i(98721),u=i(77330),l=i(68716);const h={createComputedParams:t=>t,optionalAttributes:c.Eq.optionalAttributes,attributes:{...c.Eq.attributes,bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:t,shouldScaleDash:e,isSDF:i})=>(0,a.xo)([[u.cn,t],[u.kx,e],[u.b5,i]])},tlbr:{type:l.pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:n}=t,r=e.x+o.hM,s=e.y+o.hM;return[r,s,r+i,s+n]}},accumulatedDistance:{type:l.pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},segmentDirection:{type:l.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]},offsetAlongLine:{type:l.pe.HALF_FLOAT,count:1,pack:({offsetAlongLine:t})=>(0,n.Lz)(t)},capType:{type:l.pe.UNSIGNED_BYTE,count:1,pack:({capType:t})=>{switch(t){case s.uT.Butt:case"butt":return 0;case s.uT.Square:case"square":return 1;case s.uT.Round:case"round":return 2;default:return 0}}}}};class p extends c.Bw{constructor(t,e,i,n){super(t,e,i,n),this.vertexSpec=h,this._tessellationOptions.textured=!0}_write(t,e,i){const n=i??r.z.fromFeatureSetReaderCIM(e);if(!n)return;const{sprite:s}=this.evaluatedMeshParams;this._writeGeometry(t,e,n,s?.textureBinding)}}},43442:function(t,e,i){i.d(e,{R:function(){return s},z:function(){return r}});let n=null;function r(){return n}async function s(){n=await Promise.all([i.e(7313),i.e(344)]).then(i.bind(i,30344))}},47819:function(t,e,i){i.d(e,{k:function(){return o}});var n=i(58082),r=i(68716);const s={createComputedParams:t=>t,optionalAttributes:{},attributes:{id:{type:r.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:r.pe.UNSIGNED_BYTE,count:1},pos:{type:r.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:r.pe.FLOAT,count:1,packTessellation:({inverseArea:t})=>t}}};class o extends n.N{constructor(){super(...arguments),this.vertexSpec=s}createTesselationParams(t){return{inverseArea:1/t.readGeometryArea()}}}},51187:function(t,e,i){i.d(e,{A:function(){return s},J:function(){return r}});var n=i(21332);function r(t,e){let i;if("string"==typeof t)i=(0,n.Wm)(t+`-seed(${e})`);else{let n=12;i=t^e;do{i=107*(i>>8^i)+n|0}while(0!=--n)}return(1+i/(1<<31))/2}function s(t){return Math.floor(r(t,o)*a)}const o=53290320,a=10},51917:function(t,e,i){i.d(e,{By:function(){return m},Jb:function(){return f},My:function(){return l},i8:function(){return y},mR:function(){return h},qE:function(){return x},ue:function(){return d},xo:function(){return p}});var n=i(93814),r=i(62991),s=i(80861),o=i(85953);const a=()=>s.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils"),c=0,u=100;function l(t,e){return[!!t?.minScale&&e.scaleToZoom(t.minScale)||c,!!t?.maxScale&&e.scaleToZoom(t.maxScale)||u]}function h(t){return 1<<t}function p(t){let e=0;for(const[i,n]of t)n&&(e|=1<<i);return e}function f(t){let e;if(!t)return[0,0,0,0];if("string"==typeof t){const i=n.A.fromString(t);if(!i)return a().errorOnce(new r.A("mapview:mesh-processing","Unable to parse string into color",{color:t})),[0,0,0,0];e=i.toArray()}else e=t;const[i,s,o,c]=e;return[i*(c/255),s*(c/255),o*(c/255),c]}function d(t){switch(t){case"butt":case o.uT.Butt:return o.xR.BUTT;case"round":case o.uT.Round:return o.xR.ROUND;case"square":case o.uT.Square:return o.xR.SQUARE}}function x(t){switch(t){case"bevel":case o.wd.Bevel:return o.JO.BEVEL;case"miter":case o.wd.Miter:return o.JO.MITER;case"round":case o.wd.Round:return o.JO.ROUND}}function y(t,e){return Math.round(Math.min(Math.sqrt(t*e),255))}function m(t,e){return Math.round(t*e)/e}},54631:function(t,e,i){i.d(e,{N:function(){return l},SM:function(){return h},aM:function(){return u},ci:function(){return p},oo:function(){return c},rS:function(){return a},vA:function(){return f}});var n=i(93814),r=i(51187),s=i(7847),o=i(46205);function a(t){return u(t.map((t=>h(t))).map((t=>(0,s.Qv)(t).simplify())))}function c(t){const e=[];return e.push(t.transform),e.push(t.fromColor),e.push(t.toColor),e.push(t.colorMix),e.push(t.toOpacity),e.push(t.opacityMix),t?.shift?e.push(t?.shift):e.push([1,1,1,1]),e}function u(t){const e=[],i=[];let n=0;for(const r of t){const s=[...r.encode(),...o.GA.ret.encode()];e.push([n+t.length,0,0,0]),i.push(...s),n+=s.length}return[...e,...i]}async function l(t,e){const i=t;let n;if("number"==typeof i||"string"==typeof i||"boolean"==typeof i)n=i;else if(Array.isArray(i))n=await Promise.all(i.map((t=>l(t,e))));else if("object"==typeof i)if("valueExpressionInfo"in i){const{valueExpressionInfo:t}=i,{expression:r}=t;n={...i,computed:await e.createComputedField({expression:r})}}else{n={};for(const t in i)n[t]=await l(i[t],e)}return n}function h(t,e,i){const s=t;let o;if("number"==typeof s||"string"==typeof s||"boolean"==typeof s)o=s;else if(Array.isArray(s))o=s.map((t=>h(t,e,i)));else if("object"==typeof s)if("type"in s&&null!=s.type&&"Process"===s.type)switch(s.op){case"ArcadeColor":{const t=h(s.value,e,i);f(Array.isArray(t)&&4===t.length),o=[t[0]/255,t[1]/255,t[2]/255,t[3]]}break;case"Transparency":{const t=h(s.value,e,i);f("number"==typeof t),o=1-t/100}break;case"Divide":case"Multiply":case"Add":{const t=h(s.left,e,i);f("number"==typeof t);const n=h(s.right,e,i);switch(f("number"==typeof n),s.op){case"Divide":o=t/n;break;case"Multiply":o=t*n;break;case"Add":o=t+n}}break;case"Random":{const t=h(s.seed,e,i),n=h(s.min,e,i),a=h(s.max,e,i),c=e.getObjectId(),u=(0,r.A)(c||0);o=n+(0,r.J)(u,t)*(a-n)}break;case"Cond":{const t=h(s.condition,e,i),n=h(s.ifTrue,e,i),r=h(s.ifFalse,e,i);o=t?n:r}break;case"MatchWinding":{const t=h(s.sign,e,i);let n=h(s.angle,e,i);if(t>0)for(;n<0;)n+=2*Math.PI;else for(;n>0;)n-=2*Math.PI;o=n}}else if("computed"in s)o=function(t){if(!("computed"in t))return t;let r=t.computed.readWithDefault(e,i,[255*t.defaultValue[0],255*t.defaultValue[1],255*t.defaultValue[2],t.defaultValue[3]]);if("string"==typeof r){const t=n.A.fromString(r);t&&(r=[t.r,t.g,t.b,t.a])}return r}(s);else{o={};for(const t in s)o[t]=h(s[t],e,i)}return o}function*p(t){const e=t;if(Array.isArray(e))for(const t of e)yield*p(t);else if("object"==typeof e)if("type"in e&&null!=e.type&&"Process"===e.type)switch(e.op){case"ArcadeColor":case"Transparency":yield*p(e.value);break;case"Divide":case"Multiply":case"Add":yield*p(e.left),yield*p(e.right);break;case"Random":yield*p(e.seed),yield*p(e.min),yield*p(e.max);break;case"Cond":yield*p(e.condition),yield*p(e.ifTrue),yield*p(e.ifFalse);break;case"MatchWinding":yield*p(e.sign),yield*p(e.angle)}else if("computed"in e)yield e.computed;else for(const t in e)yield*p(e[t])}function f(t){if(!t)throw new Error("Assertion failed.")}},56717:function(t,e,i){i.d(e,{GE:function(){return b},Q5:function(){return m},Sy:function(){return h},Tx:function(){return k},YE:function(){return f},Z6:function(){return u},bU:function(){return p},cY:function(){return g},g7:function(){return S},id:function(){return y},jo:function(){return c},k3:function(){return l},n1:function(){return _},qb:function(){return x},uv:function(){return v},ve:function(){return w},zK:function(){return d}});var n=i(6538),r=i(54631),s=i(71291),o=i(51917),a=i(68716);const c={type:a.pe.SHORT,count:2,packPrecisionFactor:n.fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,o.My)(t,e)},u={type:a.pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:({value1Position2Value2:t})=>((0,r.vA)(t),t)},l={type:a.pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:()=>[0,0,0,1]},h={type:a.pe.FLOAT,count:1,packPrecisionFactor:1,pack:()=>0},p={type:a.pe.FLOAT,count:1,packPrecisionFactor:1,packTessellation:({lineLength:t})=>t},f={type:a.pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},d={type:a.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]},x={type:a.pe.FLOAT,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[t,e]},y={type:a.pe.UNSIGNED_BYTE,count:3,pack:"id"},m={type:a.pe.UNSIGNED_BYTE,count:1,pack:s.U},_={type:a.pe.SHORT,count:2,pack:"position",packPrecisionFactor:1},g={marker:{type:a.pe.FLOAT,count:2,packAlternating:{count:4,pack:({texelDimensions:t})=>[[-.5*t[0],-.5*t[1]],[.5*t[0],-.5*t[1]],[-.5*t[0],.5*t[1]],[.5*t[0],.5*t[1]]]}},line:{type:a.pe.FLOAT,count:2,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e},{baseSize:i})=>[t*i/2,e*i/2]},fill:{type:a.pe.FLOAT,count:2,packTessellation:()=>[0,0]}},v={marker:{type:a.pe.SHORT,count:2,packPrecisionFactor:1,packAlternating:{count:4,packTessellation:({texXmax:t,texXmin:e,texYmax:i,texYmin:n})=>[[e,n],[t,n],[e,i],[t,i]]}}},k={type:a.pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:r}=t,s=e.x+n.hM,o=e.y+n.hM;return[s+1,o+1,s+i-1,o+r-1]}},b={type:a.pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:4,pack:({animations:t,baseSize:e,referenceSize:i})=>[t.dataColumn,t.dataRow,e,i]},w={type:a.pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:8,pack:({strokeWidth:t,pixelDimensions:e,baseSize:i,sprite:n,sizeRatio:r})=>{const s=Math.max(i*n.width/n.height,i),o=n.sdfDecodeCoeff*s*r;return[e[0],e[1],t,o]}},S={type:a.pe.BYTE,count:1,packTessellation:({angle:t})=>t}},58082:function(t,e,i){i.d(e,{N:function(){return c}});var n=i(6273),r=i(20472),s=i(93548),o=i(97933);const a=(0,n.A)("featurelayer-fast-triangulation-enabled");class c extends o.r{async loadDependencies(){await Promise.all([super.loadDependencies(),(0,r.F)()])}_write(t,e,i){const n=i?.asOptimized()??e.readGeometryForDisplay(),r=this._clip(n);r&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,r),t.recordEnd())}_clip(t){if(!t)return null;const e=this.hasEffects;return(0,s.FE)(t,e?256:8)}_writeGeometry(t,e,i){const n=i.maxLength>100,r=[],o=this.createTesselationParams(e);if(!n&&a&&(0,s.lO)(r,i))return void(r.length&&this._writeVertices(t,e,i.coords,o,r));const c=(0,s.XZ)(i);this._writeVertices(t,e,c,o)}_writeVertices(t,e,i,n,r){const s=e.getDisplayId(),o=t.vertexCount(),a=this.hasEffects;let c=0;if(r)for(const e of r){const r=i[2*e],o=i[2*e+1];a&&t.recordBounds(r,o,0,0),this._writeVertex(t,s,r,o,n),c++}else for(let e=0;e<i.length;e+=2){const r=Math.round(i[e]),o=Math.round(i[e+1]);a&&t.recordBounds(r,o,0,0),this._writeVertex(t,s,r,o,n),c++}t.indexEnsureSize(c);for(let e=0;e<c;e++)t.indexWrite(e+o)}}},64329:function(t,e,i){i.d(e,{O:function(){return d}});var n=i(23572),r=i(39313),s=i(51917),o=i(90927),a=i(77330),c=i(68716);const u=r.lB,l=o.e4,h={createComputedParams:t=>t,optionalAttributes:u.optionalAttributes,attributes:{...u.attributes,bitset:{type:c.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,r.KI)(t)},aux1:{count:1,type:c.pe.HALF_FLOAT,pack:t=>(0,r.oI)(t).width},aux2:{count:1,type:c.pe.HALF_FLOAT,pack:t=>(0,r.oI)(t).height},aux3:{count:2,type:c.pe.HALF_FLOAT,pack:({offsetX:t,offsetY:e})=>[(0,n.Lz)(t),(0,n.Lz)(e)]},aux4:{count:2,type:c.pe.UNSIGNED_BYTE,pack:({scaleX:t,scaleY:e})=>[t*a.cZ,e*a.cZ]}}},p={createComputedParams:t=>t,optionalAttributes:u.optionalAttributes,attributes:{...u.attributes,color:l.attributes.color,bitset:{type:c.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,s.xo)([[a.Xx,!0]])},aux1:{count:1,type:c.pe.HALF_FLOAT,pack:t=>(0,n.Lz)(.5*t.width)},aux2:{count:1,type:c.pe.HALF_FLOAT,pack:t=>(0,n.Lz)(.5*t.referenceWidth)},aux3:{count:2,type:c.pe.HALF_FLOAT,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[t,e]},aux4:{count:2,type:c.pe.UNSIGNED_BYTE,packTessellation:({normalX:t,normalY:e})=>[t*a.cZ+a.v9,e*a.cZ+a.v9]}}};class f extends o.eY{constructor(){super(...arguments),this.vertexSpec=p}}class d extends o.w0{constructor(){super(...arguments),this.vertexSpec=h}_createOutlineWriter(t,e,i,n){return new f(t,e,i,n)}write(t,e,i,n,r){this.ensurePacked(e,i,n);const s=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,s),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},71291:function(t,e,i){i.d(e,{$:function(){return o},U:function(){return a}});var n=i(51917),r=i(49093),s=i(97933);class o extends s.r{}function a(t){const{sprite:e,isMapAligned:i,colorLocked:s,scaleSymbolsProportionally:o,isStroke:a}=t;let c=0;return i&&(c|=(0,n.mR)(r.c.bitset.isMapAligned)),s&&(c|=(0,n.mR)(r.c.bitset.colorLocked)),e.sdf&&(c|=(0,n.mR)(r.c.bitset.isSDF)),o&&(c|=(0,n.mR)(r.c.bitset.scaleSymbolsProportionally)),a&&(c|=(0,n.mR)(r.c.bitset.isStroke)),c}},73274:function(t,e,i){i.d(e,{i:function(){return d}});var n=i(85953),r=i(6538);function s(t,e){return t.x===e.x&&t.y===e.y}function o(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let n=1;n<e;n++)s(t[n],t[i])||++i===n||(t[i]=t[n]);t.length=i+1}function a(t,e){return t.x=e.y,t.y=-e.x,t}function c(t,e){return t.x=-e.y,t.y=e.x,t}function u(t,e){return t.x=e.x,t.y=e.y,t}function l(t,e){return t.x=-e.x,t.y=-e.y,t}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function p(t,e){return t.x*e.x+t.y*e.y}function f(t,e,i,n){return t.x=e.x*i+e.y*n,t.y=e.x*n-e.y*i,t}class d{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e,i=this._canUseThinTessellation){o(t),i&&e.halfWidth<r.Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let n=e.initialDistance||0,r=!1,s=t[0].x,o=t[0].y;const a=t.length;for(let e=1;e<a;++e){r&&(r=!1,n=0);let a=t[e].x,c=t[e].y,u=a-s,l=c-o,h=Math.sqrt(u*u+l*l);if(u/=h,l/=h,n+h>i){r=!0;const t=(i-n)/h;h=i-n,a=(1-t)*s+t*a,c=(1-t)*o+t*c,--e}const p=this._writeVertex(s,o,0,0,u,l,l,-u,0,-1,n),f=this._writeVertex(s,o,0,0,u,l,-l,u,0,1,n);n+=h;const d=this._writeVertex(a,c,0,0,u,l,l,-u,0,-1,n),x=this._writeVertex(a,c,0,0,u,l,-l,u,0,1,n);this._writeTriangle(p,f,d),this._writeTriangle(f,d,x),s=a,o=c}}_tessellate(t,e){const i=t[0],r=t[t.length-1],o=s(i,r),d=o?3:2;if(t.length<d)return;const x=e.pixelCoordRatio,y=null!=e.capType?e.capType:n.xR.BUTT,m=null!=e.joinType?e.joinType:n.JO.MITER,_=null!=e.miterLimit?Math.min(e.miterLimit,4):2,g=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,v=null!=e.halfWidth?e.halfWidth:2,k=!!e.textured;let b,w,S,T=null;const P=this._prevNormal,M=this._nextNormal;let E=-1,z=-1;const A=this._joinNormal;let L,N;const R=this._textureNormalLeft,I=this._textureNormalRight,D=this._textureNormal;let O=-1,F=-1;const B=e.wrapDistance||65535;let Y=e.initialDistance||0;const G=this._writeVertex,C=this._writeTriangle,U=(t,e,i,n,r,s)=>{const o=G(w,S,L,N,i,n,t,e,r,s,Y);return O>=0&&F>=0&&o>=0&&C(O,F,o),O=F,F=o,o};o&&(b=t[t.length-2],M.x=r.x-b.x,M.y=r.y-b.y,z=h(M),M.x/=z,M.y/=z);let W=!1;for(let e=0;e<t.length;++e){if(W&&(W=!1,Y=0),b&&(P.x=-M.x,P.y=-M.y,E=z,Y+E>B&&(W=!0)),W){const i=(B-Y)/E;E=B-Y,b={x:(1-i)*b.x+i*t[e].x,y:(1-i)*b.y+i*t[e].y},--e}else b=t[e];w=b.x,S=b.y;const i=e<=0&&!W,r=e===t.length-1;if(i||(Y+=E),T=r?o?t[1]:null:t[e+1],T?(M.x=T.x-w,M.y=T.y-S,z=h(M),M.x/=z,M.y/=z):(M.x=void 0,M.y=void 0),!o){if(i){c(A,M),L=A.x,N=A.y,y===n.xR.SQUARE&&(U(-M.y-M.x,M.x-M.y,M.x,M.y,0,-1),U(M.y-M.x,-M.x-M.y,M.x,M.y,0,1)),y===n.xR.ROUND&&(U(-M.y-M.x,M.x-M.y,M.x,M.y,-1,-1),U(M.y-M.x,-M.x-M.y,M.x,M.y,-1,1)),y!==n.xR.ROUND&&y!==n.xR.BUTT||(U(-M.y,M.x,M.x,M.y,0,-1),U(M.y,-M.x,M.x,M.y,0,1));continue}if(r){a(A,P),L=A.x,N=A.y,y!==n.xR.ROUND&&y!==n.xR.BUTT||(U(P.y,-P.x,-P.x,-P.y,0,-1),U(-P.y,P.x,-P.x,-P.y,0,1)),y===n.xR.SQUARE&&(U(P.y-P.x,-P.x-P.y,-P.x,-P.y,0,-1),U(-P.y-P.x,P.x-P.y,-P.x,-P.y,0,1)),y===n.xR.ROUND&&(U(P.y-P.x,-P.x-P.y,-P.x,-P.y,1,-1),U(-P.y-P.x,P.x-P.y,-P.x,-P.y,1,1));continue}}let s,d,G=(H=M,-((V=P).x*H.y-V.y*H.x));if(Math.abs(G)<.01)p(P,M)>0?(A.x=P.x,A.y=P.y,G=1,s=Number.MAX_VALUE,d=!0):(c(A,M),G=1,s=1,d=!1);else{A.x=(P.x+M.x)/G,A.y=(P.y+M.y)/G,s=h(A);const t=(s-1)*v*x;d=s>4||t>E&&t>z}L=A.x,N=A.y;let C=m;switch(m){case n.JO.BEVEL:s<1.05&&(C=n.JO.MITER);break;case n.JO.ROUND:s<g&&(C=n.JO.MITER);break;case n.JO.MITER:s>_&&(C=n.JO.BEVEL)}switch(C){case n.JO.MITER:if(U(A.x,A.y,-P.x,-P.y,0,-1),U(-A.x,-A.y,-P.x,-P.y,0,1),r)break;if(k){const t=W?0:Y;O=this._writeVertex(w,S,L,N,M.x,M.y,A.x,A.y,0,-1,t),F=this._writeVertex(w,S,L,N,M.x,M.y,-A.x,-A.y,0,1,t)}break;case n.JO.BEVEL:{const t=G<0;let e,i,n,s;if(t){const t=O;O=F,F=t,e=R,i=I}else e=I,i=R;if(d)n=t?c(this._innerPrev,P):a(this._innerPrev,P),s=t?a(this._innerNext,M):c(this._innerNext,M);else{const e=t?l(this._inner,A):u(this._inner,A);n=e,s=e}const o=t?a(this._bevelStart,P):c(this._bevelStart,P);U(n.x,n.y,-P.x,-P.y,e.x,e.y);const h=U(o.x,o.y,-P.x,-P.y,i.x,i.y);if(r)break;const p=t?c(this._bevelEnd,M):a(this._bevelEnd,M);if(d){const t=this._writeVertex(w,S,L,N,-P.x,-P.y,0,0,0,0,Y);O=this._writeVertex(w,S,L,N,M.x,M.y,s.x,s.y,e.x,e.y,Y),F=this._writeVertex(w,S,L,N,M.x,M.y,p.x,p.y,i.x,i.y,Y),this._writeTriangle(h,t,F)}else{if(k){const t=this._bevelMiddle;t.x=(o.x+p.x)/2,t.y=(o.y+p.y)/2,f(D,t,-P.x,-P.y),U(t.x,t.y,-P.x,-P.y,D.x,D.y),f(D,t,M.x,M.y),O=this._writeVertex(w,S,L,N,M.x,M.y,t.x,t.y,D.x,D.y,Y),F=this._writeVertex(w,S,L,N,M.x,M.y,s.x,s.y,e.x,e.y,Y)}else{const t=O;O=F,F=t}U(p.x,p.y,M.x,M.y,i.x,i.y)}if(t){const t=O;O=F,F=t}break}case n.JO.ROUND:{const t=G<0;let e,i;if(t){const t=O;O=F,F=t,e=R,i=I}else e=I,i=R;const n=t?l(this._inner,A):u(this._inner,A);let o,h;d?(o=t?c(this._innerPrev,P):a(this._innerPrev,P),h=t?a(this._innerNext,M):c(this._innerNext,M)):(o=n,h=n);const x=t?a(this._roundStart,P):c(this._roundStart,P),y=t?c(this._roundEnd,M):a(this._roundEnd,M),m=U(o.x,o.y,-P.x,-P.y,e.x,e.y),_=U(x.x,x.y,-P.x,-P.y,i.x,i.y);if(r)break;const g=this._writeVertex(w,S,L,N,-P.x,-P.y,0,0,0,0,Y);d||this._writeTriangle(O,F,g);const v=l(this._outer,n),b=this._writeVertex(w,S,L,N,M.x,M.y,y.x,y.y,i.x,i.y,Y);let T,E;const z=s>2;if(z){let e;s!==Number.MAX_VALUE?(v.x/=s,v.y/=s,e=p(P,v),e=(s*(e*e-1)+1)/e):e=-1,T=t?a(this._startBreak,P):c(this._startBreak,P),T.x+=P.x*e,T.y+=P.y*e,E=t?c(this._endBreak,M):a(this._endBreak,M),E.x+=M.x*e,E.y+=M.y*e}f(D,v,-P.x,-P.y);const B=this._writeVertex(w,S,L,N,-P.x,-P.y,v.x,v.y,D.x,D.y,Y);f(D,v,M.x,M.y);const C=k?this._writeVertex(w,S,L,N,M.x,M.y,v.x,v.y,D.x,D.y,Y):B,W=g,V=k?this._writeVertex(w,S,L,N,M.x,M.y,0,0,0,0,Y):g;let H=-1,X=-1;if(z&&(f(D,T,-P.x,-P.y),H=this._writeVertex(w,S,L,N,-P.x,-P.y,T.x,T.y,D.x,D.y,Y),f(D,E,M.x,M.y),X=this._writeVertex(w,S,L,N,M.x,M.y,E.x,E.y,D.x,D.y,Y)),k?z?(this._writeTriangle(W,_,H),this._writeTriangle(W,H,B),this._writeTriangle(V,C,X),this._writeTriangle(V,X,b)):(this._writeTriangle(W,_,B),this._writeTriangle(V,C,b)):z?(this._writeTriangle(g,_,H),this._writeTriangle(g,H,X),this._writeTriangle(g,X,b)):(this._writeTriangle(g,_,B),this._writeTriangle(g,C,b)),d?(O=this._writeVertex(w,S,L,N,M.x,M.y,h.x,h.y,e.x,e.y,Y),F=b):(O=k?this._writeVertex(w,S,L,N,M.x,M.y,h.x,h.y,e.x,e.y,Y):m,this._writeTriangle(O,V,b),F=b),t){const t=O;O=F,F=t}break}}}var V,H}}},90927:function(t,e,i){i.d(e,{Lm:function(){return h},e4:function(){return p},eY:function(){return f},w0:function(){return d}});var n=i(52266),r=i(93548),s=i(5467),o=i(51917),a=i(98721),c=i(43135),u=i(77330),l=i(68716);const h={createComputedParams:t=>t,optionalAttributes:a.Eq.optionalAttributes,attributes:{...a.Eq.attributes,bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:t=>0},color:{type:l.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,o.Jb)(t)}}},p={createComputedParams:t=>t,optionalAttributes:a.Eq.optionalAttributes,attributes:{...a.Eq.attributes,bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,o.xo)([[u.Xx,!0],[u.bB,t.outlineUsesColorVV]])},color:{type:l.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,o.Jb)(t)}}};class f extends a.Bw{constructor(){super(...arguments),this.vertexSpec=p}}class d extends s.Y{constructor(t,e,i,n){super(t,e,i,n),this.vertexSpec=h,this._lineMeshWriter=this._createOutlineWriter(t,e,i,n)}_createOutlineWriter(t,e,i,n){return new f(t,e,i,n)}_write(t,e){const i=this.evaluatedMeshParams.effects,n=this.evaluatedMeshParams.outlineEffects;if(i?.length||n?.length){if(i?.length){const n=this.getEffectCursor(t,e,i);if(n){let i;for(;i=n?.next();)i.invertY(),this._writeFill(t,e,i)}}else this._writeFill(t,e);if(n?.length){const i=this.getEffectCursor(t,e,n);if(i){let n;for(;n=i?.next();)n.invertY(),this._writeOutline(t,e,n)}}else this._writeOutline(t,e)}else this._writeSimpleOutlineFill(t,e)}_writeSimpleOutlineFill(t,e){const i=e.readGeometryForDisplay(),r=this._clip(i);r&&(this._writeGeometry(t,e,r),this._lineMeshWriter.writeLineVertices(t,n.z.fromOptimizedCIM(r,"esriGeometryPolyline"),e))}_writeFill(t,e,i){const n=i?.asOptimized()??e.readGeometryForDisplay(),r=this._clip(n);r&&this._writeGeometry(t,e,r)}_writeOutline(t,e,i){const r=i?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(r);s&&this._lineMeshWriter.writeLineVertices(t,n.z.fromOptimizedCIM(s,"esriGeometryPolyline"),e)}_clip(t){return t?(0,r.FE)(t,(0,c.Z0)(this.evaluatedMeshParams)):null}get effectInfos(){return[...this._evaluator.inputMeshParams.effects?.effectInfos??[],...this._evaluator.inputMeshParams.outlineEffects?.effectInfos??[]]}write(t,e,i,n,r){this.ensurePacked(e,i,n),t.recordStart(this.instanceId,this.attributeLayout),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}get hasEffects(){return!!this.evaluatedMeshParams.outlineEffects}}},91954:function(t,e,i){i.d(e,{l:function(){return r}});var n=i(32199);class r{static getPlacement(t,e,i,r,s,o){const a=(0,n.c)(i);return a?(-1===e&&t.invertY(),a.execute(t,i,r,s,o)):null}}},92524:function(t,e,i){i.d(e,{V:function(){return u}});var n=i(52266),r=i(54481),s=i(19388),o=i(32199),a=i(52644);const c=96/72;class u{static executeEffects(t,e,i,n,r){const u=c,l=(0,a.ll)(t);let h=new s.k(e);for(const e of t){const t=(0,o.A)(e);t&&(h=t.execute(h,e,u,i,n,l,r))}return h}static applyEffects(t,e,i){if(!t)return e;const c=(0,a.ll)(t);let u,l=new s.k(n.z.fromJSONCIM(e));for(const e of t){const t=(0,o.A)(e);t&&(l=t.execute(l,e,1,null,i,c,!1))}const h=[];let p=null;for(;u=l.next();)h.push(...(0,r.x)(u)),p=u.geometryType;return 0===h.length||null===p?null:"esriGeometryPolygon"===p?{rings:h}:{paths:h}}}},93548:function(t,e,i){i.d(e,{uS:function(){return C},FE:function(){return G},lO:function(){return B},XZ:function(){return Y}});i(91814);var n=i(20472),r=i(15303),s=i(88358),o=i(6538);i(6273);function a(t,e,i,n,r,s,o){N=0;const a=(n-i)*s,u=r&&r.length,h=u?(r[0]-i)*s:a;let p,f,d,x,m,_=c(e,i,n,0,h,s,!0);if(_&&_.next!==_.prev){if(u&&(_=y(e,i,n,r,_,s)),a>80*s){p=d=e[0+i*s],f=x=e[1+i*s];for(let t=s;t<h;t+=s){const n=e[t+i*s],r=e[t+1+i*s];p=Math.min(p,n),f=Math.min(f,r),d=Math.max(d,n),x=Math.max(x,r)}m=Math.max(d-p,x-f),m=0!==m?1/m:0}l(_,t,s,p,f,m,o,0)}}function c(t,e,i,n,r,s,o){let a;if(o===function(t,e,i,n,r,s){let o=0;for(let i=n,a=r-s;i<r;i+=s)o+=(t[a+e*s]-t[i+e*s])*(t[i+1+e*s]+t[a+1+e*s]),a=i;return o}(t,e,0,n,r,s)>0)for(let i=n;i<r;i+=s)a=f(i+e*s,t[i+e*s],t[i+1+e*s],a);else for(let i=r-s;i>=n;i-=s)a=f(i+e*s,t[i+e*s],t[i+1+e*s],a);return a&&S(a,a.next)&&(d(a),a=a.next),a}function u(t,e=t){if(!t)return t;let i,n=t;do{if(i=!1,n.steiner||!S(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(d(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function l(t,e,i,n,r,s,o,a){if(!t)return;!a&&s&&(t=_(t,n,r,s));let c=t;for(;t.prev!==t.next;){const f=t.prev,x=t.next;if(s?p(t,n,r,s):h(t))e.push(f.index/i+o),e.push(t.index/i+o),e.push(x.index/i+o),d(t),t=x.next,c=x.next;else if((t=x)===c){a?1===a?l(t=P(t,e,i,o),e,i,n,r,s,o,2):2===a&&M(t,e,i,n,r,s,o):l(u(t),e,i,n,r,s,o,1);break}}}function h(t){const e=t.prev,i=t,n=t.next;if(g(e,i,n)>=0)return!1;let r=t.next.next;const s=r;let o=0;for(;r!==t.prev&&(0===o||r!==s);){if(o++,k(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function p(t,e,i,n){const r=t.prev,s=t,o=t.next;if(g(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,c=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,u=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=w(a,c,e,i,n),p=w(u,l,e,i,n);let f=t.prevZ,d=t.nextZ;for(;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&k(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&k(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&k(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&k(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function f(t,e,i,n){const r=A.create(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function d(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function x(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,n,r,s){const o=new Array;for(let r=0,a=n.length;r<a;r++){const u=c(t,e,0,n[r]*s,r<a-1?n[r+1]*s:i*s,s,!1);u===u.next&&(u.steiner=!0),o.push(x(u))}o.sort(T);for(const t of o)r=m(t,r);return r}function m(t,e){const i=function(t,e){let i=e;const n=t.x,r=t.y;let s,o=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=n&&t>o){if(o=t,t===n){if(r===i.y)return i;if(r===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===o)return s.prev;const a=s,c=s.x,u=s.y;let l,h=1/0;for(i=s.next;i!==a;)n>=i.x&&i.x>=c&&n!==i.x&&k(r<u?n:o,r,c,u,r<u?o:n,r,i.x,i.y)&&(l=Math.abs(r-i.y)/(n-i.x),(l<h||l===h&&i.x>s.x)&&b(i,t)&&(s=i,h=l)),i=i.next;return s}(t,e);if(!i)return e;const n=z(i,t);return u(n,n.next),u(i,i.next)}function _(t,e,i,n){let r;for(;r!==t;r=r.next){if(r=r||t,null===r.z&&(r.z=w(r.x,r.y,e,i,n)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,_(t,e,i,n);r.prevZ=r.prev,r.nextZ=r.next}return t.prevZ.nextZ=null,t.prevZ=null,function(t){let e,i=1;for(;;){let n,r=t;t=null,e=null;let s=0;for(;r;){s++,n=r;let o=0;for(;o<i&&n;o++)n=n.nextZ;let a=i;for(;o>0||a>0&&n;){let i;0===o?(i=n,n=n.nextZ,a--):0!==a&&n?r.z<=n.z?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,o--),e?e.nextZ=i:t=i,i.prevZ=e,e=i}r=n}if(e.nextZ=null,i*=2,s<2)return t}}(t)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function v(t,e,i,n){return!!(S(t,e)&&S(i,n)||S(t,n)&&S(i,e))||g(t,e,i)>0!=g(t,e,n)>0&&g(i,n,t)>0!=g(i,n,e)>0}function k(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function S(t,e){return t.x===e.x&&t.y===e.y}function T(t,e){return t.x-e.x}function P(t,e,i,n){let r=t;do{const s=r.prev,o=r.next.next;!S(s,o)&&v(s,r,r.next,o)&&b(s,o)&&b(o,s)&&(e.push(s.index/i+n),e.push(r.index/i+n),e.push(o.index/i+n),d(r),d(r.next),r=t=o),r=r.next}while(r!==t);return r}function M(t,e,i,n,r,s,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.index!==t.index&&E(a,t)){let c=z(a,t);return a=u(a,a.next),c=u(c,c.next),l(a,e,i,n,r,s,o,0),void l(c,e,i,n,r,s,o,0)}t=t.next}a=a.next}while(a!==t)}function E(t,e){return t.next.index!==e.index&&t.prev.index!==e.index&&!function(t,e){let i=t;do{if(i.index!==t.index&&i.next.index!==t.index&&i.index!==e.index&&i.next.index!==e.index&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function z(t,e){const i=A.create(t.index,t.x,t.y),n=A.create(e.index,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}class A{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(t,e,i){const n=N<L.length?L[N++]:new A;return n.index=t,n.x=e,n.y=i,n.prev=null,n.next=null,n.z=null,n.prevZ=null,n.nextZ=null,n.steiner=!1,n}}const L=[];let N=0;for(let t=0;t<8096;t++)L.push(new A);const R=1e-5,I=new r.O3(0,0,0,1,0),D=new r.O3(0,0,0,1,0);function O(t,e,i){let n=0;for(let r=1;r<i;r++){const i=t[2*(e+r-1)],s=t[2*(e+r-1)+1];n+=(t[2*(e+r)]-i)*(t[2*(e+r)+1]+s)}return n}function F(t,e,i,n,r){let s=0;for(let o=i;o<n;o+=3){const i=2*(t[o]-r),n=2*(t[o+1]-r),a=2*(t[o+2]-r);s+=Math.abs((e[i]-e[a])*(e[n+1]-e[i+1])-(e[i]-e[n])*(e[a+1]-e[i+1]))}return s}function B(t,e){const{coords:i,lengths:n}=e,r=t;let s=0;for(let t=0;t<n.length;){let e=t,o=n[t],c=O(i,s,o);const u=[];for(;++e<n.length;){const t=n[e],r=O(i,s+o,t);if(!(r>0))break;c+=r,u.push(s+o),o+=t}const l=r.length;a(r,i,s,s+o,u,2,0);const h=F(r,i,l,r.length,0),p=Math.abs(c);if(Math.abs((h-p)/Math.max(1e-7,p))>R)return r.length=0,!1;t=e,s+=o}return!0}function Y(t){const{coords:e,lengths:i}=t,{buffer:r}=(0,n.l)(e,i);return r}function G(t,e){if(null==t)return null;if(!function(t,e,i){let n=0;for(let r=0;r<t.lengths.length;r++){const s=t.lengths[r];for(let r=0;r<s;r++){const s=t.coords[2*(r+n)],o=t.coords[2*(r+n)+1];if(s<e||s>i||o<e||o>i)return!0}n+=s}return!1}(t,-128,o.CQ+128))return t;I.setPixelMargin(e),I.reset(r.dC.Polygon);let i=0;for(let e=0;e<t.lengths.length;e++){const n=t.lengths[e];let r=t.coords[2*(0+i)],s=t.coords[2*(0+i)+1];I.moveTo(r,s);for(let e=1;e<n;e++)r=t.coords[2*(e+i)],s=t.coords[2*(e+i)+1],I.lineTo(r,s);I.close(),i+=n}const n=I.result(!1);if(!n)return null;const a=[],c=[];for(const t of n){let e=0;for(const i of t)c.push(i.x),c.push(i.y),e++;a.push(e)}return new s.A(a,c)}function C(t,e){D.setPixelMargin(e);const i=D,n=-e,s=o.CQ+e;let a=[],c=!1;if(!t.nextPath())return null;let u=t.pathLength(),l=!0;for(;l;){t.seekPathStart();const e=[];if(!t.pathSize)return null;i.reset(r.dC.LineString),t.nextPoint();let o=t.x,h=t.y;if(c)i.moveTo(o,h);else{if(o<n||o>s||h<n||h>s){c=!0;continue}e.push({x:o,y:h})}let p=!1;for(;t.nextPoint();)if(o=t.x,h=t.y,c)i.lineTo(o,h);else{if(o<n||o>s||h<n||h>s){p=!0;break}e.push({x:o,y:h})}if(p)c=!0;else{if(c){const t=i.resultWithStarts();if(t)for(const e of t)a.push({...e,pathLength:u})}else a.push({line:e,start:0,pathLength:u});l=t.nextPath(),u=l?t.pathLength():0,c=!1}}return a=a.filter((t=>t.line.length>1)),0===a.length?null:a}I.setExtent(o.CQ),D.setExtent(o.CQ)},97933:function(t,e,i){i.d(e,{r:function(){return f}});var n=i(52266),r=i(92524),s=i(43442),o=i(93911),a=(i(6273),i(43135)),c=i(68716);function u(t){switch(t){case c.pe.BYTE:case c.pe.UNSIGNED_BYTE:return 1;case c.pe.SHORT:case c.pe.UNSIGNED_SHORT:case c.pe.HALF_FLOAT:return 2;case c.pe.FLOAT:case c.pe.INT:case c.pe.UNSIGNED_INT:return 4}}class l{static fromVertexSpec(t,e){const{attributes:i,optionalAttributes:n}=t;let r,s,o;const a=[];for(const t in i){if(i[t].otherSource)continue;const e=i[t];"position"===e.pack?r={...e,name:t,offset:0}:"id"===e.pack?s={...e,name:t,offset:4}:"bitset"===t?o={...e,name:t,offset:7}:a.push({...e,name:t})}for(const t in n)if(!0===e[t]){const e=n[t];a.push({...e,name:t})}const c=function(t){const e=[],i=[],n=[];for(const r of t){const t=u(r.type)*r.count;switch(t%2||t%4||4){case 4:e.push(r);continue;case 2:i.push(r);continue;case 1:n.push(r);continue;default:throw new Error("Found unexpected dataType byte count")}}return e.push(...i),e.push(...n),e}(a),h=[];let p=8,f=1;for(const t of c)h.push({...t,offset:p}),p+=u(t.type)*t.count,t.packAlternating&&(f=Math.max(t.packAlternating.count,f));const d=Uint32Array.BYTES_PER_ELEMENT,x=p%d;return new l(r,s,o,h,p+(x?d-x:0),f)}constructor(t,e,i,n,r,s){this.position=t,this.id=e,this.bitset=i,this.standardAttributes=n,this.stride=r,this.packVertexCount=s,n.push(i),this._attributes=[t,e,i,...n]}get attributeLayout(){if(!this._attributeLayout){const t=(0,a.hU)(this._attributes),e=this._attributes.map((t=>({name:t.name,count:t.count,offset:t.offset,type:t.type,packPrecisionFactor:t.packPrecisionFactor,normalized:t.normalized??!1})));this._attributeLayout={attributes:e,hash:t,stride:this.stride}}return this._attributeLayout}}var h=i(30188);class p{static fromVertexSpec(t,e){const i=l.fromVertexSpec(t,e);return new p(i)}constructor(t){this._spec=t,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(t,e,i,n,r,s){for(let t=0;t<this._spec.packVertexCount;t++){const o=t*this._spec.stride;this._packPosition(i,n,o),this._packId(e,o);const a=this._spec.bitset;if(s){if(a.packTessellation){const t=a.packTessellation(s,r,i,n);this._pack(t,a,o)}for(const t of this._spec.standardAttributes)if(null!=t.packTessellation){const e=t.packTessellation(s,r,i,n);this._pack(e,t,o)}else if(t.packAlternating?.packTessellation){const e=t.packAlternating.packTessellation(s,r,i,n);for(let i=0;i<this._spec.packVertexCount;i++){const n=e[i];this._pack(n,t,i*this._spec.stride)}}}}t.vertexWriteRegion(this._packedU32View)}pack(t,e){for(const i of this._spec.standardAttributes)if(i.pack&&"string"!=typeof i.pack){const n=i.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++)this._pack(n,i,t*this._spec.stride)}else if(i.packAlternating?.pack){const n=i.packAlternating.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++){const e=n[t];this._pack(e,i,t*this._spec.stride)}}}_packPosition(t,e,i){const{offset:n}=this._spec.position,r=this._spec.position.packPrecisionFactor??1,s=(0,o.M9)(t*r,e*r);this._dataView.setUint32(i+n,s,!0)}_packId(t,e){const i=t*(this._spec.id.packPrecisionFactor??1),n=4278190080&this._dataView.getUint32(e+this._spec.id.offset,!0);this._dataView.setUint32(e+this._spec.id.offset,i|n,!0)}_pack(t,e,i){(0,h.F)(this._dataView,t,e,i)}}class f{constructor(t,e,i,n){this._instanceId=t,this._evaluator=e,this._enabledOptionalAttributes=i,this._viewParams=n,this._evaluator.evaluator=t=>this.vertexSpec.createComputedParams(t)}get _vertexPack(){if(!this._cachedVertexPack){const t=p.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||t.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=t}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get effectInfos(){return this._evaluator.inputMeshParams.effects?.effectInfos}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(t){this._references=t}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){(function(t){if(!t)return!1;for(const e of t)switch(e.effect.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1})(this.effectInfos)&&await(0,s.R)()}enqueueRequest(t,e,i){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(t,e,i)}write(t,e,i,n,r){this.ensurePacked(e,i,n);const s=this.evaluatedMeshParams.effects;if(!s||0===s.length)return void this._write(t,i,void 0,r);const o=this.getEffectCursor(t,i,s);if(!o)return;let a;for(;a=o.next();)a.invertY(),this._write(t,i,a,r)}ensurePacked(t,e,i){if(!this._evaluator.hasDynamicProperties)return;const n=this._evaluator.evaluateMeshParams(t,e,i);this._vertexPack.pack(n,this._viewParams)}hasArcadeDependency(t){return this._evaluator.hasArcadeDependency(t)}_writeVertex(t,e,i,n,r){const s=this.evaluatedMeshParams;this._vertexPack.writeVertex(t,e,i,n,s,r)}getEffectCursor(t,e,i){const o=e.readGeometryForDisplay()?.clone();if(!o)return;const a=n.z.fromOptimizedCIM(o,e.geometryType),c=(0,s.z)();a.invertY();const u=t.id||"";return r.V.executeEffects(i,a,u,c,this._preventEffectClipping)}}},98721:function(t,e,i){i.d(e,{Bw:function(){return y},Eq:function(){return f},sp:function(){return p}});var n=i(23572),r=i(52266),s=i(6538),o=i(73274),a=i(93548),c=i(51917),u=i(97933),l=i(43135),h=i(68716);class p{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0,this.pathLength=0,this.distanceOffset=0,this.lineLength=0}}const f={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:h.pe.SHORT,count:2,packPrecisionFactor:s.fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,c.My)(t,e)}},attributes:{id:{type:h.pe.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:h.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:h.pe.UNSIGNED_BYTE,count:1},color:{type:h.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,c.Jb)(t)},offset:{type:h.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[(0,c.By)(t,16),(0,c.By)(e,16)]},normal:{type:h.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[(0,c.By)(t,16),(0,c.By)(e,16)]},halfWidth:{type:h.pe.HALF_FLOAT,count:1,pack:({width:t})=>(0,n.Lz)(.5*t)},referenceHalfWidth:{type:h.pe.HALF_FLOAT,count:1,pack:({referenceWidth:t})=>(0,n.Lz)(.5*t)}}};class d{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0,this.distanceOffset=0}}const x=65535;class y extends u.r{constructor(t,e,i,n){super(t,e,i,n),this.vertexSpec=f,this._currentWrite=new d,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:x,textured:!1},this._tessParams=new p,this._initializeTessellator()}writeLineVertices(t,e,i){const n=this._getLines(e);null!=n&&this._writeVertices(t,i,n)}_initializeTessellator(){this._lineTessellator=new o.i(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(t,e,i){const n=i??r.z.fromFeatureSetReaderCIM(e);n&&this._writeGeometry(t,e,n)}_writeGeometry(t,e,i,n){t.recordStart(this.instanceId,this.attributeLayout,n),this.writeLineVertices(t,i,e),t.recordEnd()}_getLines(t){return(0,a.uS)(t,(0,l.Z0)(this.evaluatedMeshParams))}_writeVertices(t,e,i){const{_currentWrite:r,_tessellationOptions:o,evaluatedMeshParams:a}=this,{width:u,capType:l,joinType:h,miterLimit:p,hasSizeVV:f}=a,d=(0,n.Lz)(.5*u);o.halfWidth=d,o.capType=(0,c.ue)(l),o.joinType=(0,c.qE)(h),o.miterLimit=p;const y=!f;r.out=t,r.id=e.getDisplayId(),r.vertexCount=0,r.indexCount=0,r.vertexFrom=t.vertexCount(),r.vertexBounds=y&&d<s.Gh?0:1;for(const{line:t,start:e,pathLength:n}of i)o.initialDistance=e%x,r.pathLength=n,r.distanceOffset=Math.floor(e/x)*x,this._lineTessellator.tessellate(t,o,y)}_writeTesselatedVertex(t,e,i,n,r,s,o,a,c,u,l){const{out:h,id:p,vertexBounds:f,pathLength:d,distanceOffset:x}=this._currentWrite;return this.hasEffects&&h.recordBounds(t,e,f,f),this._tessParams.extrusionOffsetX=o,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=c,this._tessParams.normalY=u,this._tessParams.directionX=r,this._tessParams.directionY=s,this._tessParams.distance=l,this._tessParams.pathLength=d,this._tessParams.distanceOffset=x,this._writeVertex(h,p,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,i){const{out:n}=this._currentWrite;n.indexEnsureSize(3),n.indexWrite(t),n.indexWrite(e),n.indexWrite(i),this._currentWrite.indexCount+=3}}}}]);