"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[6529],{12506:function(e,t,n){n.d(t,{$:function(){return u},p:function(){return c}});var s=n(93617),r=n(88515),i=n(62453),o=n(98524);function a({x:e,y:t,z:n}){return(0,s.fA)(e,t,n??0)}function u(e,t){switch(e.type){case"edge":return e.draped?new r.X({edgeStart:a(e.start),edgeEnd:a(e.end),targetPoint:(0,s.de)(a(e.target)),objectId:e.objectId,getGroundElevation:t}):new i.z({edgeStart:a(e.start),edgeEnd:a(e.end),targetPoint:(0,s.de)(a(e.target)),objectId:e.objectId,isDraped:!1});case"vertex":return new o.C({targetPoint:(0,s.de)(a(e.target)),objectId:e.objectId,isDraped:!1})}}function c(e,t){return null!=e&&"3d"===e.type?(n,s)=>e.elevationProvider.getElevation(n,s,0,t,"ground"):()=>null}},20713:function(e,t,n){n.d(t,{J:function(){return y}});var s=n(15565),r=n(37623),i=n(56053),o=n(87249),a=n(67488),u=n(48277),c=n(73461),d=n(92348),l=n(18160),h=n(19953),p=n(25831);async function y(e,t,n){const y=(0,r.Mq)(n),{point:f,distance:g,returnEdge:_,vertexMode:m}=t;if(!_&&"none"===m)return{candidates:[]};let v=(0,s.o8)(t.query);v=await e.schedule((()=>(0,l.T2)(v,e.definitionExpression,e.spatialReference)),y),v=await e.reschedule((()=>(0,h.B4)(v,{availableFields:e.availableFields,fieldsIndex:e.fieldsIndex,geometryType:e.geometryType,spatialReference:e.spatialReference})),y);const w=!(0,a.aI)(f.spatialReference,e.spatialReference);w&&await(0,u.Nk)(f.spatialReference,e.spatialReference);const S="number"==typeof g?g:g.x,I="number"==typeof g?g:g.y,b={xmin:f.x-S,xmax:f.x+S,ymin:f.y-I,ymax:f.y+I,spatialReference:f.spatialReference},x=w?(0,u.Cv)(b,e.spatialReference):b;if(!x)return{candidates:[]};const C=(await(0,o.el)((0,i.rS)(f),null,{signal:y}))[0],M=(await(0,o.el)((0,i.rS)(x),null,{signal:y}))[0];if(null==C||null==M)return{candidates:[]};const E=new d.G(await e.reschedule((()=>e.searchFeatures((0,c.ux)(M.toJSON()))),y),v,e);await e.reschedule((()=>e.executeObjectIdsQuery(E)),y),await e.reschedule((()=>e.executeTimeQuery(E)),y),await e.reschedule((()=>e.executeAttributesQuery(E)),y),await e.reschedule((()=>async function(e,t,n){const{query:s}=t,{spatialRel:r}=s;if(!t?.items?.length||!s.geometry||!r)return;const i=await(0,p.xt)(r,s.geometry,e.geometryType,e.hasZ,e.hasM),o=await e.runSpatialFilter(t.items,(e=>i(e.geometry)),n);t.items=o}(e,E,y)),y);const z=C.toJSON(),F=w?(0,u.Cv)(z,e.spatialReference):z,R=w?Math.max(x.xmax-x.xmin,x.ymax-x.ymin)/2:g;return E.createSnappingResponse({...t,point:F,distance:R},v.returnZ,f.spatialReference)}},25674:function(e,t,n){n.d(t,{_:function(){return i}});var s=n(80347),r=n(12288);class i extends r.m{constructor(e,t,n){super(t,n),this.point=e}equals(e){return e instanceof i&&(0,s.q)(this.point,e.point)}}},32064:function(e,t,n){n.d(t,{n:function(){return u}});n(6273);var s=n(91700),r=n(80294),i=n(37623),o=n(5262),a=n(69172);function u(e=!1,t){if(e){const{elevationInfo:e,alignPointsInFeatures:n}=t;return new d(e,n)}return new c}class c{async alignCandidates(e,t,n){return e}notifyElevationSourceChange(){}}class d{constructor(e,t){this._elevationInfo=e,this._alignPointsInFeatures=t,this._alignmentsCache=new s.q(1024),this._cacheVersion=0}async alignCandidates(e,t,n){const s=this._elevationInfo;return null==s||"absolute-height"!==s.mode||s.featureExpressionInfo?this._alignComputedElevationCandidates(e,t,n):(function(e,t,n){const{offset:s,unit:r}=n;if(null==s)return;const i=(0,o.G9)(t),u=s*((0,a.Ao)(r??"meters")/i);for(const t of e)switch(t.type){case"edge":t.start.z+=u,t.end.z+=u;continue;case"vertex":t.target.z+=u;continue}}(e,t,s),e)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}async _alignComputedElevationCandidates(e,t,n){const s=new Map;for(const t of e)(0,r.tE)(s,t.objectId,p).push(t);const[o,a,u]=this._prepareQuery(s,t),c=await this._alignPointsInFeatures(o,n);if((0,i.Te)(n),u!==this._cacheVersion)return this._alignComputedElevationCandidates(e,t,n);this._applyCacheAndResponse(o,c,a);const{drapedObjectIds:d,failedObjectIds:l}=c,h=[];for(const t of e){const{objectId:e}=t;d.has(e)&&"edge"===t.type&&(t.draped=!0),l.has(e)||h.push(t)}return h}_prepareQuery(e,t){const n=[],s=[];for(const[t,r]of e){const e=[];for(const n of r)this._addToQueriesOrCachedResult(t,n.target,e,s),"edge"===n.type&&(this._addToQueriesOrCachedResult(t,n.start,e,s),this._addToQueriesOrCachedResult(t,n.end,e,s));0!==e.length&&n.push({objectId:t,points:e})}return[{spatialReference:t.toJSON(),pointsInFeatures:n},s,this._cacheVersion]}_addToQueriesOrCachedResult(e,t,n,s){const r=h(e,t),i=this._alignmentsCache.get(r);null==i?n.push(t):s.push(new l(t,i))}_applyCacheAndResponse(e,{elevations:t,drapedObjectIds:n,failedObjectIds:s},r){for(const e of r)e.apply();let i=0;const o=this._alignmentsCache;for(const{objectId:r,points:a}of e.pointsInFeatures){if(s.has(r)){i+=a.length;continue}const e=!n.has(r);for(const n of a){const s=h(r,n),a=t[i++];n.z=a,e&&o.put(s,a,1)}}}}class l{constructor(e,t){this.point=e,this.z=t}apply(){this.point.z=this.z}}function h(e,{x:t,y:n,z:s,spatialReference:r}){return`${e}-${t}-${n}-${s??0}}-wkid:${r?.wkid}`}function p(){return[]}},36329:function(e,t,n){function s(e){let t,n,s=[],r=!1;return function(...i){return r&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(i,s)||(n=e.apply(this,i),t=this,s=i,r=!0),n}}n.d(t,{B:function(){return s}})},60105:function(e,t,n){n.d(t,{T:function(){return r}});var s=n(85747);const r={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new s.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},79002:function(e,t,n){n.d(t,{H:function(){return a}});n(6273);var s=n(15565),r=n(91700),i=n(37623),o=n(21332);function a(e=!1,t){return e?new c(t):new u}class u{async fetch(){return[]}notifySymbologyChange(){}}class c{constructor(e){this._getSymbologyCandidates=e,this._candidatesCache=new r.q(1024),this._cacheVersion=0}async fetch(e,t){if(0===e.length)return[];const n=[],r=[],o=this._candidatesCache;for(const t of e){const e=d(t),i=o.get(e);if(i)for(const e of i)r.push((0,s.o8)(e));else n.push(t),o.put(e,[],1)}if(0===n.length)return r;const a=this._cacheVersion,{candidates:u,sourceCandidateIndices:c}=await this._getSymbologyCandidates(n,t);if((0,i.Te)(t),a!==this._cacheVersion)return this.fetch(e,t);const l=[],{length:h}=u;for(let e=0;e<h;++e){const t=u[e],r=d(n[c[e]]),i=o.get(r);i.push(t),o.put(r,i,i.length),l.push((0,s.o8)(t))}return r.concat(l)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function d(e){switch(e.type){case"vertex":{const{objectId:t,target:n}=e,s=`${t}-vertex-${n.x}-${n.y}-${n.z??0}`;return(0,o.Wm)(s).toString()}case"edge":{const{objectId:t,start:n,end:s}=e,r=`${t}-edge-${n.x}-${n.y}-${n.z??0}-to-${s.x}-${s.y}-${s.z??0}`;return(0,o.Wm)(r).toString()}default:return""}}},81391:function(e,t,n){n.d(t,{z:function(){return o}});n(6273);class s{filter(e,t){return t}notifyElevationSourceChange(){}}class r{filter(e,t){const{point:n,distance:s}=e,{z:r}=n;if(null==r)return t;if(0===t.length)return t;const o=function(e){return"number"==typeof e?{x:e,y:e,z:e}:e}(s),a=this._updateCandidatesTo3D(t,n,o).filter(i);return a.sort(c),a}_updateCandidatesTo3D(e,t,n){for(const s of e)switch(s.type){case"edge":a(s,t,n);continue;case"vertex":u(s,t,n);continue}return e}}function i(e){return e.distance<=1}function o(e=!1){return e?new r:new s}function a(e,t,{x:n,y:s,z:r}){const{start:i,end:o,target:a}=e;e.draped||function(e,t,n,s){const r=s.x-n.x,i=s.y-n.y,o=s.z-n.z,a=r*r+i*i+o*o,u=(t.x-n.x)*r+(t.y-n.y)*i+o*(t.z-n.z),c=Math.min(1,Math.max(0,u/a)),d=n.x+r*c,l=n.y+i*c,h=n.z+o*c;e.x=d,e.y=l,e.z=h}(a,t,i,o);const u=(t.x-a.x)/n,c=(t.y-a.y)/s,d=(t.z-a.z)/r;e.distance=Math.sqrt(u*u+c*c+d*d)}function u(e,t,{x:n,y:s,z:r}){const{target:i}=e,o=(t.x-i.x)/n,a=(t.y-i.y)/s,u=(t.z-i.z)/r,c=Math.sqrt(o*o+a*a+u*u);e.distance=c}function c(e,t){return e.distance-t.distance}},86529:function(e,t,n){n.r(t),n.d(t,{GraphicsSnappingSource:function(){return j}});var s=n(82392),r=n(73783),i=n(3223),o=n(3132),a=n(36329),u=n(37623),c=n(61985),d=n(81482),l=(n(6273),n(80861),n(26325)),h=n(68660),p=n(65648),y=n(34008),f=n(13795),g=n(54483),_=n(5525),m=n(85747),v=n(20713),w=n(91582),S=n(73461),I=n(51387),b=n(19541),x=n(54866),C=n(76362),M=n(12506),E=n(32064),z=n(81391),F=n(79002),R=n(49437);const A="graphics-collections";let j=class extends r.A{get updating(){return this._updatingHandles.updating}get _hasZ(){const e=this.view;return null!=e&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type}get _snappingElevationAligner(){const{view:e}=this,{layer:t}=this.layerSource,n=null!=e&&"3d"===e.type;if(!n||"map-notes"===t.type)return(0,E.n)();return(0,E.n)(n,{elevationInfo:t.elevationInfo,alignPointsInFeatures:async(n,s)=>(await(0,u.qr)(e.whenLayerView(t),s)).elevationAlignPointsInFeatures(n,s)})}get _snappingElevationFilter(){const{view:e}=this,t=null!=e&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type;return(0,z.z)(t)}get _symbologySnappingFetcher(){const{view:e}=this,{layer:t}=this.layerSource,n=null!=e&&"3d"===e.type,s=this._extrudedPolygonSymbolsCount>0;return n&&"map-notes"!==t.type&&s?(0,F.H)(s,(async(n,s)=>{const r=await e.whenLayerView(t);return(0,u.Te)(s),r.queryForSymbologySnapping({candidates:n,spatialReference:e.spatialReference},s)})):(0,F.H)()}constructor(e){super(e),this.availability=1,this._sources={multipoint:null,point:null,polygon:null,polyline:null},this._loadedWkids=new Set,this._loadedWkts=new Set,this._pendingAdds=[],this._extrudedPolygonSymbolsCount=0,this._updatingHandles=new h.U,this._memoizedMakeGetGroundElevation=(0,a.B)(M.p)}destroy(){for(const e of this._pendingAdds)e.task.abort();this._pendingAdds.length=0,this._mapSources((e=>this._destroySource(e))),this._updatingHandles.destroy()}initialize(){this._updatingHandles.add((()=>this.getGraphicsLayers()),(e=>{this._updatingHandles.removeHandles(A);for(const t of e)this._addMany(t.graphics.toArray()),this.addHandles([t.on("graphic-update",(e=>this._onGraphicUpdate(e))),this._updatingHandles.addOnCollectionChange((()=>t.graphics),(e=>this._onGraphicsChanged(e)))],A)}),c.Vh);const{view:e}=this,{layer:t}=this.layerSource;null!=e&&"3d"===e.type&&"map-notes"!==t.type&&e.elevationProvider&&this.addHandles([e.elevationProvider.on("elevation-change",(({context:e})=>{(0,b.Up)(e,t.elevationInfo)&&this._snappingElevationAligner.notifyElevationSourceChange()})),(0,c.wB)((()=>t.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),c.Vh),(0,c.on)((()=>t),["edits","apply-edits","graphic-update"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))])}async fetchCandidates(e,t){const{point:n,coordinateHelper:{spatialReference:s}}=e,r=await(0,u.nA)(this._mapSources((n=>this._fetchCandidatesForSource(n,e,t))));(0,u.Te)(t);const i=this._memoizedMakeGetGroundElevation(this.view,s),o=r.flat().map((e=>(0,M.$)(e,i)));return(0,C.xX)(n,o),o}async _fetchCandidatesForSource(e,t,n){const s=(0,C.nf)({parameters:t,mode:this.view?.type??"2d"}),r=await(0,v.J)(e.queryEngine,s,n);(0,u.Te)(n);const i=await this._snappingElevationAligner.alignCandidates(r.candidates,t.coordinateHelper.spatialReference,n);(0,u.Te)(n);const o=await this._symbologySnappingFetcher.fetch(i,n);(0,u.Te)(n);const a=0===o.length?i:[...i,...o];return this._snappingElevationFilter.filter(s,a)}refresh(){}_onGraphicUpdate(e){if(this.getGraphicsLayers().some((t=>t.graphics.includes(e.graphic))))switch(e.property){case"geometry":case"visible":this._remove(e.graphic),this._addMany([e.graphic])}}_onGraphicsChanged(e){for(const t of e.removed)this._remove(t);this._addMany(e.added)}_addMany(e){const t=[],n=new Map;for(const s of e)null!=s.geometry&&(this._needsInitializeProjection(s.geometry.spatialReference)?(t.push(s.geometry.spatialReference),n.set(s.uid,s)):this._add(s));this._createPendingAdd(t,n)}_createPendingAdd(e,t){if(!e.length)return;const n=(0,o.UT)((async n=>{await(0,y.initializeProjection)(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:n}),this._markLoadedSpatialReferences(e);for(const e of t.values())this._add(e)}));this._updatingHandles.addPromise(n.promise);const s={task:n,graphics:t},r=()=>(0,i.Xy)(this._pendingAdds,s);n.promise.then(r,r),this._pendingAdds.push(s)}_markLoadedSpatialReferences(e){for(const t of e){null!=t.wkid&&this._loadedWkids.add(t.wkid);const e=t.wkt2||t.wkt;e&&this._loadedWkts.add(e)}}_add(e){if(null==e.geometry||!e.visible)return;let t=e.geometry;if("mesh"===t.type)return;"extent"===t.type&&(t=p.A.fromExtent(t));const n=this._ensureSource(t.type);if(null==n)return;const s=this._createOptimizedFeature(e.uid,t);null!=s&&(n.featureStore.add(s),(0,x.f3)(e.symbol)&&this._extrudedPolygonSymbolsCount++)}_needsInitializeProjection(e){if(null!=e.wkid&&this._loadedWkids.has(e.wkid))return!1;const t=e.wkt2||e.wkt;return!(t&&this._loadedWkts.has(t)||(0,y.canProjectWithoutEngine)(e,this.spatialReference))}_createOptimizedFeature(e,t){const n=(0,y.project)((0,f.b3)(t),this.spatialReference);if(!n)return null;const s=this._ensureGeometryHasZ(n),r=(0,_.Ux)(s,this._hasZ,!1);return new m.Om(r,{[k]:e},null,e)}_ensureGeometryHasZ(e){if(!this._hasZ)return e;const t=e=>{for(;e.length<3;)e.push(0)},n=e.clone();switch(n.hasZ=!0,n.type){case"point":n.z=n.z??0;break;case"multipoint":n.points.forEach(t);break;case"polyline":n.paths.forEach((e=>e.forEach(t)));break;case"polygon":n.rings.forEach((e=>e.forEach(t)))}return n}_ensureSource(e){const t=this._sources[e];if(null!=t)return t;const n=this._createSource(e);return this._sources[e]=n,n}_createSource(e){const t=g.gy.toJSON(e),n=this._hasZ,s=new w.A({geometryType:t,hasZ:n,hasM:!1});return{featureStore:s,queryEngine:new S.do({featureStore:s,fieldsIndex:I.A.fromLayerJSON({fields:[{name:k,type:"esriFieldTypeOID",alias:k}]}),geometryType:t,hasM:!1,hasZ:n,featureIdInfo:{type:"object-id",fieldName:k},spatialReference:this.spatialReference,priority:R.W6.SNAPPING,scheduler:null!=this.view&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}_remove(e){this._mapSources((t=>this._removeFromSource(t,e)));for(const t of this._pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}_removeFromSource(e,t){const n=t.uid;e.featureStore.has(n)&&(e.featureStore.removeById(t.uid),(0,x.f3)(t.symbol)&&this._extrudedPolygonSymbolsCount--)}_destroySource(e){e.queryEngine.destroy(),this._sources[e.type]=null}_mapSources(e){const{point:t,polygon:n,polyline:s,multipoint:r}=this._sources,i=[];return null!=t&&i.push(e(t)),null!=n&&i.push(e(n)),null!=s&&i.push(e(s)),null!=r&&i.push(e(r)),i}};(0,s._)([(0,d.MZ)()],j.prototype,"getGraphicsLayers",void 0),(0,s._)([(0,d.MZ)({constructOnly:!0})],j.prototype,"layerSource",void 0),(0,s._)([(0,d.MZ)({constructOnly:!0})],j.prototype,"spatialReference",void 0),(0,s._)([(0,d.MZ)({constructOnly:!0})],j.prototype,"view",void 0),(0,s._)([(0,d.MZ)({readOnly:!0})],j.prototype,"updating",null),(0,s._)([(0,d.MZ)({readOnly:!0})],j.prototype,"availability",void 0),(0,s._)([(0,d.MZ)()],j.prototype,"_hasZ",null),(0,s._)([(0,d.MZ)()],j.prototype,"_snappingElevationAligner",null),(0,s._)([(0,d.MZ)()],j.prototype,"_snappingElevationFilter",null),(0,s._)([(0,d.MZ)()],j.prototype,"_symbologySnappingFetcher",null),(0,s._)([(0,d.MZ)()],j.prototype,"_extrudedPolygonSymbolsCount",void 0),j=(0,s._)([(0,l.$)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],j);const k="OBJECTID"},91582:function(e,t,n){n.d(t,{A:function(){return y}});var s=n(3223),r=n(62991),i=n(57888),o=n(80861),a=n(46373),u=n(2532),c=n(5525),d=n(64411),l=n(84880),h=n(60105);const p=(0,a.vt)();class y{constructor(e){this.geometryInfo=e,this._boundsStore=new d.F,this._featuresById=new Map,this._usedMemory=0,this.events=new i.A,this.featureAdapter=h.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,n,s,r]=this.fullBounds;return{xmin:t,ymin:n,xmax:s,ymax:r,spatialReference:(0,l.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map((e=>this._upsert(e)));return this._emitChanged(),t.filter(s.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t((0,a.Jt)(p,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.A("featurestore:invalid-feature","feature id is missing",{feature:e}));const n=this._featuresById.get(t);let s;if(n?(e.displayId=n.displayId,s=this._boundsStore.get(t),this._boundsStore.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);s=(0,c.jQ)(null!=s?s:(0,u.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=s&&this._boundsStore.set(t,s),this._featuresById.set(t,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const t=e?.objectId;if(null==t)return o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new r.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const n=this._featuresById.get(t);if(!n)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(n)??0;const{geometry:s,attributes:i}=e;for(const e in i)n.attributes[e]=i[e];return s&&(n.geometry=s,this._boundsStore.set(t,(0,c.jQ)((0,u.vt)(),s,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(n)??0,n}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}},98524:function(e,t,n){n.d(t,{C:function(){return o}});var s=n(46984),r=n(86876),i=n(25674);class o extends r.w{constructor(e){super({...e,constraint:new s.i7(e.targetPoint)})}get hints(){return[new i._(this.targetPoint,this.isDraped,this.domain)]}}}}]);