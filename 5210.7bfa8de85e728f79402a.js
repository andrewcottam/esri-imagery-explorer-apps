"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[5210],{25210:function(n,e,t){t.r(e),t.d(e,{classBreaks:function(){return o},heatmapStatistics:function(){return s},histogram:function(){return u},summaryStatistics:function(){return r},uniqueValues:function(){return a}});var i=t(98310),l=t(76408);async function r(n){const{attribute:e,features:t}=n,{normalizationType:r,normalizationField:a,minValue:o,maxValue:u,fieldType:s,outStatisticTypes:c}=e,f=await(0,i.Jc)({field:e.field,valueExpression:e.valueExpression,normalizationType:r,normalizationField:a,normalizationTotal:e.normalizationTotal,viewInfoParams:e.viewInfoParams,timeZone:e.timeZone,fieldInfos:e.fieldInfos},t),m=(0,l.Vb)({normalizationType:r,normalizationField:a,minValue:o,maxValue:u}),d={value:.5,fieldType:s},p="esriFieldTypeString"===s?(0,l.z9)({values:f,supportsNullCount:m,percentileParams:d,outStatisticTypes:c}):(0,l.G_)({values:f,minValue:o,maxValue:u,useSampleStdDev:!r,supportsNullCount:m,percentileParams:d,outStatisticTypes:c});return(0,l.oZ)(p,c,"esriFieldTypeDate"===s)}async function a(n){const{attribute:e,features:t}=n,r=await(0,i.Jc)({field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:e.valueExpression,viewInfoParams:e.viewInfoParams,timeZone:e.timeZone,fieldInfos:e.fieldInfos},t,!1),a=(0,l.b3)(r);return(0,l.lv)(a,e.domains,e.returnAllCodedValues,e.fieldDelimiter)}async function o(n){const{attribute:e,features:t}=n,{field:r,normalizationType:a,normalizationField:o,normalizationTotal:u,classificationMethod:s}=e,c=await(0,i.Jc)({field:r,valueExpression:e.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:u,viewInfoParams:e.viewInfoParams,timeZone:e.timeZone,fieldInfos:e.fieldInfos},t),f=(0,l.Rw)(c,{field:r,normalizationType:a,normalizationField:o,normalizationTotal:u,classificationMethod:s,standardDeviationInterval:e.standardDeviationInterval,numClasses:e.numClasses,minValue:e.minValue,maxValue:e.maxValue});return(0,l.jM)(f,s)}async function u(n){const{attribute:e,features:t}=n,{field:r,normalizationType:a,normalizationField:o,normalizationTotal:u,classificationMethod:s}=e,c=await(0,i.Jc)({field:r,valueExpression:e.valueExpression,normalizationType:a,normalizationField:o,normalizationTotal:u,viewInfoParams:e.viewInfoParams,timeZone:e.timeZone,fieldInfos:e.fieldInfos},t);return(0,l.$y)(c,{field:r,normalizationType:a,normalizationField:o,normalizationTotal:u,classificationMethod:s,standardDeviationInterval:e.standardDeviationInterval,numBins:e.numBins,minValue:e.minValue,maxValue:e.maxValue})}async function s(n){const{attribute:e,features:t}=n,{field:l,radius:r,transform:a,spatialReference:o}=e,u=e.size??[0,0],s=(0,i.$r)(t??[],a,o,u);return(0,i.gV)(s,r??void 0,l,u[0],u[1])}},66220:function(n,e,t){t.d(e,{$X:function(){return S},B2:function(){return a},Gy:function(){return w},IE:function(){return r},P5:function(){return N},Q1:function(){return l},QE:function(){return b},SW:function(){return M},Tr:function(){return D},VV:function(){return i},wp:function(){return F}});t(56053);function i(n){return n?{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance,1,1]:[1,1,1,1],translate:null!=n.extent?[n.extent.xmin,n.extent.ymax,n.extent.zmin??0,n.extent.mmin??0]:[0,0,0,0]}:null}function l(n){if(function(n){return"lowerLeft"===n.originPosition&&4===n.scale.length&&4===n.translate.length}(n))return n;const{originPosition:e,scale:t,translate:i}=n,l=t[0]??1,r=t[1]??1;return{originPosition:"lowerLeft",scale:[l,"lowerLeft"===e?r:-r,t[2]??1,t[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function r({scale:n,translate:e},t){return Math.round((t-e[0])/n[0])}function a({scale:n,translate:e},t){return Math.round((t-e[1])/n[1])}function o({scale:n,translate:e},t){return Math.round(((t??0)-e[2])/n[2])}function u({scale:n,translate:e},t){return t?Math.round((t-e[3])/n[3]):0}function s(n,e){return n&&e?d:n&&!e?f:!n&&e?m:c}const c=(n,e)=>{const t=[];if(!e.length)return null;const i=e[0];let l=r(n,i[0]),o=a(n,i[1]);t.push([l,o]);for(let i=1;i<e.length;i++){const[u,s]=e[i],c=r(n,u),f=a(n,s);c===l&&f===o||t.push([c-l,f-o]),l=c,o=f}return t},f=(n,e)=>{const t=[];if(!e.length)return null;const i=e[0];let l=r(n,i[0]),u=a(n,i[1]),s=o(n,i[2]);t.push([l,u,s]);for(let i=1;i<e.length;i++){const[c,f,m]=e[i],d=r(n,c),p=a(n,f),h=o(n,m);d===l&&p===u&&h===s||t.push([d-l,p-u,h]),l=d,u=p,s=h}return t},m=(n,e)=>{const t=[];if(!e.length)return null;const i=e[0];let l=r(n,i[0]),o=a(n,i[1]),s=u(n,i[2]);t.push([l,o,s]);for(let i=1;i<e.length;i++){const[c,f,m]=e[i],d=r(n,c),p=a(n,f),h=u(n,m);d===l&&p===o&&h===s||t.push([d-l,p-o,h]),l=d,o=p,s=h}return t},d=(n,e)=>{const t=[];if(!e.length)return null;const i=e[0];let l=r(n,i[0]),s=a(n,i[1]),c=o(n,i[2]),f=u(n,i[3]);t.push([l,s,c,f]);for(let i=1;i<e.length;i++){const[m,d,p,h]=e[i],g=r(n,m),v=a(n,d),y=o(n,p),x=u(n,h);g===l&&v===s&&y===c&&x===f||t.push([g-l,v-s,y,x]),l=g,s=v,c=y,f=x}return t};function p({scale:n,translate:e},t){return t*n[0]+e[0]}function h({scale:n,translate:e},t){return t*n[1]+e[1]}function g({scale:n,translate:e},t){return(t??0)*n[2]+e[2]}function v({scale:n,translate:e},t){return t?t*n[3]+e[3]:0}function y(n,e){return n&&e?I:n&&!e?T:!n&&e?z:x}const x=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const i=e[0];let l=p(n,i[0]),r=h(n,i[1]);t[0]=[l,r];const{scale:a,originPosition:o}=n,u=a[0],s="lowerLeft"===o?a[1]:-a[1];for(let n=1;n<e.length;n++){const[i,a]=e[n];l+=u*i,r+=s*a,t[n]=[l,r]}return t},T=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const i=e[0];let l=p(n,i[0]),r=h(n,i[1]);t[0]=[l,r,g(n,i[2])];const{scale:a,originPosition:o}=n,u=a[0],s="lowerLeft"===o?a[1]:-a[1];for(let i=1;i<e.length;i++){const[a,o,c]=e[i];l+=u*a,r+=s*o,t[i]=[l,r,g(n,c)]}return t},z=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const i=e[0];let l=p(n,i[0]),r=h(n,i[1]);t[0]=[l,r,v(n,i[2])];const{scale:a,originPosition:o}=n,u=a[0],s="lowerLeft"===o?a[1]:-a[1];for(let i=1;i<e.length;i++){const[a,o,c]=e[i];l+=u*a,r+=s*o,t[i]=[l,r,v(n,c)]}return t},I=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const i=e[0];let l=p(n,i[0]),r=h(n,i[1]);t[0]=[l,r,g(n,i[2]),v(n,i[3])];const{scale:a,originPosition:o}=n,u=a[0],s="lowerLeft"===o?a[1]:-a[1];for(let i=1;i<e.length;i++){const[a,o,c,f]=e[i];l+=u*a,r+=s*o,t[i]=[l,r,g(n,c),v(n,f)]}return t};function V(n,e,t){const i=new Array(t.length);for(let l=0;l<t.length;l++)i[l]=e(n,t[l]);return i}function w(n,e,t){const i=l(n);return e.x=r(i,t.x),e.y=a(i,t.y),null!=t.z&&(e.z=o(i,t.z)),null!=t.m&&(e.m=u(i,t.m)),e}function F(n,e,t){const i=function(n,e,t,i){const l=[],r=s(t,i);for(let t=0;t<e.length;t++){const i=r(n,e[t]);i&&i.length>=3&&l.push(i)}return l.length?l:null}(l(n),t.rings,t.hasZ,t.hasM);return i?(e.rings=i,e.hasZ=t.hasZ??!1,e.hasM=t.hasM??!1,e):null}function b(n,e,t){const i=function(n,e,t,i){const l=[],r=s(t,i);for(let t=0;t<e.length;t++){const i=r(n,e[t]);i&&i.length>=2&&l.push(i)}return l.length?l:null}(l(n),t.paths,t.hasZ,t.hasM);return i?(e.paths=i,e.hasZ=t.hasZ??!1,e.hasM=t.hasM??!1,e):null}function M(n,e,t,i=t?.hasZ??!1,r=t?.hasM??!1){if(null!=t){const a=l(n);e.points=y(i,r)(a,t.points),e.hasZ=i,e.hasM=r}return e}function D(n,e,t,i=null!=t?.z,r=null!=t?.m){if(null==t)return e;const a=l(n);return e.x=p(a,t.x),e.y=h(a,t.y),i&&(e.z=g(a,t.z)),r&&(e.m=v(a,t.m)),e}function S(n,e,t,i=t?.hasZ??!1,r=t?.hasM??!1){if(null!=t){const a=l(n);e.rings=V(a,y(i,r),t.rings),e.hasZ=i,e.hasM=r}return e}function N(n,e,t,i=t?.hasZ??!1,r=t?.hasM??!1){if(null!=t){const a=l(n);e.paths=V(a,y(i,r),t.paths),e.hasZ=i,e.hasM=r}return e}},76408:function(n,e,t){t.d(e,{$y:function(){return G},Ak:function(){return B},FM:function(){return x},G_:function(){return v},OR:function(){return _},Rw:function(){return A},Vb:function(){return h},al:function(){return L},b3:function(){return E},gJ:function(){return p},jM:function(){return O},lv:function(){return $},oZ:function(){return C},qg:function(){return y},sU:function(){return U},wy:function(){return d},z9:function(){return g},zS:function(){return k}});var i=t(75809),l=t(31405);const r="<Null>",a="equal-interval",o=1,u=5,s=10,c=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,f=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),m=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),d=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function p(n){return null==n||"string"==typeof n&&!n?r:n}function h(n){const e=null!=n.normalizationField||null!=n.normalizationType,t=null!=n.minValue||null!=n.maxValue,i=!!n.sqlExpression&&n.supportsSQLExpression;return!e&&!t&&!i}function g(n){const{outStatisticTypes:e}=n,t=n.returnDistinct?[...new Set(n.values)]:n.values,i=t.filter((n=>null!=n)).sort(),l=i.length,r={count:l,min:i[0],max:i[l-1]};return n.supportsNullCount&&(r.nullcount=t.length-l),!n.percentileParams||e?.include?.length&&!e.include.includes("median")||e?.exclude?.length&&e.exclude.includes("median")||(r.median=y(t,n.percentileParams)),r}function v(n){const{values:e,useSampleStdDev:t,supportsNullCount:i,outStatisticTypes:l}=n;let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=null,u=null,s=null,c=null,f=0;const m=null==n.minValue?-1/0:n.minValue,d=null==n.maxValue?1/0:n.maxValue;for(const n of e)Number.isFinite(n)?n>=m&&n<=d&&(o=null===o?n:o+n,r=Math.min(r,n),a=Math.max(a,n),f++):"string"==typeof n&&f++;if(f&&null!=o){u=o/f;let n=0;for(const t of e)Number.isFinite(t)&&t>=m&&t<=d&&(n+=(t-u)**2);c=t?f>1?n/(f-1):0:f>0?n/f:0,s=Math.sqrt(c)}else r=null,a=null;const p={avg:u,count:f,max:a,min:r,stddev:s,sum:o,variance:c};return i&&(p.nullcount=e.length-f),!n.percentileParams||l?.include?.length&&!l.include.includes("median")||l?.exclude?.length&&l.exclude.includes("median")||(p.median=y(e,n.percentileParams)),p}function y(n,e){const{fieldType:t,value:i,orderBy:l,isDiscrete:r}=e,a=x(t,"desc"===l);if(0===(n=[...n].filter((n=>null!=n)).sort(((n,e)=>a(n,e)))).length)return null;if(i<=0)return n[0];if(i>=1)return n[n.length-1];const o=(n.length-1)*i,u=Math.floor(o),s=u+1,c=o%1,f=n[u],m=n[s];return s>=n.length||r||"string"==typeof f||"string"==typeof m?f:f*(1-c)+m*c}function x(n,e){if(n){if(f.has(n))return N(e);if(m.has(n))return M(e,!1);if("esriFieldTypeTimestampOffset"===n)return function(n){return n?w:V}(e);const t=M(e,!0);if("esriFieldTypeString"===n)return t;if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n)return(n,e)=>t(P(n),P(e))}const t=e?1:-1,i=N(e),l=M(e,!0),r=I(e);return(n,e)=>"number"==typeof n&&"number"==typeof e?i(n,e):"string"==typeof n&&"string"==typeof e?l(n,e):r(n,e)??t}const T=(n,e)=>null==n?null==e?0:1:null==e?-1:null,z=(n,e)=>null==n?null==e?0:-1:null==e?1:null;function I(n){return n?T:z}const V=(n,e)=>z(n,e)??(n===e?0:new Date(n).getTime()-new Date(e).getTime()),w=(n,e)=>T(n,e)??(n===e?0:new Date(e).getTime()-new Date(n).getTime());const F=(n,e)=>z(n,e)??(n===e?0:n<e?-1:1),b=(n,e)=>T(n,e)??(n===e?0:n<e?1:-1);function M(n,e){if(!e)return n?b:F;const t=I(n);return n?(n,e)=>{const i=t(n,e);return null!=i?i:(n=n.toUpperCase())>(e=e.toUpperCase())?-1:n<e?1:0}:(n,e)=>{const i=t(n,e);return null!=i?i:(n=n.toUpperCase())<(e=e.toUpperCase())?-1:n>e?1:0}}const D=(n,e)=>T(n,e)??e-n,S=(n,e)=>z(n,e)??n-e;function N(n){return n?D:S}function P(n){return n.slice(24,36)+n.slice(19,23)+n.slice(16,18)+n.slice(14,16)+n.slice(11,13)+n.slice(9,11)+n.slice(6,8)+n.slice(4,6)+n.slice(2,4)+n.slice(0,2)}function C(n,e,t){let i;for(i in n)e?.include?.length&&!e.include.includes(i)||e?.exclude?.length&&e.exclude.includes(i)?delete n[i]:d.includes(i)&&(Number.isFinite(n[i])||(n[i]=null));return t?(["avg","stddev","variance"].forEach((e=>{null!=n[e]&&(n[e]=Math.ceil(n[e]??0))})),n):n}function E(n){const e={};for(let t of n)(null==t||"string"==typeof t&&""===t.trim())&&(t=null),null==e[t]?e[t]={count:1,data:t}:e[t].count++;return{count:e}}function Z(n){return"coded-value"!==n?.type?[]:n.codedValues.map((n=>n.code))}function $(n,e,t,i){const l=n.count,r=[];if(t&&e){const n=[],t=Z(e[0]);for(const l of t)if(e[1]){const t=Z(e[1]);for(const r of t)if(e[2]){const t=Z(e[2]);for(const e of t)n.push(`${p(l)}${i}${p(r)}${i}${p(e)}`)}else n.push(`${p(l)}${i}${p(r)}`)}else n.push(l);for(const e of n)l.hasOwnProperty(e)||(l[e]={data:e,count:0})}for(const n in l){const e=l[n];r.push({value:e.data,count:e.count,label:e.label})}return{uniqueValueInfos:r}}function k(n,e,t,i){let l=null;switch(e){case"log":0!==n&&(l=Math.log(n)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(i)&&0!==i&&(l=n/i*100);break;case"field":Number.isFinite(t)&&0!==t&&(l=n/t);break;case"natural-log":n>0&&(l=Math.log(n));break;case"square-root":n>0&&(l=n**.5)}return l}function A(n,e,t){const i=L({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,definedInterval:e.definedInterval,breakCount:e.numClasses||u});return n=function(n,e,t){const i=e??-1/0,l=t??1/0;return n.filter((n=>Number.isFinite(n)&&n>=i&&n<=l))}(n,e.minValue,e.maxValue),(0,l.t)({definition:i,values:n,normalizationTotal:e.normalizationTotal},t)}function L(n){const{breakCount:e,field:t,normalizationField:l,normalizationType:r}=n,u=n.classificationMethod||a,s="standard-deviation"===u?n.standardDeviationInterval||o:void 0,c="defined-interval"===u?n.definedInterval:void 0;return new i.A({breakCount:e,classificationField:t,classificationMethod:u,normalizationField:"field"===r?l:void 0,normalizationType:r,standardDeviationInterval:s,definedInterval:c})}function O(n,e){let t=n.classBreaks;const i=t.length,l=t[0]?.minValue,r=t[i-1]?.maxValue,a="standard-deviation"===e,o=c;return t=t.map((n=>{const e=n.label,t={minValue:n.minValue,maxValue:n.maxValue,label:e};if(a&&e){const n=e.match(o),i=n?.map((n=>+n.trim()))??[];2===i.length?(t.minStdDev=i[0],t.maxStdDev=i[1],i[0]<0&&i[1]>0&&(t.hasAvg=!0)):1===i.length&&(e.includes("<")?(t.minStdDev=null,t.maxStdDev=i[0]):e.includes(">")&&(t.minStdDev=i[0],t.maxStdDev=null))}return t})),{minValue:l,maxValue:r,classBreakInfos:t,normalizationTotal:n.normalizationTotal}}function G(n,e){const t=U(n,e);if(null==t.min&&null==t.max)return{bins:[],minValue:t.min,maxValue:t.max,normalizationTotal:e.normalizationTotal};const i=t.intervals,l=t.min??0,r=t.max??0,a=i.map(((n,e)=>({minValue:i[e][0],maxValue:i[e][1],count:0})));for(const e of n)if(null!=e&&e>=l&&e<=r){const n=B(i,e);n>-1&&a[n].count++}return{bins:a,minValue:l,maxValue:r,normalizationTotal:e.normalizationTotal}}function U(n,e,t=!1){const{field:i,classificationMethod:l,standardDeviationInterval:r,definedInterval:a,normalizationType:o,normalizationField:u,normalizationTotal:c,minValue:f,maxValue:m}=e,d=e.numBins||s;let p=null,g=null,y=null;if(l&&"equal-interval"!==l||o){const{classBreaks:e}=A(n,{field:i,normalizationType:o,normalizationField:u,normalizationTotal:c,classificationMethod:l,standardDeviationInterval:r,definedInterval:a,minValue:f,maxValue:m,numClasses:d},null!=f&&null!=m?[f,m]:void 0);p=e[0]?.minValue,g=e[e.length-1]?.maxValue,y=e.map((n=>[n.minValue,n.maxValue]))}else{if(null!=f&&null!=m)p=f,g=m;else{const e=v({values:n,minValue:f,maxValue:m,useSampleStdDev:!o,supportsNullCount:h({normalizationType:o,normalizationField:u,minValue:f,maxValue:m})});p=e.min??null,g=e.max??null}y=_(p??0,g??0,d)}if(t&&y.length){const n=y.at(-1)[1];y.push([n,n])}return{min:p,max:g,intervals:y}}function B(n,e){let t=-1;for(let i=n.length-1;i>=0;i--)if(e>=n[i][0]){t=i;break}return t}function _(n,e,t){const i=(e-n)/t,l=[];let r,a=n;for(let n=1;n<=t;n++)r=a+i,r=Number(r.toFixed(16)),l.push([a,n===t?e:r]),a=r;return l}},98310:function(n,e,t){t.d(e,{$r:function(){return v},Jc:function(){return T},Lc:function(){return z},MH:function(){return F},Wk:function(){return w},gV:function(){return y},lX:function(){return I},rb:function(){return x},sf:function(){return V}});var i=t(62991),l=t(23572),r=t(11895),a=t(1912),o=t(44153),u=t(66220),s=t(67488),c=t(46227),f=t(10961),m=t(74274),d=t(76408),p=t(68717);let h=null;const g=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function v(n,e,t,i){const l=(0,s.d9)(t)?(0,s.Vp)(t):null,r=l?Math.round((l.valid[1]-l.valid[0])/e.scale[0]):null;return n.map((n=>{const t=new a.A(n.geometry);return(0,u.Gy)(e,t,t),n.geometry=l?function(n,e,t){return n.x<0?n.x+=e:n.x>t&&(n.x-=e),n}(t,r??0,i[0]):t,n}))}function y(n,e=18,t,i,r){const a=new Float64Array(i*r);e=Math.round((0,l.Lz)(e));let o=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;const s=(0,f.YW)(t);for(const{geometry:t,attributes:l}of n){const{x:n,y:c}=t,m=Math.max(0,n-e),d=Math.max(0,c-e),p=Math.min(r,c+e),h=Math.min(i,n+e),g=+s(l);for(let t=d;t<p;t++)for(let l=m;l<h;l++){const r=t*i+l,s=(0,f.hv)(l-n,t-c,e)*g,m=a[r]+=s;o=Math.min(o,m),u=Math.max(u,m)}}return{min:o,max:u}}function x(n){const e=g.exec(n);if(!e)return null;const{hh:t,mm:i,ss:l,ms:a}=e.groups;return Number(t)*r.vf.hours+Number(i)*r.vf.minutes+Number(l)*r.vf.seconds+Number(a||0)}async function T(n,e,t=!0){if(!e)return[];const{field:i,field2:l,field3:r,fieldDelimiter:a,fieldInfos:u,timeZone:s}=n,f=i&&u?.find((n=>n.name.toLowerCase()===i.toLowerCase())),g=!!f&&(0,c.OH)(f),v=!!f&&(0,m.fs)(f),y=n.valueExpression,T=n.normalizationType,z=n.normalizationField,I=n.normalizationTotal,V=[],w=n.viewInfoParams;let F=null,b=null;if(y){if(!h){const{arcadeUtils:n}=await(0,p.l)();h=n}h.hasGeometryOperations(y)&&await h.enableGeometryOperations(),F=h.createFunction(y),b=w?h.getViewInfo({viewingMode:w.viewingMode,scale:w.scale,spatialReference:new o.A(w.spatialReference)}):null}const M=n.fieldInfos,D=e[0]&&"declaredClass"in e[0]&&"esri.Graphic"===e[0].declaredClass||!M?null:{fields:M};return e.forEach((n=>{const e=n.attributes;let o;if(y){const e=D?{...n,layer:D}:n,t=h.createExecContext(e,b,s);o=h.executeFunction(F,t)}else e&&(o=e[i],l?(o=`${(0,d.gJ)(o)}${a}${(0,d.gJ)(e[l])}`,r&&(o=`${o}${a}${(0,d.gJ)(e[r])}`)):"string"==typeof o&&t&&(v?o=o?new Date(o).getTime():null:g&&(o=o?x(o):null)));if(T&&"number"==typeof o&&isFinite(o)){const n=e&&parseFloat(e[z]);o=(0,d.zS)(o,T,n,I)}V.push(o)})),V}function z(n){const e=n.field,t=n.normalizationType,i=n.normalizationField;let l;return"field"===t?l="(NOT "+i+" = 0)":"log"!==t&&"natural-log"!==t&&"square-root"!==t||(l=`(${e} > 0)`),l}function I(n,e,t){const i=null!=e?n+" >= "+e:"",l=null!=t?n+" <= "+t:"";let r="";return r=i&&l?V(i,l):i||l,r?"("+r+")":""}function V(n,e){let t=null!=n?n:"";return null!=e&&e&&(t=t?"("+t+") AND ("+e+")":e),t}function w(n,e){if(n&&"intersects"!==n.spatialRelationship)return new i.A(e,"Only 'intersects' spatialRelationship is supported for featureFilter")}function F(n,e,t){const l=function(n){const e=n.layer;return n.fields.filter((n=>!e.getField(n)))}({layer:n,fields:e});if(l.length)return new i.A(t,"Unknown fields: "+l.join(", ")+". You can only use fields defined in the layer schema");const r=function(n){const e=n.layer;return n.fields.filter((n=>{const t=e.getFieldUsageInfo(n);return!t||!t.supportsStatistics}))}({layer:n,fields:e});return r.length?new i.A(t,"Unsupported fields: "+r.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}}}]);