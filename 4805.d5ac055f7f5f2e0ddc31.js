"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[4805],{76004:function(e,n,t){t.d(n,{$P:function(){return m},At:function(){return I},Et:function(){return d},J6:function(){return i},JB:function(){return w},Kg:function(){return y},Lk:function(){return g},NI:function(){return A},Qi:function(){return G},Tf:function(){return S},eB:function(){return D},eg:function(){return v},f0:function(){return F},gO:function(){return h},ik:function(){return b},ke:function(){return f},nE:function(){return p},rX:function(){return T},yT:function(){return x},zl:function(){return r}});var r,i,o,l=t(28300),u=t(76902),s=t(3991),a=t(45352),c=t(96285);function f(e){return a.A.fromJSON(e.toJSON())}function p(e){return e.toJSON?e.toJSON():e}function y(e){return"string"==typeof e||e instanceof String}function d(e){return"number"==typeof e}function m(e){return e instanceof Date}function g(e){return e instanceof c.c9}function T(e){return e instanceof l.lY}function F(e){return e instanceof u.n}function v(e){return e instanceof s.k}function S(e,n){return e===n||!(!m(e)&&!T(e)||!m(n)&&!T(n))&&e.getTime()===n.getTime()}(o=r||(r={}))[o.Standardised=0]="Standardised",o[o.StandardisedNoInterval=1]="StandardisedNoInterval",o[o.SqlServer=2]="SqlServer",o[o.Oracle=3]="Oracle",o[o.Postgres=4]="Postgres",o[o.PGDB=5]="PGDB",o[o.FILEGDB=6]="FILEGDB",o[o.NotEvaluated=7]="NotEvaluated",function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(i||(i={}));const h=1e3;const b={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},x={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},I={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function G(e){return void 0===e?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function w(e,n){n||(n={}),"function"==typeof n&&(n={cmp:n});const t="boolean"==typeof n.cycles&&n.cycles,r=n.cmp&&(i=n.cmp,function(e){return function(n,t){const r={key:n,value:e[n]},o={key:t,value:e[t]};return i(r,o)}});var i;const o=[];return function e(n){if(n?.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===n)return;if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!=typeof n)return JSON.stringify(n);let i,l;if(Array.isArray(n)){for(l="[",i=0;i<n.length;i++)i&&(l+=","),l+=e(n[i])||"null";return l+"]"}if(null===n)return"null";if(o.includes(n)){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const u=o.push(n)-1,s=Object.keys(n).sort(r?.(n));for(l="",i=0;i<s.length;i++){const t=s[i],r=e(n[t]);r&&(l&&(l+=","),l+=JSON.stringify(t)+":"+r)}return o.splice(u,1),"{"+l+"}"}(e)}function A(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function D(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return A(e)}}},85682:function(e,n,t){t.r(n),t.d(n,{Dictionary:function(){return l.A},Voxel:function(){return d},arcade:function(){return r.h},arcadeFeature:function(){return u.A},convertFeatureLayerToFeatureSet:function(){return B},convertJsonToArcade:function(){return V},convertMapToFeatureSetCollection:function(){return R},convertServiceUrlToWorkspace:function(){return M},createExecContext:function(){return D},createFeature:function(){return O},createFunction:function(){return A},createSyntaxTree:function(){return w},dependsOnView:function(){return L},enableFeatureSetOperations:function(){return z},enableGeometryOperations:function(){return j},evalSyntaxTree:function(){return P},executeAsyncFunction:function(){return N},executeFunction:function(){return E},extractFieldNames:function(){return J},getArcadeType:function(){return G},getViewInfo:function(){return C},hasGeometryFunctions:function(){return Y},hasGeometryOperations:function(){return K},hasVariable:function(){return $},loadScriptDependencies:function(){return X},updateExecContext:function(){return _}});var r=t(23542),i=t(28300),o=t(25107),l=t(68476),u=t(96480),s=t(82951),a=t(90364),c=t(72005),f=t(42663);const p="Voxel.Position",y="Voxel.LocalTime";class d{constructor(e,n){this._graphic=e,this._timeZone=n,this.arcadeDeclaredClass="esri.arcade.Voxel",this._layer=e.sourceLayer}getPosition(){return void 0!==this._position?this._position:this._position=function(e){const n=e.getAttribute(p);if("string"!=typeof n)throw new a.D$(null,a.TX.InvalidParameter,null);const t=JSON.parse(n);if(!Array.isArray(t)||"number"!=typeof t[0]||"number"!=typeof t[1]||"number"!=typeof t[2])throw new a.D$(null,a.TX.InvalidParameter,null);return new c.A(t)}(this._graphic)}getLocalTime(){return void 0!==this._localTime?this._localTime:this._localTime=function(e,n){const t=e.getAttribute(y);if(null==t)return null;if(!(0,f.$P)(t))throw new a.D$(null,a.TX.InvalidParameter,null);return i.lY.dateJSAndZoneToArcadeDate(t,n)}(this._graphic,this._timeZone??"system")}keys(){return this._layer.fields.map((e=>e.name)).sort()}hasField(e){return this._layer.fieldsIndex.has(e)}field(e){const n=this._layer.fieldsIndex?.get(e)?.name;if(null==n)throw new a.D$(null,a.TX.FieldNotFound,null,{key:e});switch(n){case p:return this.getPosition();case y:return this.getLocalTime()}return this._graphic.attributes[n]??null}castToText(e=!1){const n={...this._graphic.attributes};n[p]=this.getPosition(),y in n&&(n[y]=this.getLocalTime());for(const e of Object.keys(n))this._layer.fieldsIndex?.has(e)||delete n[e];return(0,s.c)(n,{useNumbersForDates:e})}}var m=t(15565),g=t(76902),T=t(3991),F=t(8e3),v=t(67709),S=t(1912),h=t(65648),b=t(38648);const x={vars:{$feature:"any",$view:"any"}};function I(e){return e.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function G(e){return null==e?null:(0,f.cy)(e)||(0,s.j)(e)?"array":(0,s.e)(e)?"date":(0,f.Kg)(e)?"text":(0,f.Lm)(e)?"boolean":(0,f.Et)(e)?"number":e instanceof l.A?"dictionary":(0,s.k)(e)?"feature":e instanceof S.A?"point":e instanceof h.A?"polygon":e instanceof b.A?"polyline":e instanceof v.A?"multipoint":e instanceof F.A?"extent":e instanceof g.n?"dateOnly":e instanceof T.k?"time":(0,s.m)(e)?"featureSet":(0,s.l)(e)?"featureSetCollection":null}function w(e){if(!e)return null;try{return(0,r.p)(e)}catch(e){}return null}function A(e,n){const t="string"==typeof e?w(e):e;if(!t)return null;try{return n=n||(0,m.o8)(x),(0,r.c)(t,n)}catch(e){}return null}function D(e,n,t){return{vars:{$feature:null==e?new u.A:u.A.createFromGraphic(e,t),$view:n?.view},spatialReference:n?.sr,timeZone:t??null}}function O(e,n,t){return u.A.createFromGraphicLikeObject(n,e,t,null)}function _(e,n){null!=e.vars&&(e.vars.$feature=n)}function P(e,n){let t;try{t=(0,r.e)(e,n)}catch(e){t=null}return t}function E(e,n){let t;try{t=e?e(n):null}catch(e){t=null}return t}function N(e,n){try{return e?e(n):Promise.resolve(null)}catch(e){return Promise.resolve(null)}}const k=new Set(["$feature","$aggregatedFeatures","$voxel"].map((e=>(0,o.X)(e))));function J(e,n){if(!e)return[];const t="string"==typeof e?w(e):e;if(!t)return[];const i=(0,r.a)(t).filter((({varId:e})=>k.has(e))).map((({memberNamePattern:e})=>e)).flatMap((e=>{if(e.includes("*")){if(null==n)return[];const t=new RegExp(`^${e.split(/\*+/).map(I).join(".*")}$`,"i");return n.filter((e=>t.test(e)))}return e.toLowerCase()}));return[...new Set(i.sort())]}function L(e){return(0,r.r)(e,"$view")}function $(e,n){return!!e&&(0,r.r)(e,n)}function C(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;let n,t;const{timeProperties:r,timeZone:o}=e;if(null!=r){const{currentStart:e,currentEnd:l}=r;null!=o?(n=null!=e?i.lY.dateJSAndZoneToArcadeDate(e,o):null,t=null!=l?i.lY.dateJSAndZoneToArcadeDate(l,o):null):(n=null!=e?i.lY.dateJSToArcadeDate(e):null,t=null!=l?i.lY.dateJSToArcadeDate(l):null)}return{view:e.viewingMode&&null!=e.scale?new l.A({__proto__:null,viewingMode:e.viewingMode,scale:e.scale,timeProperties:null!=n||null!=t?new l.A({__proto__:null,currentStart:n,currentEnd:t,startIncluded:!0,endIncluded:!0}):null}):null,sr:e.spatialReference}}function M({url:e,spatialReference:n,lrucache:t,interceptor:i}){const o=(0,r.f)();return o?o.createFeatureSetCollectionFromService(e,n,t,i):null}function B({layer:e,spatialReference:n,outFields:t,returnGeometry:i,lrucache:o,interceptor:l}){if(null===e)return null;const u=(0,r.f)();return u?u.constructFeatureSet(e,n,t,i??!0,o,l):null}function R(e){if(null===e?.map)return null;const n=(0,r.f)();return n?n.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function V(e,n){return l.A.convertJsonToArcade(e,n)}function X(e,n,t=[]){return(0,r.l)(e,n,t)}function j(){return(0,r.b)()}function z(){return(0,r.d)()}function Z(e,n){if(!e)return!1;if("string"==typeof e)return n(e);const t=e;if(function(e){return"type"in e&&("class-breaks"===e.type||"dictionary"===e.type||"dot-density"===e.type||"pie-chart"===e.type||"simple"===e.type||"unique-value"===e.type)}(t)){if("dot-density"===t.type){const e=t.attributes?.some((e=>n(e.valueExpression)));if(e)return e}const e=t.visualVariables,r=!!e&&e.some((e=>{let t=n(e.valueExpression);return"size"===e.type&&(Q(e.minSize)&&(t=t||n(e.minSize.valueExpression)),Q(e.maxSize)&&(t=t||n(e.maxSize.valueExpression))),t}));return!(!("valueExpression"in t)||!n(t.valueExpression))||r}if(function(e){return"esri.layers.support.LabelClass"===e.declaredClass}(t)){const e=t.labelExpressionInfo?.expression;return!(!e||!n(e))||!1}return!!function(e){return"esri.PopupTemplate"===e.declaredClass}(t)&&(!!t.expressionInfos&&t.expressionInfos.some((e=>n(e.expression)))||Array.isArray(t.content)&&t.content.some((e=>"expression"===e.type&&n(e.expressionInfo?.expression))))}function U(e){const n=w(e);return!!n&&(0,r.s)(n)}function Y(e){return Z(e,U)}function q(e){const n=w(e);return!!n&&(0,r.g)(n)}function K(e){return Z(e,q)}function Q(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}}}]);