"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[918],{15193:function(e,t,n){n.d(t,{R:function(){return o}});var r=n(83382);function o(e,t){return null===e?t:new r.A({url:e.field("url")})}},23783:function(e,t,n){n.d(t,{A:function(){return p}});var r=n(82392),o=n(81482),i=(n(6273),n(80861),n(67498),n(26325)),a=n(44153),s=n(73783);let u=class extends s.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,o.MZ)()],u.prototype,"openCypherQuery",void 0),u=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQuery")],u);let p=class extends u{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r._)([(0,o.MZ)()],p.prototype,"bindParameters",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"outputQuantizationParameters",void 0),(0,r._)([(0,o.MZ)({type:a.A})],p.prototype,"outputSpatialReference",void 0),(0,r._)([(0,o.MZ)()],p.prototype,"provenanceBehavior",void 0),p=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],p)},28530:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(82392),o=n(84977),i=n(81482),a=(n(6273),n(80861),n(67498),n(26325)),s=n(92450);let u=class extends o.A{constructor(e){super(e),this.path=[]}};(0,r._)([(0,i.MZ)({type:[s.A],json:{write:!0}})],u.prototype,"path",void 0),u=(0,r._)([(0,a.$)("esri.rest.knowledgeGraph.Path")],u)},60097:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(82392),o=(n(80861),n(6273),n(67498),n(62991),n(26325)),i=n(92450);let a=class extends i.A{constructor(e){super(e)}};a=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.ObjectValue")],a)},70918:function(e,t,n){n.r(t),n.d(t,{registerFunctions:function(){return M}});var r=n(32083),o=n(42754),i=n(68476),a=n(90364),s=n(82951),u=n(15193),p=n(61064),l=n(34008),c=n(44153),d=n(64672),f=n(83382),h=n(43305),y=n(35497),g=n(81114),w=n(23783),m=n(60097),v=n(28530),A=n(95324),_=n(15697),G=n(42663);let S=null;async function x(e,t){const r=new h.default({portal:e,id:t});return await r.load(),null===S&&(S=await n.e(8259).then(n.bind(n,88259))),await S.fetchKnowledgeGraph(r.url)}function R(e,t,n,r,o){if(null===e)return null;if((0,G.Kg)(e)||(0,G.Et)(e))return e;if((0,s.e)(e))return e.toJSDate();if((0,s.e)(e))return e.toJSDate();if((0,s.f)(e))return e.toStorageFormat();if((0,s.g)(e))return e.toStorageString();if((0,s.n)(e)){const i={};for(const a of e.keys())i[a]=R(e.field(a),t,n,r,o),i[a]instanceof p.A&&o.push({container:i,indexer:a});return i}if((0,G.cy)(e)){const i=e.map((e=>R(e,t,n,r,o)));for(let e=0;e<i.length;e++)i[e]instanceof p.A&&o.push({container:i,indexer:e});return i}return(0,s.h)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&t?(0,d.ci)(e):e:void 0}function b(e,t){if(!e)return null;const n={};for(const r in e)n[r]=k(e[r],t);return n}function k(e,t){return null===e?null:(0,G.cy)(e)?e.map((e=>k(e,t))):e instanceof g.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:b(e.properties,t)}:e instanceof m.A?{graphType:"object",properties:b(e.properties,t)}:e instanceof A.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:b(e.properties,t)}:e instanceof v.A?{graphType:"path",path:e.path?e.path.map((e=>k(e,t))):null}:(0,s.h)(e)?function(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,d.Gh)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.D$(t,a.TX.WrongSpatialReference,null)}(e,t):(0,G.Kg)(e)||(0,G.Et)(e)||(0,G.$P)(e)?e:null}function M(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,n){return e.standardFunctionAsync(t,n,((e,r,i)=>{if((0,s.B)(i,2,2,t,n),null===i[0])throw new a.D$(t,a.TX.PortalRequired,n);if(i[0]instanceof o.A){const e=(0,s.w)(i[1]);let n;return n=t.services?.portal?t.services.portal:f.A.getDefault(),x((0,u.R)(i[0],n),e)}if(!1===(0,G.Kg)(i[0]))throw new a.D$(t,a.TX.InvalidParameter,n);const p=(0,s.w)(i[0]);return x(t.services?.portal??f.A.getDefault(),p)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,o){return e.standardFunctionAsync(t,o,(async(e,u,p)=>{(0,s.B)(p,2,4,t,o);const d=p[0];if(!(0,s.o)(d))throw new a.D$(t,a.TX.InvalidParameter,o);const f=p[1];if(!(0,G.Kg)(f))throw new a.D$(t,a.TX.InvalidParameter,o);null===S&&(S=await n.e(8259).then(n.bind(n,88259)));let h=null;const g=(0,s.J)(p[2],null);if(!(g instanceof i.A||null===g))throw new a.D$(t,a.TX.InvalidParameter,o);if(g){let e=[];h=R(g,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await async function(e){const t=r.A.geometryServiceUrl??"";if(!t){(0,l.isLoaded)()||await(0,l.load)();for(const t of e)t.container[t.indexer]=(0,l.project)(t.container[t.indexer],c.A.WGS84);return}const n=e.map((e=>e.container[e.indexer])),o=new _.A({geometries:n,outSpatialReference:c.A.WGS84}),i=await(0,y.C)(t,o);for(let t=0;t<i.length;t++){const n=e[t];n.container[n.indexer]=i[t]}}(e)}const m=(0,s.J)(p[3],!1),v=new w.A({openCypherQuery:f,bindParameters:h,provenanceBehavior:m?"include":"exclude"});(d?.serviceDefinition?.currentVersion??11.3)>11.2&&(v.outputSpatialReference=t.spatialReference);const A=(await S.executeQueryStreaming(d,v)).resultRowsStream.getReader(),x=[];try{for(;;){const{done:e,value:n}=await A.read();if(e)break;if((0,G.cy)(n))for(const e of n)x.push(k(e,t));else{const e=[];for(const r of n)e.push(k(n[r],t));x.push(e)}}}catch(e){throw e}return i.A.convertJsonToArcade(x,(0,s.K)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},80211:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(82392),o=n(81482),i=(n(6273),n(80861),n(67498),n(26325)),a=n(92450);let s=class extends a.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphNamedObject")],s)},81114:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(82392),o=n(81482),i=(n(6273),n(80861),n(67498),n(26325)),a=n(1912),s=n(80211);let u=class extends s.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,o.MZ)({type:a.A,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.Entity")],u)},92450:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(82392),o=n(84977),i=n(81482),a=(n(6273),n(80861),n(67498),n(26325));let s=class extends o.A{constructor(e){super(e),this.properties=null}};(0,r._)([(0,i.MZ)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,r._)([(0,a.$)("esri.rest.knowledgeGraph.GraphObject")],s)},95324:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(82392),o=n(81482),i=(n(6273),n(80861),n(67498),n(26325)),a=n(38648),s=n(80211);let u=class extends s.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"originId",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"destinationId",void 0),(0,r._)([(0,o.MZ)({type:a.A,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.Relationship")],u)}}]);