"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[1759],{2366:function(t,e,n){n.d(e,{A:function(){return g}});var r,o=n(82392),i=n(84977),s=n(15565),l=n(80861),a=n(81482),u=n(77380),c=n(26325),f=n(8636),h=n(93544),p=n(64855),d=n(78608);let g=r=class extends i.A{static from(t){return(0,f.PZ)(r,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(t){return(0,d.b)(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},l.A.getLogger(this))}castMaterial(t){return(0,f.PZ)(t&&"object"==typeof t&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?p.A:h.A,t)}clone(){return new r({faces:(0,s.o8)(this.faces),shading:this.shading,material:(0,s.o8)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,e){const n={faces:(0,s.o8)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,e):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new r(n)}get memoryUsage(){let t=0;return null!=this.faces&&(t+=this.faces.byteLength),null!=this.material&&(t+=this.material.memoryUsage),t}};(0,o._)([(0,a.MZ)({json:{write:d.B}})],g.prototype,"faces",void 0),(0,o._)([(0,u.w)("faces")],g.prototype,"castFaces",null),(0,o._)([(0,a.MZ)({type:h.A,json:{write:!0}})],g.prototype,"material",void 0),(0,o._)([(0,u.w)("material")],g.prototype,"castMaterial",null),(0,o._)([(0,a.MZ)({json:{write:!0}})],g.prototype,"name",void 0),(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],g.prototype,"shading",void 0),(0,o._)([(0,a.MZ)({type:Boolean})],g.prototype,"trustSourceNormals",void 0),g=r=(0,o._)([(0,c.$)("esri.geometry.support.MeshComponent")],g)},4388:function(t,e,n){n.d(e,{A:function(){return a}});var r=n(82392),o=n(14755),i=n(84977),s=n(81482),l=(n(6273),n(80861),n(67498),n(26325));let a=class extends(o.A.ClonableMixin(i.A)){constructor(t){super(t),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"offset",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],a.prototype,"rotation",void 0),(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"scale",void 0),a=(0,r._)([(0,l.$)("esri.geometry.support.MeshTextureTransform")],a)},30544:function(t,e,n){n.d(e,{Wq:function(){return r},lO:function(){return h},oR:function(){return p}});var r,o,i=n(91814),s=n(60929),l=n(11021),a=n(75644),u=n(51831),c=n(63995),f=n(95431);function h(t){const e=p(t.rings,t.hasZ,r.CCW_IS_HOLE,t.spatialReference),n=new Array;let o=0,s=0;for(const t of e.polygons){const r=t.count,l=t.index,c=(0,a.l5)(e.position,3*l,3*r),f=t.holeIndices.map((t=>t-l)),h=(0,u.uW)((0,i.e)(c,f,3));n.push({position:c,faces:h}),o+=c.length,s+=h.length}const l=function(t,e,n){if(1===t.length)return t[0];const r=(0,a.jh)(e),o=new Array(n);let i=0,s=0,l=0;for(const e of t){for(let t=0;t<e.position.length;t++)r[i++]=e.position[t];for(const t of e.faces)o[s++]=t+l;l=i/3}return{position:r,faces:(0,u.uW)(o)}}(n,o,s),c=Array.isArray(l.position)?(0,f.b)(l.position,3,{originalIndices:l.faces}):(0,f.b)(l.position.buffer,6,{originalIndices:l.faces});return l.position=(0,a.xm)(new Float64Array(c.buffer)),l.faces=c.indices,l}function p(t,e,n,o){const i=t.length,s=new Array(i),l=new Array(i),u=new Array(i);let c=0;for(let e=0;e<i;++e)c+=t[e].length;let f=0,h=0,p=0;const m=(0,a.jh)(3*c);let y=0;for(let a=i-1;a>=0;a--){const c=t[a],T=n===r.CCW_IS_HOLE&&g(c,e,o);if(T&&1!==i)s[f++]=c;else{let t=c.length;for(let e=0;e<f;++e)t+=s[e].length;const n={index:y,pathLengths:new Array(f+1),count:t,holeIndices:new Array(f)};n.pathLengths[0]=c.length,c.length>0&&(u[p++]={index:y,count:c.length}),y=T?d(c,c.length-1,-1,m,y,c.length,e):d(c,0,1,m,y,c.length,e);for(let t=0;t<f;++t){const r=s[t];n.holeIndices[t]=y,n.pathLengths[t+1]=r.length,r.length>0&&(u[p++]={index:y,count:r.length}),y=d(r,0,1,m,y,r.length,e)}f=0,n.count>0&&(l[h++]=n)}}for(let t=0;t<f;++t){const n=s[t];n.length>0&&(u[p++]={index:y,count:n.length}),y=d(n,0,1,m,y,n.length,e)}return l.length=h,u.length=p,{position:m,polygons:l,outlines:u}}function d(t,e,n,r,o,i,s){o*=3;for(let l=0;l<i;++l){const i=t[e];r[o++]=i[0],r[o++]=i[1],r[o++]=s&&i[2]?i[2]:0,e+=n}return o/3}function g(t,e,n){if(!e)return!(0,l.$3)(t);const r=t.length-1;switch((0,c.S)(t,r,n)){case s._.X:return!(0,l.$3)(t,s._.Y,s._.Z);case s._.Y:return!(0,l.$3)(t,s._.X,s._.Z);case s._.Z:return!(0,l.$3)(t,s._.X,s._.Y)}}(o=r||(r={}))[o.NONE=0]="NONE",o[o.CCW_IS_HOLE=1]="CCW_IS_HOLE"},46874:function(t,e,n){n.d(e,{A:function(){return g}});var r,o=n(82392),i=(n(6273),n(73027)),s=n(84977),l=n(81482),a=n(8636),u=(n(67498),n(25376)),c=n(26325),f=n(48524),h=n(55714);const p=new WeakMap;let d=0,g=class extends s.A{static{r=this}constructor(t){super(t),this.wrap="repeat"}get url(){return this._get("url")||null}set url(t){this._set("url",t),t&&this._set("data",null)}get data(){return this._get("data")||null}set data(t){this._set("data",t),t&&this._set("url",null)}writeData(t,e,n,r){if(t instanceof HTMLImageElement){const o={type:"image-element",src:(0,h.t)(t.src,r),crossOrigin:t.crossOrigin};e[n]=o}else if(t instanceof HTMLCanvasElement){const r={type:"canvas-element",imageData:m(t.getContext("2d").getImageData(0,0,t.width,t.height))};e[n]=r}else if(t instanceof HTMLVideoElement){const o={type:"video-element",src:(0,h.t)(t.src,r),autoplay:t.autoplay,loop:t.loop,muted:t.muted,crossOrigin:t.crossOrigin,preload:t.preload};e[n]=o}else if(t instanceof ImageData){const r={type:"image-data",imageData:m(t)};e[n]=r}}readData(t){switch(t.type){case"image-element":{const e=new Image;return e.src=t.src,e.crossOrigin=t.crossOrigin,e}case"canvas-element":{const e=y(t.imageData),n=document.createElement("canvas");return n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e,0,0),n}case"image-data":return y(t.imageData);case"video-element":{const e=document.createElement("video");return e.src=t.src,e.crossOrigin=t.crossOrigin,e.autoplay=t.autoplay,e.loop=t.loop,e.muted=t.muted,e.preload=t.preload,e}default:return}}get transparent(){const{data:t,url:e}=this,n=t=>t?.toLowerCase().endsWith(".png")||t?.toLocaleLowerCase().startsWith("data:image/png;");return t instanceof HTMLCanvasElement?T(t.getContext("2d").getImageData(0,0,t.width,t.height)):t instanceof ImageData?T(t):!(!e||!n(e))||!!(t instanceof HTMLImageElement&&n(t.src))}set transparent(t){this._overrideIfSome("transparent",t)}get contentHash(){const t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",e=(e="")=>`d:${e},t:${this.transparent},w:${t}`;return null!=this.url?e(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?e(this.data.src):(p.has(this.data)||p.set(this.data,++d),e(p.get(this.data))):e()}get memoryUsage(){let t=0;if(t+=null!=this.url?this.url.length:0,null!=this.data){const e=this.data;"data"in e?t+=e.data.byteLength:e instanceof HTMLImageElement?t+=e.naturalWidth*e.naturalHeight*3:e instanceof HTMLCanvasElement&&(t+=e.width*e.height*3)}return t}clone(){const t={url:this.url,data:this.data,transparent:this.transparent,wrap:this._cloneWrap()};return new r(t)}cloneWithDeduplication(t){const e=t.get(this);if(e)return e;const n=this.clone();return t.set(this,n),n}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}static from(t){return"string"==typeof t?new r({url:t}):t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData||t instanceof HTMLVideoElement?new r({data:t}):(0,a.PZ)(r,t)}};function m(t){let e="";for(let n=0;n<t.data.length;n++)e+=String.fromCharCode(t.data[n]);return{data:btoa(e),width:t.width,height:t.height}}function y(t){const e=atob(t.data),n=new Uint8ClampedArray(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return(0,i.eV)(n,t.width,t.height)}function T(t){for(let e=3;e<t.data.length;e+=4)if(255!==t.data[e])return!0;return!1}(0,o._)([(0,l.MZ)({type:String,json:{write:h.w}})],g.prototype,"url",null),(0,o._)([(0,l.MZ)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,l.MZ)()],g.prototype,"data",null),(0,o._)([(0,f.K)("data")],g.prototype,"writeData",null),(0,o._)([(0,u.w)("data")],g.prototype,"readData",null),(0,o._)([(0,l.MZ)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],g.prototype,"transparent",null),(0,o._)([(0,l.MZ)({json:{write:!0}})],g.prototype,"wrap",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],g.prototype,"contentHash",null),g=r=(0,o._)([(0,c.$)("esri.geometry.support.MeshTexture")],g)},63995:function(t,e,n){n.d(e,{S:function(){return a}});var r=n(4506),o=n(5262),i=n(80347),s=n(60929),l=n(87368);function a(t,e,n){const a=function(t,e,n,r){const s=(t=>!Array.isArray(t[0]))(e)?(t,n)=>e[3*t+n]:(t,n)=>e[t][n],a=r?(0,o.GA)(r)/(0,o.G9)(r):1;return(0,l.lU)(t,((t,e)=>(0,i.i)(t,s(e,0)*a,s(e,1)*a,s(e,2))),n)}(u,t,e,n)?(0,l.Qj)(u):[0,0,1];return Math.abs(a[2])>Math.cos((0,r.kU)(80))?s._.Z:Math.abs(a[1])>Math.abs(a[0])?s._.Y:s._.X}const u=(0,l.vt)()},64855:function(t,e,n){n.d(e,{A:function(){return f}});var r,o=n(82392),i=n(93814),s=n(81482),l=(n(6273),n(80861),n(67498),n(26325)),a=n(93544),u=n(46874),c=n(4388);let f=r=class extends a.A{constructor(t){super(t),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(t,e){const n=null!=t?t.get(this):null;if(n)return n;const o=new r(this.clonePropertiesWithDeduplication(e));return null!=t&&t.set(this,o),o}getMemoryUsage(){let t=super.getMemoryUsage();return t+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(t+=this.emissiveTexture.memoryUsage),t+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(t+=this.occlusionTexture.memoryUsage),t+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(t+=this.metallicRoughnessTexture.memoryUsage),t+=null!=this.metallicRoughnessTextureTransform?20:0,t}clonePropertiesWithDeduplication(t){return{...super.clonePropertiesWithDeduplication(t),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(t),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(t),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(t),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};(0,o._)([(0,s.MZ)({type:i.A,json:{write:!0}})],f.prototype,"emissiveColor",void 0),(0,o._)([(0,s.MZ)({type:u.A,json:{write:!0}})],f.prototype,"emissiveTexture",void 0),(0,o._)([(0,s.MZ)({type:c.A,json:{write:!0}})],f.prototype,"emissiveTextureTransform",void 0),(0,o._)([(0,s.MZ)({type:u.A,json:{write:!0}})],f.prototype,"occlusionTexture",void 0),(0,o._)([(0,s.MZ)({type:c.A,json:{write:!0}})],f.prototype,"occlusionTextureTransform",void 0),(0,o._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],f.prototype,"metallic",void 0),(0,o._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],f.prototype,"roughness",void 0),(0,o._)([(0,s.MZ)({type:u.A,json:{write:!0}})],f.prototype,"metallicRoughnessTexture",void 0),(0,o._)([(0,s.MZ)({type:c.A,json:{write:!0}})],f.prototype,"metallicRoughnessTextureTransform",void 0),f=r=(0,o._)([(0,l.$)("esri.geometry.support.MeshMaterialMetallicRoughness")],f)},66335:function(t,e,n){n.d(e,{a:function(){return i},b:function(){return c},l:function(){return u},n:function(){return l},t:function(){return s}});var r=n(36137),o=(n(6273),n(80861));function i(t,e,n){s(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function s(t,e,n,r=4,o=r){if(t.length/r!=e.length/o)return;const i=t.length/r,s=n[0],l=n[1],a=n[2],u=n[3],c=n[4],f=n[5],h=n[6],p=n[7],d=n[8];let g=0,m=0;for(let n=0;n<i;n++){const n=e[g],i=e[g+1],y=e[g+2],T=e[g+3];t[m]=s*n+u*i+h*y,t[m+1]=l*n+c*i+p*y,t[m+2]=a*n+f*i+d*y,t[m+3]=T,g+=o,m+=r}}function l(t,e){const n=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,i=e.typedBuffer,s=e.typedBufferStride;for(let t=0;t<n;t++){const e=t*o,n=t*s,l=i[n],a=i[n+1],u=i[n+2],c=l*l+a*a+u*u;if(c>0){const t=1/Math.sqrt(c);r[e]=t*l,r[e+1]=t*a,r[e+2]=t*u}}}function a(t,e,n,r=4){const o=Math.min(t.length/r,e.count),i=e.typedBuffer,s=e.typedBufferStride;let l=0,a=0;for(let e=0;e<o;e++)t[a]=n*i[l],t[a+1]=n*i[l+1],t[a+2]=n*i[l+2],t[a+3]=n*i[l+3],l+=s,a+=r}function u(t,e,n,r){c(t.typedBuffer,e,n,r,t.typedBufferStride)}function c(t,e,n,o,i=4){const s=Math.min(t.length/i,e.count),l=e.typedBuffer,a=e.typedBufferStride;let u=0,c=0;const f=1/r.Tf;for(let e=0;e<s;e++)t[c]=o*(n*l[u])**f,t[c+1]=o*(n*l[u+1])**f,t[c+2]=o*(n*l[u+2])**f,t[c+3]=o*n*l[u+3],u+=a,c+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:u,normalize:l,scale:a,scaleView:function(t,e,n){a(t.typedBuffer,e,n,t.typedBufferStride)},transformMat3:s,transformMat3View:i,transformMat4:function(t,e,n,r=4,i=r){if(t.length/r!=e.length/i)return void o.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const s=t.length/r,l=n[0],a=n[1],u=n[2],c=n[3],f=n[4],h=n[5],p=n[6],d=n[7],g=n[8],m=n[9],y=n[10],T=n[11],w=n[12],A=n[13],M=n[14],v=n[15];let x=0,_=0;for(let n=0;n<s;n++){const n=e[x],o=e[x+1],s=e[x+2],S=e[x+3];t[_]=l*n+f*o+g*s+w*S,t[_+1]=a*n+h*o+m*s+A*S,t[_+2]=u*n+p*o+y*s+M*S,t[_+3]=c*n+d*o+T*s+v*S,x+=i,_+=r}},transformMat4View:function(t,e,n){if(t.count!==e.count)return;const r=t.count,o=n[0],i=n[1],s=n[2],l=n[3],a=n[4],u=n[5],c=n[6],f=n[7],h=n[8],p=n[9],d=n[10],g=n[11],m=n[12],y=n[13],T=n[14],w=n[15],A=t.typedBuffer,M=t.typedBufferStride,v=e.typedBuffer,x=e.typedBufferStride;for(let t=0;t<r;t++){const e=t*M,n=t*x,r=v[n],_=v[n+1],S=v[n+2],C=v[n+3];A[e]=o*r+a*_+h*S+m*C,A[e+1]=i*r+u*_+p*S+y*C,A[e+2]=s*r+c*_+d*S+T*C,A[e+3]=l*r+f*_+g*S+w*C}}},Symbol.toStringTag,{value:"Module"}))},72449:function(t,e,n){n.d(e,{a:function(){return f},b:function(){return l},c:function(){return s},d:function(){return o},e:function(){return h},f:function(){return c},l:function(){return u},n:function(){return p},t:function(){return i}});var r=n(36137);n(6273),n(80861);function o(t,e,n){i(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function i(t,e,n,r=3,o=r){if(t.length/r!==Math.ceil(e.length/o))return t;const i=t.length/r,s=n[0],l=n[1],a=n[2],u=n[4],c=n[5],f=n[6],h=n[8],p=n[9],d=n[10],g=n[12],m=n[13],y=n[14];let T=0,w=0;for(let n=0;n<i;n++){const n=e[T],i=e[T+1],A=e[T+2];t[w]=s*n+u*i+h*A+g,t[w+1]=l*n+c*i+p*A+m,t[w+2]=a*n+f*i+d*A+y,T+=o,w+=r}return t}function s(t,e,n){l(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function l(t,e,n,r=3,o=r){if(t.length/r!==Math.ceil(e.length/o))return;const i=t.length/r,s=n[0],l=n[1],a=n[2],u=n[3],c=n[4],f=n[5],h=n[6],p=n[7],d=n[8];let g=0,m=0;for(let n=0;n<i;n++){const n=e[g],i=e[g+1],y=e[g+2];t[m]=s*n+u*i+h*y,t[m+1]=l*n+c*i+p*y,t[m+2]=a*n+f*i+d*y,g+=o,m+=r}}function a(t,e,n,r=3,o=r){const i=Math.min(t.length/r,e.length/o);let s=0,l=0;for(let a=0;a<i;a++)t[l]=n*e[s],t[l+1]=n*e[s+1],t[l+2]=n*e[s+2],s+=o,l+=r;return t}function u(t,e,n,r){c(t.typedBuffer,e.typedBuffer,n,r,t.typedBufferStride,e.typedBufferStride)}function c(t,e,n,o,i=3,s=i){const l=Math.min(t.length/i,e.length/s);let a=0,u=0;const c=1/r.Tf;for(let r=0;r<l;r++)t[u]=o*(n*e[a])**c,t[u+1]=o*(n*e[a+1])**c,t[u+2]=o*(n*e[a+2])**c,a+=s,u+=i}function f(t,e,n,r=3,o=r){const i=t.length/r;if(i!==Math.ceil(e.length/o))return t;let s=0,l=0;for(let a=0;a<i;a++)t[l]=e[s]+n[0],t[l+1]=e[s+1]+n[1],t[l+2]=e[s+2]+n[2],s+=o,l+=r;return t}function h(t,e){p(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function p(t,e,n=3,r=n){const o=Math.min(t.length/n,e.length/r);let i=0,s=0;for(let l=0;l<o;l++){const o=e[i],l=e[i+1],a=e[i+2],u=o*o+l*l+a*a;if(u>0){const e=1/Math.sqrt(u);t[s]=e*o,t[s+1]=e*l,t[s+2]=e*a}i+=r,s+=n}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:u,normalize:p,normalizeView:h,scale:a,scaleView:function(t,e,n){a(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)},shiftRight:function(t,e,n){const r=Math.min(t.count,e.count),o=t.typedBuffer,i=t.typedBufferStride,s=e.typedBuffer,l=e.typedBufferStride;let a=0,u=0;for(let t=0;t<r;t++)o[u]=s[a]>>n,o[u+1]=s[a+1]>>n,o[u+2]=s[a+2]>>n,a+=l,u+=i},transformMat3:l,transformMat3View:s,transformMat4:i,transformMat4View:o,translate:f},Symbol.toStringTag,{value:"Module"}))},78608:function(t,e,n){function r(t,e,n,r){const{loggerTag:o,stride:i}=e;return t.length%i!=0?(r.error(o,`Invalid array length, expected a multiple of ${i}`),new n([])):t}function o(t,e,n,o,i){if(!t)return t;if(t instanceof e)return r(t,o,e,i);for(const s of n)if(t instanceof s)return r(new e(t),o,e,i);if(Array.isArray(t))return r(new e(t),o,e,i);{const r=n.map((t=>`'${t.name}'`));return i.error(`Failed to set property, expected one of ${r}, but got ${t.constructor.name}`),new e([])}}function i(t,e,n){e[n]=function(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n];return e}(t)}n.d(e,{B:function(){return i},b:function(){return o}})},81587:function(t,e,n){n.d(e,{UR:function(){return M},p5:function(){return A},xK:function(){return N}});var r=n(80861),o=n(4506),i=n(5262),s=n(82541),l=n(79441),a=n(25336),u=n(26110),c=n(80347),f=n(19913),h=n(32159),p=n(63540),d=n(64159),g=n(28364),m=n(67488),y=n(72449),T=n(90514);const w=()=>r.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function A(t,e,{vertexSpace:n,spatialReference:r}){if("georeferenced"===n.type){const o=t;if(!(0,d.g)(e,o,r))return!1;const{origin:i}=n;return(0,c.d)(t,o,i),!0}const o=(0,h.lO)(r),i=t;if(!(0,d.g)(e,i,o))return!1;const{origin:s}=n,l=O;if(!(0,p.l)(r,s,l,o))return!1;const u=(0,a.B8)(O,l);return null!=u&&((0,c.t)(t,i,u),!0)}function M(t,e,n){const{vertexSpace:r,transform:o,vertexAttributes:i}=t,l=(0,g.Hq)(r)?o:null,f=S(t.spatialReference,n,j.SOURCE_AND_TARGET);if((0,g.yJ)(r,e)&&(!l||(0,a.t2)(l.localMatrix,u.zK))&&C(f)){const{position:t,normal:e,tangent:r}=i,o=n?.allowBufferReuse;return{position:o?t:t.slice(),normal:o?e:e?.slice(),tangent:o?r:r?.slice()}}switch(t.vertexSpace.type){case"local":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:n},{origin:r},o,i){const s=v(e,i);if(!(0,p.l)(e,r,R,s))return(0,T.CN)(w(),e,s),null;if(n&&(0,a.lw)(R,R,n.localMatrix),!(0,p.l)(e,o,b,s))return(0,T.CN)(w(),s,e),null;(0,a.B8)(b,b);const l=(0,a.lw)(R,b,R);return _(l,e,i,j.SOURCE_AND_TARGET),x(t,l)}(t,t.vertexSpace,e.origin,n):function({spatialReference:t,vertexAttributes:e,transform:n},{origin:r},o,i){const s=v(t,i);if(!(0,p.l)(t,r,R,s))return(0,T.CN)(w(),t,s),null;n&&(0,a.lw)(R,R,n.localMatrix),_(R,t,i,j.SOURCE);const l=new Float64Array(e.position.length),u=function(t,e,n,r,o){(0,y.t)(r,t,e);const i=new Float64Array(t.length);return(0,T.$5)(r,o,i,n)?i:((0,T.CN)(w(),o,n),null)}(e.position,R,t,l,s);if(!u)return null;const f=function(t,e,n,r,o,i){if(null==o)return null;const s=new Float32Array(o.length);return(0,T.qs)(o,s,i),(0,T.si)(s,t,e,n,r,s)?s:((0,T.CN)(w(),r,e),null)}(u,t,l,s,e.normal,R);if(e.normal&&!f)return null;const h=function(t,e,n,r,o,i){if(null==o)return null;const s=new Float32Array(o.length);return(0,T.KM)(o,s,i),(0,T.Mv)(s,t,e,n,r,s)?s:((0,T.CN)(w(),r,e),null)}(u,t,l,s,e.tangent,R);if(e.tangent&&!h)return null;if(o){const t=(0,c.u)(E,o);(0,y.a)(u,u,t)}return{position:u,normal:f,tangent:h}}(t,t.vertexSpace,e.origin,n);case"georeferenced":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:n},{origin:r},o,i){const l=v(e,i);if(!(0,p.l)(e,o,R,l))return(0,T.CN)(w(),e,l),null;const u=1/S(e,i,j.TARGET);(0,a.hs)(R,R,[u,u,u]);const c=(0,a.B8)(b,R),{position:f,normal:h,tangent:d}=function(t,e,n){if(!e)return t;if(!n){const{position:n,normal:r,tangent:o}=t;return{position:(0,y.a)(new Float64Array(n.length),n,e),tangent:o,normal:r}}const r=x(t,n.localMatrix);return(0,y.a)(r.position,r.position,e),r}(t,r,n),g=new Float64Array(f.length),m=function(t,e,n,r,o){const i=(0,T.gr)(t,e,r,o);if(!i)return(0,T.CN)(w(),e,o),null;const s=new Float64Array(i.length);return(0,y.t)(s,i,n),s}(f,e,c,g,l);if(!m)return null;const A=(0,s.Ge)(B,c),M=function(t,e,n,r,o,i,s){if(null==t)return null;const l=s??new Float32Array(t.length);return(0,T.X4)(t,e,n,r,o,l)?((0,y.b)(l,l,i),l):((0,T.CN)(w(),n,o),null)}(h,f,e,g,l,A,h!==t.normal?h:void 0);if(!M&&h)return null;const _=function(t,e,n,r,o,i,s){if(null==t)return null;const l=s??new Float32Array(t.length);return(0,T.xA)(t,e,n,r,o,l)?((0,y.b)(l,l,i,4),l):((0,T.CN)(w(),n,o),null)}(d,f,e,g,l,A,d!==t.tangent?d:void 0);return!_&&d?null:{position:m,normal:M,tangent:_}}(t,t.vertexSpace,e.origin,n):function({vertexAttributes:t,transform:e,spatialReference:n},{origin:r},o,i){const s=S(n,i,j.SOURCE_AND_TARGET),l=r||!C(s)?(0,a.C)(R,e?.localMatrix??u.zK):null;l&&_(l,n,i,j.SOURCE_AND_TARGET);const{position:f,normal:h,tangent:p}=l?x(t,l):t,d=i?.allowBufferReuse,g=d?f:new Float64Array(f.length);let m=f;if(r&&(m=(0,y.a)(g,m,r)),o){const t=(0,c.u)(E,o);m=(0,y.a)(g,m,t)}return{position:m!==t.position||d?m:m.slice(),normal:h!==t.normal||d?h:h?.slice(),tangent:p!==t.tangent||d?p:p?.slice()}}(t,t.vertexSpace,e.origin,n)}}function v(t,e){return e?.useEllipsoid&&(0,m.B3)(t)?h.Y0:(0,h.lO)(t)}function x(t,e){const n=new Float64Array(t.position.length);(0,y.t)(n,t.position,e);const r=t.normal?new Float32Array(t.normal.length):null,o=t.tangent?new Float32Array(t.tangent.length):null;return r&&t.normal&&(0,T.qs)(t.normal,r,e),o&&t.tangent&&(0,T.KM)(t.tangent,o,e),{position:n,normal:r,tangent:o}}function _(t,e,n,r){const o=S(e,n,r);C(o)||(0,a.hs)(t,t,[o,o,o])}function S(t,e,n){const r=!!(n&j.SOURCE),o=!!(n&j.TARGET),i=e?.sourceUnit,s=e?.targetUnit;if(!i&&!s)return 1;let l=N(i,t);r||!i||C(l)||(w().warn("source unit conversion not supported"),l=1);let a=1/N(s,t);return o||!s||C(a)||(w().warn("target unit conversion not supported"),a=1),l*a}function C(t){return(0,o.Io)(t,1)}function N(t,e){if(null==t)return 1;const n=(0,i.KX)(e);return 1/(0,i.oU)(n,"meters",t)}const R=(0,u.vt)(),b=(0,u.vt)(),B=(0,l.vt)(),E=(0,f.vt)(),O=(0,u.vt)();var j,U;(U=j||(j={}))[U.NONE=0]="NONE",U[U.SOURCE=1]="SOURCE",U[U.TARGET=2]="TARGET",U[U.SOURCE_AND_TARGET=3]="SOURCE_AND_TARGET"},90514:function(t,e,n){n.d(e,{$5:function(){return x},CN:function(){return w},GN:function(){return N},JP:function(){return T},KM:function(){return S},Mv:function(){return B},OD:function(){return E},X4:function(){return A},gZ:function(){return C},gr:function(){return v},qs:function(){return _},si:function(){return M},xA:function(){return b}});var r=n(4506),o=n(82541),i=n(79441),s=n(25336),l=n(26110),a=n(80347),u=n(19913),c=n(63540),f=n(88133),h=n(99263),p=n(67488),d=n(64672),g=n(40041),m=n(72449),y=n(66335);const T="Projection may be possible after calling projection.load().";function w(t,e,n,r){t.error(`Failed to project from (wkid:${e.wkid}) to (wkid:${n.wkid}).${r?" ":""}${r}`)}function A(t,e,n,r,o,i){return Z(O.TO_PCPF,g.xs.fromTypedArray(t),E.NORMAL,g.Xm.fromTypedArray(e),n,g.Xm.fromTypedArray(r),o,g.xs.fromTypedArray(i))?i:null}function M(t,e,n,r,o,i){return Z(O.FROM_PCPF,g.xs.fromTypedArray(t),E.NORMAL,g.Xm.fromTypedArray(e),n,g.Xm.fromTypedArray(r),o,g.xs.fromTypedArray(i))?i:null}function v(t,e,n,r){return(0,f.projectBuffer)(t,e,0,n,r,0)?n:null}function x(t,e,n,r){return(0,f.projectBuffer)(t,e,0,n,r,0)?n:null}function _(t,e,n){return(0,o.Ge)(F,n),(0,m.b)(e,t,F),(0,r.or)(F)&&(0,m.n)(e,e),e}function S(t,e,n){return(0,o.z0)(F,n),(0,y.t)(e,t,F),(0,r.or)(F)&&(0,m.n)(e,e,4),e}function C(t,e,n,o){const i=e===E.NORMAL;return R(t,e,n,((t,e)=>{const n=Math.cos((0,r.kU)(t));e[0]=i?n:1/n,e[1]=1}),o)}function N(t,e,n,r){const o=e===E.NORMAL;return R(t,e,n,((t,e)=>{const n=Math.cosh(-t/h.$O.radius);e[0]=1,e[1]=o?n:1/n}),r)}function R(t,e,n,r,o){const i=e===E.NORMAL?3:4,s=[0,0];for(let e=0,l=1;e<t.length;e+=i,l+=3){r(n[l],s);const a=t[e]*s[0],u=t[e+1]*s[1],c=t[e+2],f=1/Math.sqrt(a*a+u*u+c*c);o[e]=a*f,o[e+1]=u*f,o[e+2]=c*f,4===i&&(o[e+3]=t[e+3])}return o}function b(t,e,n,r,o,i){if(!Z(O.TO_PCPF,g.xs.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),E.TANGENT,g.Xm.fromTypedArray(e),n,g.Xm.fromTypedArray(r),o,g.xs.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}function B(t,e,n,r,o,i){if(!Z(O.FROM_PCPF,g.xs.fromTypedArray(t,16),E.TANGENT,g.Xm.fromTypedArray(e),n,g.Xm.fromTypedArray(r),o,g.xs.fromTypedArray(i,16)))return null;for(let e=3;e<t.length;e+=4)i[e]=t[e];return i}var E,O,j;function U(t,e,n,r,i){switch((0,c.l)(r,n,P,r),t===O.FROM_PCPF&&(0,s.B8)(P,P),e){case E.NORMAL:return(0,o.Ge)(i,P);case E.TANGENT:return(0,o.z0)(i,P)}}function Z(t,e,n,r,o,i,s,l){if(!e)return;const u=r.count;if(function(t){return t.isWGS84||(0,p.x1)(t)||(0,p.q8)(t)||(0,p.KQ)(t)}(o))for(let r=0;r<u;r++)i.getVec(r,D),e.getVec(r,L),(0,a.o)(L,L,U(t,n,D,s,F)),l.setVec(r,L);else for(let o=0;o<u;o++){i.getVec(o,D),e.getVec(o,L);const u=(0,d.jg)(r.get(o,1));let c=Math.cos(u);n===E.TANGENT!=(t===O.TO_PCPF)&&(c=1/c),U(t,n,D,s,F),t===O.TO_PCPF?(F[0]*=c,F[1]*=c,F[2]*=c,F[3]*=c,F[4]*=c,F[5]*=c):(F[0]*=c,F[3]*=c,F[6]*=c,F[1]*=c,F[4]*=c,F[7]*=c),(0,a.o)(L,L,F),(0,a.n)(L,L),l.setVec(o,L)}return l}(j=E||(E={}))[j.NORMAL=0]="NORMAL",j[j.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(O||(O={}));const D=(0,u.vt)(),L=(0,u.vt)(),P=(0,l.vt)(),F=(0,i.vt)()},93544:function(t,e,n){n.d(e,{A:function(){return f}});var r,o=n(82392),i=n(93814),s=n(84977),l=n(81482),a=(n(6273),n(80861),n(67498),n(26325)),u=n(46874),c=n(4388);let f=r=class extends s.A{constructor(t){super(t),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(t,e){const n=null!=t?t.get(this):null;if(n)return n;const o=new r(this.clonePropertiesWithDeduplication(e));return null!=t&&t.set(this,o),o}clonePropertiesWithDeduplication(t){return{color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(t),normalTexture:this.normalTexture?.cloneWithDeduplication(t),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let t=0;return t+=null!=this.color?16:0,null!=this.colorTexture&&(t+=this.colorTexture.memoryUsage),t+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(t+=this.normalTexture.memoryUsage),t+=null!=this.normalTextureTransform?20:0,t}};(0,o._)([(0,l.MZ)({type:i.A,json:{write:!0}})],f.prototype,"color",void 0),(0,o._)([(0,l.MZ)({type:u.A,json:{write:!0}})],f.prototype,"colorTexture",void 0),(0,o._)([(0,l.MZ)({type:c.A,json:{write:!0}})],f.prototype,"colorTextureTransform",void 0),(0,o._)([(0,l.MZ)({type:u.A,json:{write:!0}})],f.prototype,"normalTexture",void 0),(0,o._)([(0,l.MZ)({type:c.A,json:{write:!0}})],f.prototype,"normalTextureTransform",void 0),(0,o._)([(0,l.MZ)({nonNullable:!0,json:{write:!0}})],f.prototype,"alphaMode",void 0),(0,o._)([(0,l.MZ)({nonNullable:!0,json:{write:!0}})],f.prototype,"alphaCutoff",void 0),(0,o._)([(0,l.MZ)({nonNullable:!0,json:{write:!0}})],f.prototype,"doubleSided",void 0),f=r=(0,o._)([(0,a.$)("esri.geometry.support.MeshMaterial")],f)},95431:function(t,e,n){n.d(e,{b:function(){return i}});var r=n(4506),o=n(51831);function i(t,e,n){const i=Array.isArray(t),c=i?t.length/e:t.byteLength/(4*e),f=i?t:new Uint32Array(t,0,c*e),h=n?.minReduction??0,p=n?.originalIndices||null,d=p?p.length:0,g=n?.componentOffsets||null;let m=0;if(g)for(let t=0;t<g.length-1;t++){const e=g[t+1]-g[t];e>m&&(m=e)}else m=c;const y=Math.floor(1.1*m)+1;(null==u||u.length<2*y)&&(u=new Uint32Array((0,r.cU)(2*y)));for(let t=0;t<2*y;t++)u[t]=0;let T=0;const w=!!g&&!!p,A=w?d:c;let M=(0,o.my)(c);const v=new Uint32Array(d),x=1.96;let _=0!==h?Math.ceil(4*x*x/(h*h)*h*(1-h)):A,S=1,C=g?g[1]:A;for(let t=0;t<A;t++){if(t===_){const e=1-T/t;if(e+x*Math.sqrt(e*(1-e)/t)<h)return null;_*=2}if(t===C){for(let t=0;t<2*y;t++)u[t]=0;if(p)for(let t=g[S-1];t<g[S];t++)v[t]=M[p[t]];C=g[++S]}const n=w?p[t]:t,r=n*e,o=a(f,r,e);let i=o%y,l=T;for(;0!==u[2*i+1];){if(u[2*i]===o){const t=u[2*i+1]-1;if(s(f,r,t*e,e)){l=M[t];break}}i++,i>=y&&(i-=y)}l===T&&(u[2*i]=o,u[2*i+1]=n+1,T++),M[n]=l}if(0!==h&&1-T/c<h)return null;if(w){for(let t=g[S-1];t<v.length;t++)v[t]=M[p[t]];M=(0,o.uW)(v)}const N=i?new Array(T):new Uint32Array(T*e);T=0;for(let t=0;t<A;t++)M[t]===T&&(l(f,(w?p[t]:t)*e,N,T*e,e),T++);if(p&&!w){const t=new Uint32Array(d);for(let e=0;e<t.length;e++)t[e]=M[p[e]];M=(0,o.uW)(t)}return{buffer:Array.isArray(N)?N:N.buffer,indices:M,uniqueCount:T}}function s(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function l(t,e,n,r,o){for(let i=0;i<o;i++)n[r+i]=t[e+i]}function a(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let u=null}}]);