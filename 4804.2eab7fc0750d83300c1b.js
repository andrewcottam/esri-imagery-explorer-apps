"use strict";(self.webpackChunkimagery_explorer_apps=self.webpackChunkimagery_explorer_apps||[]).push([[4274,4804],{29604:function(t,e,n){n.d(e,{GP:function(){return d},LI:function(){return f},lc:function(){return a},u5:function(){return l}});n(39553);var i=n(18632);const r=/^-?(\d+)(\.(\d+))?$/i;function o(t,e){return t-e}function u(t,e){let n,i;return n=Number(t.toFixed(e)),n<t?i=n+1/10**e:(i=n,n-=1/10**e),n=Number(n.toFixed(e)),i=Number(i.toFixed(e)),[n,i]}function s(t,e,n,i,r){const o=l(t,e,n,i),u=null==o.previous||o.previous<=r,s=null==o.next||o.next<=r;return u&&s||o.previous+o.next<=2*r}function a(t){const e=String(t),n=e.match(r);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(e.toLowerCase().includes("e")){const t=e.split("e"),n=t[0],i=t[1];if(n&&i){const t=Number(n);let e=Number(i);const r=e>0;r||(e=Math.abs(e));const o=a(t);return r?(o.integer+=e,e>o.fractional?o.fractional=0:o.fractional-=e):(o.fractional+=e,e>o.integer?o.integer=1:o.integer-=e),o}}return{integer:0,fractional:0}}function l(t,e,n,i){const r={previous:null,next:null};if(null!=n){const i=t-n,o=e-n-i;r.previous=Math.floor(Math.abs(100*o/i))}if(null!=i){const n=i-t,o=i-e-n;r.next=Math.floor(Math.abs(100*o/n))}return r}function f(t,e={}){const n=t.slice(),{tolerance:i=2,strictBounds:r=!1,indexes:l=n.map(((t,e)=>e))}=e;l.sort(o);for(let t=0;t<l.length;t++){const e=l[t],o=n[e],f=0===e?null:n[e-1],c=e===n.length-1?null:n[e+1],d=a(o).fractional;if(d){let a,l=0,m=!1;for(;l<=d&&!m;){const e=u(o,l);a=r&&0===t?e[1]:e[0],m=s(o,a,f,c,i),l++}m&&(n[e]=a)}}return n}const c={maximumFractionDigits:20};function d(t){return(0,i.ZV)(t,c)}},64804:function(t,e,n){n.d(e,{Dd:function(){return f},Zo:function(){return c},getDateFormatOptions:function(){return d},iz:function(){return m}});var i=n(11895),r=n(46227),o=n(29604),u=n(74274),s=n(24826);const a="<",l=">";function f(t,e,n,i){let r="";return 0===e?r=`${a} `:e===n&&(r=`${l} `),r+(i?(0,u.i0)(t,i):(0,o.GP)(t))}async function c(t,e){const i=t.trailCap,r=t.trailWidth||1,o=e||await async function(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find((t=>"color"===t.type));if(!e)return null;let i=null,r=null;if(e.stops){if(1===e.stops.length)return e.stops[0].color;i=e.stops[0].value,r=e.stops[e.stops.length-1].value}const o=null!=i&&null!=r?i+(r-i)/2:0,{getColor:u}=await Promise.resolve().then(n.bind(n,37525));return u(e,o)??null}(t)||t.color;return new s.A({cap:i,color:o,width:r})}function d(t,e,n){const o=function(t,e){if(!e.field)return null;if("featureReduction"in t)switch(t.featureReduction?.type){case"cluster":case"binning":{const n=t.featureReduction.fields.find((({name:t})=>t.toLowerCase()===e.field.toLowerCase()));return n&&"getField"in t?t.getField(n.onStatisticField):null}}return"getField"in t?t.getField?.(e.field):null}(t,e);if(!o||!(0,u.fs)(o)&&!(0,r.OH)(o))return null;let s=function(t,e){const n="popupTemplate"in t?t.popupTemplate?.fieldInfos:null;if(n?.length&&e)return n.find((t=>t.fieldName?.toLowerCase()===e.toLowerCase()))?.format?.dateFormat}(t,o.name);if(!s&&"date"===o.type){let t=0,n=0;e.stops?(t=e.stops?.at(0)?.value??t,n=e.stops?.at(-1)?.value??n):"minDataValue"in e&&"maxDataValue"in e&&(t=e.minDataValue??t,n=e.maxDataValue??n),s=n-t>2*i.vf.days?"short-date":"short-date-short-time"}return{fieldType:o.type,format:s,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in t?t.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in t&&t.datesInUnknownTimezone}}}function m(t,e){if("authoringInfo"in t)return t.authoringInfo?.visualVariables?.find((({theme:t})=>t===e))}},74274:function(t,e,n){n.d(e,{EG:function(){return m},Ll:function(){return w},R3:function(){return v},UH:function(){return a},aM:function(){return h},fs:function(){return d},i0:function(){return T}});var i=n(50189),r=n(46227),o=(n(6183),n(68717)),u=n(82506),s=n(23375);const a=",",l={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},f=new Set(["integer","small-integer"]);let c=null;function d(t){return(0,r.vE)(t)||(0,r.zD)(t)||(0,r.Ah)(t)}async function m(t){const{field:e,field2:n,field3:i,normalizationField:r,valueExpression:u}=t;let s=[];if(u){if(!c){const{arcadeUtils:t}=await(0,o.l)();c=t}s=c.extractFieldNames(u)}return e&&s.push(e),n&&s.push(n),i&&s.push(i),r&&s.push(r),s}function p(t){return String(t).padStart(2,"0")}function g(t,e,n){let i;return"date"===e||"number"===e?("number"===e&&(t=new Date(t)),i=`TIMESTAMP'${n?t.getFullYear():t.getUTCFullYear()}-${p((n?t.getMonth():t.getUTCMonth())+1)}-${p(n?t.getDate():t.getUTCDate())} ${p(n?t.getHours():t.getUTCHours())}:${p(n?t.getMinutes():t.getUTCMinutes())}:${p(n?t.getSeconds():t.getUTCSeconds())}'`):i=t,i}function h(t,e,n,i){const{hasQueryEngine:r}=t,o=`(${g(n,y(t,n),r)} - ${g(e,y(t,e),r)})`;let u=l[i],s="/";return u<1&&(u=1/u,s="*"),{sqlExpression:1===u?o:`(${o} ${s} ${u})`,sqlWhere:null}}function y(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const n=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,r.vE)(n))return"field"}}function v(t,e){const n=e&&t.getField(e);return!!n&&f.has(n.type)}function w(t){return`cast(${t} as float)`}function T(t,e){const{format:n,timeZoneOptions:r,fieldType:o}=e??{};let a,l;if(r&&({timeZone:a,timeZoneName:l}=(0,s.hv)(r.layerTimeZone,r.datesInUnknownTimezone,r.viewTimeZone,(0,i.J2)(n||"short-date-short-time"),o)),"string"==typeof t&&isNaN(Date.parse("time-only"===o?`1970-01-01T${t}Z`:t)))return t;switch(o){case"date-only":{const e=(0,i.J2)(n||"short-date");return"string"==typeof t?(0,i.iS)(t,{...e}):(0,i.Yq)(t,{...e,timeZone:u.n$})}case"time-only":{const e=(0,i.J2)(n||"short-time");return"string"==typeof t?(0,i.F8)(t,e):(0,i.Yq)(t,{...e,timeZone:u.n$})}case"timestamp-offset":{if(!a&&"string"==typeof t&&new Date(t).toISOString()!==t)return t;const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0,o=e?{...e,timeZone:a,timeZoneName:l}:void 0;return"string"==typeof t?(0,i.Ey)(t,o):(0,i.Yq)(t,o)}default:{const e=n||r?(0,i.J2)(n||"short-date-short-time"):void 0;return(0,i.Yq)("string"==typeof t?new Date(t):t,e?{...e,timeZone:a,timeZoneName:l}:void 0)}}}}}]);